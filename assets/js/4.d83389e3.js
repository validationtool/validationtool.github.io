(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{279:function(t,e,a){"use strict";a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return n})),a.d(e,"e",(function(){return v})),a.d(e,"p",(function(){return p})),a.d(e,"j",(function(){return l})),a.d(e,"q",(function(){return s})),a.d(e,"h",(function(){return D})),a.d(e,"n",(function(){return g})),a.d(e,"a",(function(){return x})),a.d(e,"d",(function(){return y})),a.d(e,"m",(function(){return f})),a.d(e,"g",(function(){return c})),a.d(e,"o",(function(){return m})),a.d(e,"c",(function(){return C})),a.d(e,"k",(function(){return d})),a.d(e,"l",(function(){return u})),a.d(e,"i",(function(){return h}));a(113);function s(t,e){return Math.round((e-t)/864e5)}function i(t){return Math.floor(t/10)<=0?"0"+t:t}function n(t,e){const a="string"==typeof t?new Date(l(t)):t;return a.setTime(a.getTime()+60*e*60*1e3),v(a)}function r(t){let e=t,a=t.toString();return a&&a.includes(".")&&(e=a.split(".")[0]),e}function o(t,e){let a,s,i=isNaN(t)?t:new Date(t);return i&&(a=i.toString().trim(),s=a.includes(":")&&!a.includes("T")&&!a.includes("Z"),i=a.includes("GMT")||s?i:l(i)),e?new Date(i):new Date(r(i))}function l(t,e,a){let s,i,n,o,l;return t&&t.includes("T")||t.includes("Z")?(s=new Date(t).toISOString(),o=s.split("T"),i=o[0],n=r(o[1].replace("Z"," ")),l=e?i:a?{datePart:i,timePart:n}:i+" "+n):(s=t.split(" "),2===s.length?(i=s[0],n=s[1],l=e?i:a?{datePart:i,timePart:n}:r(t)):l=t),l}function c(t,e){let a=t;const[s,i,n]=t?t.split("-"):[];return"fr"===e&&(a=`${n}/${i}/${s}`),a}function d(t,e,a,s){let i,n=t;return t&&(i=l(t,a,s),n=s?c(i.datePart,e)+" "+i.timePart:c(i,e)),n}function h(t){return l(t,null,!0).datePart}function u(t){return l(t,null,!0).timePart}function m(t,e){let a=!1;return t&&e&&(a=o(t).getTime()===o(e).getTime()),a}function p(t,e){let a=!1,s=new Date,i=new Date,n=t.split(":"),r=e.split(":");return s&&i&&n&&r&&(i.setHours(n[0],n[1],n[2]),s.setHours(r[0],r[1],r[2]),a=i.getTime()===s.getTime()),a}function g(t,e,a){let s,i,n=!1;return t&&e&&(s=isNaN(t)?o(t).getTime():t,i=isNaN(e)?o(e).getTime():e,n=a?i<s:i<=s),n}function f(t,e,a){let s,i,n,r=!1;return t&&e&&a&&(s=o(t).getTime(),i=o(e).getTime(),n=o(a).getTime(),r=i<=s&&s<=n),r}function v(t){let e,a,s,n,r,l,c,d=t;return t&&(e=o(t),a=i(e.getDate()),s=i(e.getMonth()+1),n=e.getFullYear(),r=i(e.getHours()),l=i(e.getMinutes()),c=i(e.getSeconds()),d=n+"-"+s+"-"+a+"T"+r+":"+l+":"+c+"Z"),d}function b(t){let e,a,s,n="";return t&&(e=i(t.getHours()),a=i(t.getMinutes()),s=i(t.getSeconds()),n=e+":"+a+":"+s),n}function y(t,e,a){let s=null;const n=new Date(t);let r,o,l;return n&&(r=i(n.getDate()),o=i(n.getMonth()+1),l=n.getFullYear(),"en"===e?s=l+"-"+o+"-"+r+(a?", "+b(n):""):"fr"===e&&(s=r+"/"+o+"/"+l+(a?", "+b(n):""))),s}function D(t,e){let a={day:null,month:null,year:null,firstDay:null,lastDay:null,firstDate:null,lastDate:null};const s=new Date(t);let n,r;return s&&(n=new Date(s.getFullYear(),s.getMonth(),1),r=new Date(s.getFullYear(),s.getMonth()+1,0),a.day=i(s.getDate()),a.month=i(s.getMonth()+1),a.year=s.getFullYear(),a.firstDate=e?l(n.toString(),e):n.toString(),a.lastDate=e?l(r.toString(),e):r.toString(),a.firstDay=i(n.getDate()),a.lastDay=i(r.getDate())),a}function x(t,e,a,s){let i,n;return a?(n=s?new Date(t).getTime()-864e5*e:new Date(t).getTime()+864e5*e,new Date(n).toDateString()):(i="string"==typeof t?new Date(l(t)):t,n=s?i.getDate()-e:i.getDate()+e,i.setDate(n),i)}function C(t,e,a){let s,i=t;return t&&void 0!==e&&(s=new Date(r(t)),s.setSeconds(a?s.getSeconds()+e:s.getSeconds()-e),i=v(s)),i}},280:function(t,e,a){"use strict";var s=a(279);e.a={data:()=>({dbPeriods:[],periodsModel:{},noDataColor:"#B0BEC5",periodsModelHistory:[],notValidatedColor:"#FF5252",workPeriodColor:"#1976D2",alreadyValidatedColor:"#4CAF50",partiallyControlledColor:"#FFC107",states:{"#1976D2":"Work period","#FF5252":"Not validated","#4CAF50":"Already validated","#FFC107":"Partially controlled","#B0BEC5":"Data not available"},statesValues:{workperiod:"Work period",notvalidated:"Not validated",datanotavailable:"Data not available",alreadyvalidated:"Already validated",partiallycontrolled:"Partially controlled"},stateColor:{workperiodcolor:"#1976D2",notvalidatedcolor:"#FF5252",datanotavailablecolor:"#B0BEC5",alreadyvalidatedcolor:"#4CAF50",partiallycontrolledcolor:"#FFC107"},statesColors:[{text:"session.label_alreadyValidated",color:"success"},{text:"session.label_notValidated",color:"error"},{text:"session.label_workPeriod",color:"primary"},{text:"session.label_partiallyControlled",color:"warning"},{text:"session.label_dataNotAvailable",color:"#B0BEC5"}],statesNames:{alreadyvalidated:"session.label_alreadyValidated",partiallycontrolled:"session.label_partiallyControlled",notvalidated:"session.label_notValidated",datanotavailable:"session.label_dataNotAvailable",workperiod:"session.label_workPeriod"}}),methods:{getDate:s.f,dateToUtc:s.e,getDateTime:s.j,dateToFormat:s.d,numberOfDay:s.q,getDateFrag:s.h,isHigherThan:s.n,addDayToDate:s.a,isDateBetWeen:s.m,isSameDateTime:s.o,getDatePikerDateFormat:s.i,getTimePickerTimeFormat:s.l,getStateNameByColor:function(t){let e=this.states.error;return t&&(e=this.states[t]),e},indexOfStateName:function(t,e){let a,s=-1;return t&&(a=Object.keys(this.statesNames).map(t=>e(t)),s=a.indexOf(t.replace(" ","").trim().toLowerCase())),s},translateTagName:function(t,e){let a="default";const s=t.replace(" ","").toLowerCase();return s&&(a=e(this.statesNames[s])),a},getStateColor:function(t){let e=this.notValidatedColor;return t&&(e=this.stateColor[t.trim().replace(" ","").toLowerCase()+"color"]),e},isPreappendPeriod:function(t,e){let a,s=!1;return t&&e&&(a=!this.isSameDateTime(e.startDate,t.startDate),s=a&&this.isHigherThan(e.startDate,t.startDate)),s},isAppendPeriod:function(t,e){let a,s=!1;return t&&e&&(a=!this.isSameDateTime(t.endDate,e.endDate),s=a&&this.isHigherThan(t.endDate,e.endDate)),s},periodToDate:function(t){let e,a,s=Object.assign({},t);return t&&(e=t.startDate?t.startDate:t.startXaxis?t.startXaxis:t.x0?t.x0:t.start,a=t.endDate?t.endDate:t.endXaxis?t.endXaxis:t.x1?t.x1:t.end,s={start:e,end:a}),s},isSamePeriod:function(t,e){let a,s,i=!1;return t&&e&&(a=this.periodToDate(Object.assign({},t)),s=this.periodToDate(Object.assign({},e)),i=this.isSameDateTime(a.start,s.start)&&this.isSameDateTime(a.end,s.end)),i},isTagExist:function(t,e,a){let s=!1;return t&&e&&a&&(s=t.some(t=>this.isSamePeriod(t,{startDate:e,endDate:a}))),s},getCalendarTag:function(t,e,a,s,i){let n=null;return!this.isTagExist(t,e,a)&&s&&i&&(n={name:s,color:i,start:new Date(this.getDateTime(e,!0)+"T00:00:00"),end:new Date(this.getDateTime(a,!0)+"T23:59:59")}),n},periodToTag:function(t,e,a){let s,i,n=null;return t&&e&&(i=this.getStateColor(e.state),s=this.translateTagName(e.state,a),n=this.getCalendarTag(t,e.startDate,e.endDate,s,i)),n},getTag:function(t,e,a,s,i,n){let r,o,l;return e?l=this.periodToTag(t,e,n):this.isDateBetWeen(a,s,i)?(r=this.notValidatedColor,o=this.$t("session.label_notValidated"),l=this.getCalendarTag(t,a,a,o,r)):(r=this.noDataColor,o=this.$t("session.label_noData"),l=this.getCalendarTag(t,a,a,o,r)),l},getWokPeriod:function(t){let e=null;const{workPeriod:a}=t;return t&&(e={state:"Work period",startDate:a.startDate,endDate:a.endDate}),e},getTargetPeriod(t,e,a){let s=null;return e&&a&&t&&(s=t.find(t=>this.isSamePeriod(t,{startDate:e,endDate:a}))),s},getTargetFlag:function(t,e){let a=null;return t&&e&&(a=t.find(t=>this.isSamePeriod(t,e))),a},dateBetweenPeriod:function(t,e){let a,s=!1;return t&&e&&(a=this.periodToDate(e),s=this.isDateBetWeen(t,a.start,a.end)),s},isEmptyInter:function(t,e){return!(this.dateBetweenPeriod(t.startDate,e)||this.dateBetweenPeriod(t.endDate,e)||this.dateBetweenPeriod(e.startDate,t)||this.dateBetweenPeriod(e.endDate,t))},isPeriodInclude:function(t,e){return this.dateBetweenPeriod(t.startDate,e)&&this.dateBetweenPeriod(t.endDate,e)},isCurrentPeriodChange:function(t,e,a){let s,i,n=!1;return t&&e&&a&&(i=this.stateColor.workperiodcolor,s=this.stateColor.notvalidatedcolor||this.stateColor.partiallycontrolledcolor,n=e.color===s&&a.color===i),n},isNewPeriod:function(t,e,a,s){let i=!1;return t&&e&&a&&s&&(i=!t.some(t=>this.isEmptyInter(e,t))||this.isCurrentPeriodChange(e,a,s)),i},flushNewPeriod:function(t,e,a,s){const i=t.parametersToValidate[0],n={parameterName:i.name,instrumentId:i.instrumentId,state:this.getStateNameByColor(a),startDate:this.dateToUtc(e.startDate),endDate:this.dateToUtc(e.endDate)};this.createPeriod(n,t=>{s&&s(t)})},isLftInter:function(t,e){let a=!1;return t&&e&&(a=!this.isDateBetWeen(t.startDate,e.startDate,e.endDate)&&this.isDateBetWeen(t.endDate,e.startDate,e.endDate)),a},isRgtInter:function(t,e){let a=!1;return t&&e&&(a=!this.isDateBetWeen(t.endDate,e.startDate,e.endDate)&&this.isDateBetWeen(t.startDate,e.startDate,e.endDate)),a},isFlagInPeriod:function(t,e){let a=!1;return t&&e&&(a=this.dateBetweenPeriod(t.start_date,e)&&this.dateBetweenPeriod(t.end_date,e)),a},checkPeriodInters:function(t,e,a){let i,n,r,o,l=[],c=[],d={periods:[],periodsToDelete:[]};const h=e.map(t=>Object.assign({},t)).sort((t,e)=>new Date(t.startDate)-new Date(e.startDate));return h&&(h.forEach(e=>{this.isPeriodInclude(t,e)&&t.state===e.state&&console.log("test includes : ",e,t),this.isPeriodInclude(e,t)?l.push(e):this.isLftInter(e,t)?(i=this.addDayToDate(new Date(this.getDateTime(t.startDate,!0)),-1,!0),i=this.getDateTime(this.dateToFormat(i,"en"),!0),e.endDate=this.dateToUtc(new Date(i+"T23:59:59")),c.push(Object.assign({},e))):this.isRgtInter(e,t)&&(n=this.addDayToDate(new Date(this.getDateTime(t.endDate,!0)),1,!0),n=this.getDateTime(this.dateToFormat(n,"en"),!0),e.startDate=Object(s.e)(new Date(n+"T00:00:00")),c.push(Object.assign({},e)))}),d={periods:[...c],periodsToDelete:l},h.some(e=>this.isPeriodInclude(t,e)&&t.state===e.state)||(r=new Date(t.startDate).getMonth()+1,o=new Date(t.startDate).getFullYear(),a[o]&&a[o][r.toString()]&&a[o][r.toString()].some(e=>this.isDateBetWeen(e.start_date,t.startDate,t.endDate)&&this.isDateBetWeen(e.end_date,t.startDate,t.endDate))&&d.periods.push(t))),d},dbPeriodsHandler:function(t,e,a){let s=[],i={},n=this.periodsModelToTags(!0,this.session);const r=n.filter(t=>!this.dbPeriods.some(e=>this.isSamePeriod(t,e))&&t.state!==this.statesValues.notvalidated).find(e=>this.isSamePeriod(e,t));r&&n&&this.dbPeriods&&(i=this.checkPeriodInters(r,this.dbPeriods,e),i&&(i.periodsToDelete.forEach(t=>s.push(t.id)),this.deletePeriods(s,()=>{this.dbPeriods=this.dbPeriods.filter(t=>!s.some(e=>e===t.id)),this.postPeriods({periods:i.periods},t=>{t&&(this.dbPeriods=[...this.dbPeriods,...t])})}))),a&&a()},isPeriodInPeriod:function(t,e,a){let s,i=!1;return t&&e&&(s=this.periodToDate(t),i=this.dateBetweenPeriod(s.start,e)&&this.dateBetweenPeriod(s.end,e)&&(!this.isSameDateTime(s.start,e.startXaxis)&&!this.isSameDateTime(s.end,e.endXaxis)||a)),i},dateToPeriod:function(t,e,a,s){let i,n,r,o,l={};return t&&s&&e&&(l={startDate:t,endDate:t},i=this.getDateTime(this.dateToFormat(t,"en"),!0),n=s.find(t=>this.isDateBetWeen(i,t.startDate,t.endDate,!0)),this.isDateBetWeen(i,a.startDate,a.endDate)?l.state="workperiod":n?l.state=n.state.replace(" ","").trim():(o=new Date(i).getMonth()+1,r=new Date(i).getFullYear(),e&&e[r]&&e[r][o]&&e[r][o].some(t=>this.isDateBetWeen(i,t.startDate,t.endDate))?l.state="notvalidated":l.state="datanotavailable")),l},getTagByPeriods:function(t,e,a){let s,i=null;return t&&e&&(s=t.state.replace(" ","").toLowerCase(),i={name:this.translateTagName(s,a),color:this.getStateColor(s),start:new Date(this.getDateTime(t.date,!0)+"T00:00:00"),end:new Date(this.getDateTime(e.date,!0)+"T23:59:59")}),i},groupingFlags:function(t){let e,a,s,i,n={};return t&&t.forEach(t=>{e=new Date(t.start_date).getMonth()+1,a=new Date(t.end_date).getMonth()+1,s=new Date(t.start_date).getFullYear(),i=new Date(t.end_date).getFullYear(),void 0===n[s]&&(n[s]={}),void 0===n[i]&&(n[i]={}),void 0===n[s][e]&&(n[s][e]=[]),void 0===n[i][a]&&(n[i][a]=[]),s!==i?(n[s][e].push(t),n[i][a].push(t)):n[s][e].push(t)}),n},isDateInclude(t,e){let a=!1;return e&&(a=this.isDateBetWeen(this.getDateTime(this.dateToFormat(t,"en"),!0),this.getDateTime(e.startDate,!0),this.getDateTime(e.endDate,!0))),a},isLastDay:function(t,e,a,s,i,n,r,o){return e===t.length-1&&s===a.length-1&&n===i.length-1&&r&&null===o},isValidatedDay:function(t,e){let a=!1;return t&&e&&(a=e.state===this.statesValues.alreadyvalidated&&this.isDateBetWeen(t,e.startDate,e.endDate)),a},isWorkDay:function(t){let e=!1;return this.session&&this.session.workPeriod&&t&&(e=this.isDateBetWeen(t,this.session.workPeriod.startDate,this.session.workPeriod.endDate)),e},isNotValidatedDay:function(t,e){let a=!1;const{month:s,year:i}=this.getDateFrag(t);return t&&s&&i&&e&&(a=e[i]&&e[i][Number(s)]&&e[i][Number(s)].some(e=>this.isDateBetWeen(t,e.startDate,e.endDate))),a},isPartiallycontrolled:function(t,e,a){let s=!1;const{month:i,year:n}=this.getDateFrag(t),r=Number(i);return void 0!==r&&n&&e&&e[n]&&e[n][r]&&(s=e[n][r].some(e=>{let s,i;const n=this.getDateTime(e.start_date,!0),r=this.getDateTime(e.end_date,!0);return a&&(s=this.getDateTime(a.startDate,!0),i=this.getDateTime(a.endDate,!0)),this.isDateBetWeen(t,n,r)||this.isDateBetWeen(t,s,i)})),s},getDayState:function(t,e,a,s,i){let n={value:t<9?"0"+(t+1):t+1,label:this.dateToFormat(e,"en")};const r=this.getDateTime(this.dateToFormat(e,"en"),!0),o=a.find(t=>this.isDateBetWeen(r,t.startDate,t.endDate));return this.isValidatedDay(r,o)?n.state=this.stateColor.alreadyvalidatedcolor:this.isWorkDay(r)?n.state=this.stateColor.workperiodcolor:this.isPartiallycontrolled(r,i,o)?n.state=this.stateColor.partiallycontrolledcolor:this.isNotValidatedDay(r,s)?n.state=this.stateColor.notvalidatedcolor:n.state=this.stateColor.datanotavailablecolor,n},getMothDays:function({start:t,end:e},a,s,i,n){let r,o=[];const l=new Date(t+"T00:00:00"),c=new Date(e+"T23:59:59");let d=this.numberOfDay(l,c);if(d&&a){n&&(d+=1);for(let t=0;t<d;t++)r=this.addDayToDate(l,t,!0),o.push(this.getDayState(t,r,a,s,i))}return o},setPeriodsModel:function(t,e,a,s,i,n){const r=this.getDateTime(this.dateToFormat(t,"en"),!0),o=this.getDateTime(this.dateToFormat(e,"en"),!0),l=this.getMothDays({start:r,end:o},i,a.years,this.groupingFlags(n),!0);this.periodsModel={},l&&l.forEach(t=>{const{month:e,year:a}=this.getDateFrag(t.label);void 0===this.periodsModel[a]&&(this.periodsModel[a]={}),void 0===this.periodsModel[a][Number(e)]&&(this.periodsModel[a][Number(e)]=[]),this.periodsModel[a][Number(e)].push({state:this.states[t.state],date:t.label})})},getdbPeriodByPeriods:function(t,e,a){let s=null;const i=a.parametersToValidate[0],n=i.instrumentId;let r=t.state.replace(" ","").toLowerCase();return r="workperiod"===r?"partiallycontrolled":r,t&&e&&i&&r&&"datanotavailable"!==r&&(s={parameterName:i.name,instrumentId:n,state:this.statesValues[r],startDate:this.dateToUtc(new Date(this.getDateTime(t.date,!0)+"T00:00:00")),endDate:this.dateToUtc(new Date(this.getDateTime(e.date,!0)+"T23:59:59"))}),s},periodsModelToTags:function(t,e,a){let s,i,n,r=[],o=[],l=null,c=null;const d=Object.keys(this.periodsModel);return d.forEach((h,u)=>{i=Object.keys(this.periodsModel[h]),i.forEach((m,p)=>{n=this.periodsModel[h][m],n.forEach((h,m)=>{null===l&&(l=h),o.push(h),l.state!==h.state?(o.splice(-1),c=0<o.length?o[o.length-1]:l,s=t?this.getdbPeriodByPeriods(l,c,e):this.getTagByPeriods(l,c,a),s&&r.push(s),l=h,c=null,o=[]):this.isLastDay(d,u,i,p,n,m,l,c)&&(c=o[o.length-1],s=t?this.getdbPeriodByPeriods(l,c,e):this.getTagByPeriods(l,c,a),s&&r.push(s))})})}),r}}}},282:function(t,e,a){"use strict";a(281),a(113);var s=a(54),i=a.n(s),n=a(291);i.a.interceptors.request.use(async t=>{const e=await Object(n.a)();return e&&(t.headers.common.Accept="application/json",t.headers.common.Authorization="Bearer "+e),t});var r=(t,e)=>i.a.post(t,e),o=t=>i.a.get(t,{responseType:t.includes("format")?"blob":"application/json",transformResponse:[function(t,e){const a=e["content-type"];return"application/json"===a?JSON.parse(t):{type:a,data:t}}]}),l=(t,e)=>i.a.put(t,e),c=t=>i.a.delete(t);e.a={data:()=>({callBack:null,callBacks:[],currentUrl:"",requestData:{},typeOfRequest:""}),methods:{getData:async function(t,e,a){const s=a||"https://aeris-recette.ipsl.fr/actris-validation/api"+t;s&&await o(s).then(t=>{t&&e&&e(t.data)}).catch(t=>{e&&e(t)}).finally(()=>this.loading=!1)},postData:async function(t,e,a){const s="https://aeris-recette.ipsl.fr/actris-validation/api"+t;await r(s,e).then(t=>{a&&a(t.data)}).catch(t=>{a&&a(t)}).finally(()=>this.loading=!1)},putData:async function(t,e,a){const s="https://aeris-recette.ipsl.fr/actris-validation/api"+t;await l(s,e).then(t=>{a&&a(t.data)}).catch(t=>{a&&a(t)}).finally(()=>this.loading=!1)},deleteData:async function(t,e){const a="https://aeris-recette.ipsl.fr/actris-validation/api"+t;await c(a).then(t=>{e&&e(t.data)}).catch(t=>{e&&e(t)}).finally(()=>this.loading=!1)},getInstrumentByName:function(t,e){const a="/instrument?name="+t;this.getData(a,t=>{e(t)})},getInstrumentById:function(t,e){const a="/instrument?id="+t;this.getData(a,t=>{e(t)})},getInstruments:function(t){this.getData("/instruments",e=>{t(e)})},updateInstrument:function(t,e){this.putData("/instruments",t,e)},getExternalRessources:function(t,e){t?this.getData("/instruments?url="+t,t=>{e(t)}):e([])},createPeriod:function(t,e){t&&this.postData("/periods",t,t=>{e&&e(t)})},deletePeriods:function(t,e){t&&0<t.length?this.deleteData("/periods?ids="+t,t=>{e&&e(t)}):e&&e()},postPeriods:function(t,e){t&&0<t.periods.length?this.postData("/periods/list",t,t=>{e&&e(t)}):e&&e()},updatePeriod:function(t,e){t&&this.putData("/periods/"+t.id,t,t=>{e&&e(t)})},deletePeriod:function(t,e){this.deleteData("/periods?id="+t.id,t=>{e&&e(t)})},getParameterPeriods:function(t,e,a,s,i){let n="/periods?instrumentId="+t+"&parameterName="+e;n+="&start_time="+this.dateToUtc(a)+"&end_time="+this.dateToUtc(s),this.getData(n,t=>{i(t)})},isAvailabilityResponse:function(t){const e=["product_sid","start_date","end_date","availability"],a=Object.keys(t);return a&&!a.some(t=>!e.some(e=>t===e))},getProductAvailablePeriods:function(t,e,a,s){const{rootUrl:i,uuid:n}=t,r=i+"/availability/"+n+"?"+(e&&a?"start_time="+this.dateToUtc(e)+"&end_time="+this.dateToUtc(a):""),o={product_sid:n,start_date:this.dateToUtc(e),end_date:this.dateToUtc(a),availability:{date:[],value:[]}};i&&n?this.getData(null,t=>{let e=this.isAvailabilityResponse(t)?t:o;s&&s(e)},r):s&&s(o)},donwloadFile:function(t,e){let a="/periods?format="+t;this.getData(a,t=>{let a,s;const i=""+ +new Date;t.type&&t.data&&(a=new Blob([t.data],{type:t.type}),s=document.createElement("a"),s.href=URL.createObjectURL(a),s.download=i,s.click(),URL.revokeObjectURL(s.href)),e(t)})},getSessionFlagsByPeriod:function(t,e,a,s){const i=a.parametersToValidate[0],n=i.instrumentId,r=i.name;this.getInstrumentById(n,i=>{"Heatmap"===i.type?this.getChartModelByPeriod(t,e,a,t=>{s&&s({instrument:i,chartModel:t})}):this.getFlags(n,r,null,t,e,t=>{s&&s({instrument:i,flags:t})},!0)})},existSession:function(t,e,a){this.getData("/sessions/exist?instrument_id="+t+"&parameter="+e,t=>{a&&a(t)})},getSessionById:function(t,e){this.getData("/sessions?id="+t,t=>{e&&e(t)})},getSessions:function(t){this.getData("/sessions",e=>{t&&t(e)})},getSessionFlags:function(t,e){const a=t.workPeriod,s=t.parametersToValidate[0],i=s.instrumentId,n=s.name;this.getInstrumentById(i,s=>{"Heatmap"===s.type?this.getChartModel(t,t=>{e&&e({instrument:s,chartModel:t})}):this.getFlags(i,n,null,a.startDate,a.endDate,t=>{e&&e({instrument:s,flags:t})},!0)})},createNewSession:function(t){let e;this.getThemes(a=>{this.postData("/sessions",t,t=>{t&&this.getSessionFlags(t,s=>{e=t.charts[0],e.flags=s.flags,this.dialog=!1,this.newSession(t,a)})})})},switchTablecurrentPage:function(t,e,a,s){let i;t&&e&&a&&(i="/sessions?page="+t+"&size="+e+"&user_email="+a.email,this.getData(i,t=>{s&&s(t)}))},continueSession:function(t){let e=t.charts[0];t.lock=!0,this.updateSession(t,()=>{this.getThemes(a=>{"Heatmap"===t.instrument.type?this.getChartModel(t,s=>{e.chartModel=s,this.dialog=!1,this.newSession(t,a)}):this.getSessionFlags(t,s=>{e.flags=s.flags,this.$store.commit("updateSessionFlags",s.flags),this.dialog=!1,this.newSession(t,a)})})})},getProducts:function(t){this.getData("/products",e=>{t(e)})},getProductData:function(t,e,a,s){let i,n,r;const{startDate:o,endDate:l}=e,c=null!==a?"/"+a:"";o&&l&&(i=this.dateToUtc(o),n=this.dateToUtc(l),r=t+"/"+i+"/"+n+c,this.getData(r,t=>{this.productsData=t,s(t)}))},getParametersUri:function(t,e){let a="";t&&t.forEach((e,s)=>{a+="params="+e.name,s<t.length-1&&(a+="&")}),e&&e(encodeURI(a))},getLocalParametersData:function(t,e,a){this.getData("/parameters/"+t+"/"+e,t=>{a(t)})},getExternalParametersData:function(t,e,a,s,i,n,r){let o,l;e&&a&&(o="start_time="+s+"&end_time="+i,o+="PointSeries"===a.type?"&"+n:"",l=t+e+"/"+a.uuid+"?"+o,this.getData(null,r,l))},getParametersSortByInstrumentId:function(t){let e={};return t&&t.forEach(t=>{void 0===e[t.instrumentId]?e[t.instrumentId]=[t]:e[t.instrumentId].push(t)}),e},standaloneParameters:function(t,e,a,s){let i,n,r,o;e&&a&&(i=this.dateToUtc(a.startDate),n=this.dateToUtc(a.endDate),this.getParametersUri(e,t=>{r="start_time="+i+"&end_time="+n,o=e[0].url+"?"+r,o+="PointSeries"===e[0].type?"&"+t:"",this.getData(null,t=>{t&&s&&s([t])},o)}))},getDatas:function(t,e,a,s,i,n){let r,o,l,c;const{workPeriod:d,id:h}=e;a.length<=t&&n&&n(i),r=a[t],r&&"undefined"!==r?this.getInstrumentById(r,u=>{const{rootUrl:m}=u;o=s[r],h&&o&&u&&m&&d&&(l=this.dateToUtc(d.startDate),c=this.dateToUtc(d.endDate),this.getParametersUri(o,r=>{m.includes("localhost")?this.getLocalParametersData(u.id,r,r=>{this.getDatas(t+1,e,a,s,[...i,r],n)}):this.getExternalParametersData(m,o[0].path,u,l,c,r,r=>{this.getDatas(t+1,e,a,s,[...i,r],n)})}))}):e&&d&&this.standaloneParameters(e,s[r],d,n)},getParametersData:function(t,e,a){let s,i=this.getParametersSortByInstrumentId(e);i&&(s=Object.keys(i),this.getDatas(0,t,s,i,[],a))},getParameterData:function(t,e,a,s,i){const n=this.dateToUtc(a),r=this.dateToUtc(s),o=e.instrumentId?e.instrumentId:e[0].instrumentId;this.getInstrumentById(o,t=>{const{rootUrl:a}=t;a&&n&&r&&this.getParametersUri(e,s=>{s&&(a.includes("localhost")?this.getLocalParametersData(t.id,s,i,n,r):this.getExternalParametersData(a,e[0].path,t,n,r,s,i))})})},postFlags:function(t,e){this.postData("/flags/list",t,t=>{e&&e(t)})},getAvailableFlags:function(t){this.getData("/availableFlags",e=>{t(e)})},getFlags:function(t,e,a,s,i,n,r){let o,l,c;(this.isMainChart||r)&&(o=this.dateToUtc(s),l=this.dateToUtc(i),c="/flags?instrumentId="+t+"&parameterName="+e,c=a?c+"&state="+a:c,c+="&start_time="+o+"&end_time="+l,this.getData(c,t=>{n(t)}))},downloadFlagsCsv:function(t,e,a,s,i){let n,r,o;n=this.dateToUtc(a),r=this.dateToUtc(s),o="/flags/csv?instrumentId="+t+"&parameterName="+e,o+="&start_time="+n+"&end_time="+r,this.getData(o,t=>{i(t)})},postFlag:function(t,e){this.postData("/flags/single",t,t=>{e&&e(t)})},putFlag:function(t,e){this.putData("/flags/"+t.id,t,t=>{e&&e(t)})},deleteDbFlags:function(t,e){this.deleteData("/flags?ids="+t,t=>{e&&e(t)})},flushDeleteFlag:function(t,e,a){this.deleteData("/flags/"+t,t=>{e&&this.bindChartListener(),a&&a(t)})},getDefaultParametersData:function(t,e,a,s){let i,n="";a&&(a.forEach(t=>{i=t.parameters,i&&i.forEach((t,e)=>{""!==n&&(n+="&"),n+="params="+t.name,e<i.length-1&&(n+="&")})}),this.getProductData(t,e,n,t=>{s&&s(t)}))},updateSession:function(t,e){t&&this.putData("/sessions/"+t.id,t,t=>{t&&e&&e(t)})},notifyDeleteSession:function(t,e){this.deleteData("/sessions/"+t.id,t=>{e&&e(t)})},createColor:function(t,e){t&&this.postData("/color",t,t=>{e&&e(t)})},updateColor:function(t,e){t&&this.putData("/color",t,t=>{e&&e(t)})},getColors:function(t){this.getData("/color",e=>{t(e)})},deleteColor:function(t,e){this.deleteData("/color/"+t,t=>{e&&e(t)})},createColors:function(t,e){t&&this.postData("/colors",t,t=>{e&&e(t)})},getThemes:function(t){this.getData("/theme",e=>{t(e)})},addChartModel:function(t,e){t&&this.postData("/chartmodel",t,t=>{e&&e(t)})},getChartModelByPeriod:function(t,e,a,s){const i=a.parametersToValidate[0],n=i.instrumentId;let r="?parameterToValidate="+i.name+"&instrumentId="+n;r+="&start_time="+t+"&end_time="+e,this.getData("/chartmodel"+r,t=>{s(t)})},getChartModel:function(t,e){const a=t.workPeriod;let s=this.dateToUtc(a.startDate),i=this.dateToUtc(a.endDate);this.getChartModelByPeriod(s,i,t,e)},getModelByPeriod:function(t,e,a,s,i){let n=this.dateToUtc(a),r=this.dateToUtc(s),o="?parameterToValidate="+t.name+"&instrumentId="+e;o+="&start_time="+n+"&end_time="+r,this.getData("/chartmodel"+o,t=>{i(t)})},updateChartModel:function(t,e){t&&this.putData("/chartmodel",t,t=>{t&&e&&e(t)})},deleteModelProfiles:function(t,e,a){this.deleteData("/chartmodel?ids="+t+"&flagId="+e,t=>{a&&a(t)})}}}},283:function(t,e,a){"use strict";var s=a(287),i={name:"aeris-datavalidation-deletedialog",props:{dialog:{type:Boolean,default:()=>!1},title:{type:String,default:()=>"Dialog title"},message:{type:String,default:()=>"Dialog message"},ok:{type:String,default:()=>"OK"},hideOkButton:{type:Boolean,default:()=>!1},cancel:{type:String,default:()=>"cancel"},okCallBack:{type:Function,default:()=>{}},cancelCallBack:{type:Function,default:()=>{}}},watch:{dialog:function(){this.dialogState=this.dialog}},components:{AerisDatavalidationTypography:s.a},data:()=>({theme:null,dialogState:!1})},n=a(18),r=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.dialogState,callback:function(e){t.dialogState=e},expression:"dialogState"}},[e("v-card",[e("v-alert",{attrs:{type:"warning","data-cy":"deletedialog-title"}},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),e("v-card-text",{staticClass:"d-flex justify-center"},[e("AerisDatavalidationTypography",{attrs:{text:t.message,"data-cy":"deletedialog-message",type:"h6"}})],1),t._v(" "),e("v-card-actions",{staticClass:"d-flex justify-center"},[t.hideOkButton?t._e():e("v-btn",{attrs:{color:"green darken-1",text:"","data-cy":"deletedialogok-button"},on:{click:t.okCallBack}},[t._v("\n          "+t._s(t.ok)+"\n        ")]),t._v(" "),e("v-btn",{attrs:{color:"green darken-1",text:"","data-cy":"deletedialogcancel-button"},on:{click:t.cancelCallBack}},[t._v("\n          "+t._s(t.cancel)+"\n        ")])],1)],1)],1)}),[],!1,null,"314adf30",null);e.a=r.exports},285:function(t,e,a){"use strict";a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return o})),a.d(e,"k",(function(){return h})),a.d(e,"l",(function(){return b})),a.d(e,"c",(function(){return i})),a.d(e,"i",(function(){return d})),a.d(e,"a",(function(){return n})),a.d(e,"e",(function(){return p})),a.d(e,"d",(function(){return g})),a.d(e,"m",(function(){return v})),a.d(e,"j",(function(){return l})),a.d(e,"g",(function(){return f})),a.d(e,"h",(function(){return c}));a(281);var s=a(279);function i(t,e){let a=t,s=null;return t&&(e&&(s=e.flags.find(e=>h(e,t,!0)||e.ids===t.ids)),a={startXaxis:t.x0?t.x0:t.startXaxis?t.startXaxis:t.startDate,endXaxis:t.x1?t.x1:t.endXaxis?t.endXaxis:t.endDate,startYaxis:void 0!==t.y0?t.y0:void 0!==t.startYaxis?t.startYaxis:null,endYaxis:void 0!==t.y1?t.y1:void 0!==t.endYaxis?t.endYaxis:null,id:s?s.id:t.id?t.id:null,editable:s?s.editable:t.editable?t.editable:null,instrumentId:s?s.instrumentId:t.instrumentId?t.instrumentId:null,availableFlags:s?s.availableFlags:t.availableFlags,creationDate:s?s.creationDate:t.creationDate?t.creationDate:null,description:s?s.description:t.description?t.description:null,minIndex:t.minIndex,maxIndex:t.maxIndex,minYIndex:t.minYIndex,maxYIndex:t.maxYIndex,x:t.x,y:t.y,z:t.z}),a}function n(t,e,a,i){let n={};const r=Object(s.n)(t,e)?e:t,o=Object(s.n)(t,e)?t:e;return r&&o&&void 0!==a&&void 0!==i&&(n={startXaxis:r,endXaxis:o,startYaxis:a,endYaxis:i}),n}function r(t,e){let a=!1;const n=i(t),r=i(e),o=t?t.availableFlags:null,l=e?e.availableFlags:null,c=!o||!l||o[0].color===l[0].color;return n&&r&&(a=Object(s.o)(n.startXaxis,r.startXaxis)&&Object(s.o)(n.endXaxis,r.endXaxis)&&c&&n.startYaxis===r.startYaxis&&n.endYaxis===r.endYaxis),a}function o(t,e,a){let s=!1;return t&&e&&(s=t.some(t=>r(t,e)||a&&function(t,e){let a=!1;return t&&e&&t.x&&t.y&&(a=!t.x.some((t,a)=>t!==e.x[a])&&!t.y.some((t,a)=>t!==e.y[a])),a}(t,e))),s}function l(t,e){let a=!1;return t&&e&&(a=t.some(t=>function(t,e){let a=!1;const n=i(t);return e&&n&&(a=Object(s.m)(e.startXaxis,n.startXaxis,n.endXaxis)&&Object(s.m)(e.endXaxis,n.startXaxis,n.endXaxis)&&n.startYaxis<=e.startYaxis&&e.endYaxis<=n.endYaxis),a}(t,e))||function(t,e){let a,n=!1;return e&&(n=t.some(t=>(a=i(t),Object(s.m)(e.startXaxis,a.startXaxis,a.endXaxis)))&&t.some(t=>(a=i(t),Object(s.m)(e.endXaxis,a.startXaxis,a.endXaxis)))),n}(t,e)),a}function c(t,e){let a=!1;const s=i(e);return t&&e&&(a=this.isDateBetWeen(t,s.startXaxis,s.endXaxis)),a}function d(t,e,a){let s,n,r=!1;return t&&e&&(s=i(t),n=i(e),r=this.isPeriodInPeriod(s,n,!0)&&(a||n.startYaxis<=s.startYaxis&&n.endXaxis&&n.startYaxis<=s.endYaxis&&n.endXaxis)),r}function h(t,e,a){let n=!1;const r=i(t),o=i(e),l=t?t.availableFlags:null,c=e?e.availableFlags:null,d=!l||!c||l[0].color===c[0].color;return t&&e&&(n=Object(s.o)(r.startXaxis,o.startXaxis)&&Object(s.o)(r.endXaxis,o.endXaxis)&&r.startYaxis===o.startYaxis&&r.endYaxis===o.endYaxis&&(d||a)),n}function u(t,e){let a=null;return t&&e&&(a=t.find(t=>r(t,e))),a}function m(t,e){let a=!1;const{startXaxis:i,endXaxis:n}=e;return t&&i&&n&&(a=Object(s.m)(t.x0,i,n)&&Object(s.m)(t.x1,i,n)),a}function p(t,e,a){let s=[];return t&&e&&(s=t.filter(t=>a?!m(t,e):m(t,e))),s}function g(t,e){let a=[];return t&&e&&(a=t.filter(t=>!e.some(e=>function(t,e){let a,n,r=!1;return t&&e&&(a=i(t),n=i(e),r=Object(s.o)(a.startXaxis,n.startXaxis)&&Object(s.o)(a.endXaxis,n.endXaxis)&&a.startYaxis===n.startYaxis&&a.endYaxis===n.endYaxis),r}(t,e)))),a}function f(t,e){let a=-1;return t&&e&&(a=t.findIndex(t=>r(t,e))),a}function v(t){let e,a,s=t,n=Object.assign([],t);return n&&(s=n.sort((function(t,s){return e=i(t),a=i(s),new Date(a.startXaxis)-new Date(e.startXaxis)}))),s.reverse()}function b(t){let e=null;return t&&(e={startXaxis:Object(s.i)(t.startDate),endXaxis:Object(s.i)(t.endDate),startYaxis:Object(s.l)(t.startDate),endYaxis:Object(s.l)(t.endDate)}),e}},286:function(t,e,a){"use strict";var s={name:"aeris-datavalidation-webcomponentwrapper",props:{webcomponent:{type:Boolean,default:!1}}},i=a(18),n=Object(i.a)(s,(function(){var t=this._self._c;return this.webcomponent?t("div",{attrs:{id:"app"}},[t("v-app",{attrs:{id:"inspire"}},[this._t("default")],2)],1):t("div",[this._t("default")],2)}),[],!1,null,null,null);e.a=n.exports},287:function(t,e,a){"use strict";var s={name:"aeris-datavalidation-typography",props:{margin:{type:String,default:()=>"2.125rem"},text:{type:String,default:()=>"Heading 4"},type:{type:String,default:()=>"h4"}}},i=a(18),n=Object(i.a)(s,(function(){var t=this._self._c;return t("v-item-group",{attrs:{mandatory:""}},[t("v-sheet",{attrs:{tile:""}},[t("v-item",[t("div",{staticClass:"transition-swing",class:["text-"+this.type,"mb-"+this.margin],domProps:{textContent:this._s(this.text)}})])],1)],1)}),[],!1,null,"5be77cac",null);e.a=n.exports},288:function(t,e,a){"use strict";var s=a(279),i={name:"aeris-datavalidation-datemounthpicker",props:{session:{type:Object,default:null},disabled:{type:Boolean,default:()=>!1},dateLabel:{type:String,default:"Date"},setCurrentDate:{type:Function},currentDate:{type:Object,default:()=>({})},minDate:{type:String,default:()=>""},maxDate:{type:String,default:()=>""},getProductAvailablePeriods:{type:Function,default:()=>{}}},data:()=>({date:"",menu:!1,pickerDate:null,availablePeriods:{}}),computed:{computedDateFormatted(){return this.getDateFormat(this.date,"fr")}},watch:{pickerDate:function(t){t&&this.setAvailability(t+"-01")},date(t){this.setCurrentDate(t)},currentDate:{handler:function(t){this.date=t.date},immediate:!0}},methods:{dateToUtc:s.e,getDateFrag:s.h,getDateFormat:s.g,isSameDateTime:s.o,allowedDates:function(t){let e,a,s=!1;return this.availablePeriods&&this.availablePeriods.availability&&(e=this.availablePeriods.availability.date,a=this.availablePeriods.availability.value,s=e&&a&&t&&e.some((e,s)=>e===t&&a[s])),s},setAvailability:function(t){let e,a;const{firstDate:s,lastDate:i}=this.getDateFrag(t);s&&i&&(e=this.dateToUtc(s),a=this.dateToUtc(i),this.getProductAvailablePeriods(this.session.instrument,e,a,t=>{this.availablePeriods=t}))}}},n=a(18),r=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"290px",disabled:t.disabled},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-text-field",t._g(t._b({attrs:{label:t.dateLabel,"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.computedDateFormatted,callback:function(e){t.computedDateFormatted=e},expression:"computedDateFormatted"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-date-picker",{attrs:{"no-title":"",scrollable:"",value:t.currentDate,"picker-date":t.pickerDate,"allowed-dates":t.allowedDates,max:t.maxDate,min:t.minDate},on:{input:function(e){return t.$refs.menu.save(t.date)},"update:pickerDate":function(e){t.pickerDate=e},"update:picker-date":function(e){t.pickerDate=e}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)}),[],!1,null,"4dabc00b",null);e.a=r.exports},290:function(t,e,a){"use strict";var s={name:"aeris-datavalidation-select",props:{session:{type:Object,default:null},flag_message:{type:String,default:"Flags"},defaultFlagDescription:{type:String,default:()=>""},setFlagsSelected:{type:Function},qualityFlags:{type:Array,default:()=>[]},name:{type:String,default:""},itemText:{type:String,default:"name"},defaultQualityFlags:{type:Array,default:()=>[]},disabledSelect:{type:Boolean,default:()=>!1}},watch:{value(t){t.description=this.flagDescription,this.setFlagsSelected([t])},flagDescription(t){this.value.description=t,this.setFlagsSelected([this.value])},qualityFlags:function(t){this.items=t},defaultQualityFlags:{immediate:!0,handler(t){const e=t[0];e?(this.value=this.qualityFlags.find(t=>t.concatName===e.concatName),this.flagDescription=this.defaultFlagDescription):(this.$store.commit("updateSelectedFlag",null),this.value=[])}}},data:()=>({items:[],value:[],flagDescription:""}),computed:{timeSerie:function(){return this.session&&"PointSeries"===this.session.instrument.type}}},i=a(18),n=Object(i.a)(s,(function(){var t=this,e=t._self._c;return e("div",[e("v-select",{attrs:{items:t.qualityFlags,label:t.flag_message,"item-text":t.itemText,name:t.name,"return-object":"",disabled:t.disabledSelect},scopedSlots:t._u([{key:"item",fn:function(a){return[e("v-card",{staticClass:"ma-2",attrs:{"min-height":"30","min-width":"50",color:a.item.color}}),t._v(" "+t._s(a.item.concatName)+"\n      ")]}}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),t.timeSerie?e("v-text-field",{attrs:{counter:100,label:t.$t("session.label_description"),disabled:t.disabledSelect},model:{value:t.flagDescription,callback:function(e){t.flagDescription=e},expression:"flagDescription"}}):t._e()],1)}),[],!1,null,"6b14b1ad",null);e.a=n.exports},291:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var s=a(0);async function i(){return await s.default.$keycloak.updateToken(70),s.default.$keycloak.token}},292:function(t,e,a){"use strict";var s=a(280),i={name:"aeris-datavalidation-yearskeleton",props:{},data:()=>({select:null,parameterDisable:!1}),watch:{},computed:{},methods:{}},n=a(18),r=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("div",[e("v-card",{attrs:{fluid:""}},[e("v-container",t._l(5,(function(a){return e("v-row",{key:a},t._l(12,(function(t){return e("v-col",{key:t,attrs:{cols:"1"}},[e("v-skeleton-loader",{attrs:{type:"image",width:60,height:80}})],1)})),1)})),1)],1)],1)}),[],!1,null,"948efce2",null).exports,o=(a(281),a(282)),l={name:"aeris-datavalidation-yearscalendar",props:{year:{type:Object,default:()=>({})},hide:{type:Boolean,default:()=>!1},session:{type:Object,default:null},setCurrentStartDate:{type:Function,default:()=>{}},getYearsStates:{type:Function,default:()=>{}},setSkeletonLoader:{type:Function,default:()=>{}},setRenderBounds:{type:Function,default:()=>{}}},mixins:[o.a,s.a],data(){return{years:[],periods:{},currentYear:"",availablePeriods:{},monthsLabel:[this.$t("session.label_january"),this.$t("session.label_february"),this.$t("session.label_march"),this.$t("session.label_april"),this.$t("session.label_may"),this.$t("session.label_june"),this.$t("session.label_july"),this.$t("session.label_august"),this.$t("session.label_september"),this.$t("session.label_october"),this.$t("session.label_november"),this.$t("session.label_december")]}},watch:{hide:{handler:function(){this.hide||this.setYearsRender()},immediate:!0},year:{handler:function(){!this.hide&&this.year&&(this.currentYear=this.year.value,this.setYearsRender())},immediate:!0}},computed:{getCurrentYear:function(){return this.year?this.year.value:""}},methods:{getDateBounds:function(t){let e=new Date(t),a={startDate:null,endDate:null};return e&&(a={startDate:this.dateToFormat(new Date(e.getFullYear(),e.getMonth(),1).toString(),"en"),endDate:this.dateToFormat(new Date(e.getFullYear(),e.getMonth()+1,0).toString(),"en")}),a},monthCovrage:function(t,e,a,s){let i,n,r=!1;return t&&(i=this.getDateBounds(t),n=this.getMothDays({start:i.startDate,end:i.endDate},this.periods,this.availablePeriods,s,!1),n=n.filter(t=>t.state!==this.getStateColor("datanotavailable")),r=a?0!==n.length&&n.some(t=>t.state===e):0!==n.length&&!n.some(t=>t.state!==e)),r},getMonthState:function(t,e,a){let s={};return t&&s&&a&&(s={label:t,state:e,date:a}),s},getMonthsStates:function(t,e){let a,s,i={label:t,states:[]};return this.monthsLabel&&e&&this.monthsLabel.forEach((n,r)=>{a=r+1<10?"0"+(r+1):r+1,s=t+"-"+a+"-01",this.monthCovrage(s,this.stateColor.alreadyvalidatedcolor)?i.states.push(this.getMonthState(n,this.stateColor.alreadyvalidatedcolor,s)):this.monthCovrage(s,this.stateColor.workperiodcolor,!0)?i.states.push(this.getMonthState(n,this.stateColor.workperiodcolor,s)):this.monthCovrage(s,this.stateColor.partiallycontrolledcolor,!0,e)||this.monthCovrage(s,this.stateColor.alreadyvalidatedcolor,!0,e)?i.states.push(this.getMonthState(n,this.stateColor.partiallycontrolledcolor,s)):this.monthCovrage(s,this.stateColor.notvalidatedcolor,!1,e)?i.states.push(this.getMonthState(n,this.stateColor.notvalidatedcolor,s)):i.states.push(this.getMonthState(n,this.stateColor.datanotavailablecolor,s))}),i},getYearMinMax:function(t,e){let a,s,i=[],n=Number(t)-1,r=Number(t)+1;const o=Number(t),{instrument:l}=this.session,c=l?l.start_date:"1970-01-01T00:00:00Z",d=l?l.end_date:(new Date).toString();if(c&&d)for(a=Number(new Date(c).getFullYear()),s=Number(new Date(d).getFullYear()),a<=o&&o<=s&&i.push(Number(o));i.length!==e&&(r<=s||a<=n)&&(r<=s&&i.push(r),i.length!==e);)a<=n&&i.unshift(n),r++,n--;return i},setYearsRender:function(){let t,e,a,s,i=[];this.year&&(e=this.getYearMinMax(this.year.value,8),this.setSkeletonLoader(!0),0<e.length&&(a=e[0],s=e[e.length-1],this.setRenderBounds({start:a,end:s}),this.getYearsStates({startYear:a,endYear:s},(e,n)=>{const{periods:r,flags:o}=e,l=this.groupingFlags(o);if(r){this.periods=r,this.availablePeriods=n;for(let e=Number(a);e<=Number(s);e++)t=this.getMonthsStates(e,l),i.push(t);this.years=i}})),this.setSkeletonLoader(!1))}}},c=Object(n.a)(l,(function(){var t=this,e=t._self._c;return t.hide?t._e():e("v-card",{staticClass:"d-flex justify-start mb-6",attrs:{color:t.$vuetify.theme.dark?"grey darken-3":"grey lighten-4",flat:"",tile:""}},[e("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[e("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},t._l(t.years,(function(a){return e("v-col",{key:a.label,staticClass:"d-flex flex-row"},[Number(a.label)===Number(t.currentYear)?e("span",{staticClass:"pa-1 ma-1",staticStyle:{color:"red"}},[t._v("\n             "+t._s(a.label)+"\n           ")]):e("span",{staticClass:"pa-1 ma-1"},[t._v("\n             "+t._s(a.label)+"\n           ")])])})),1)],1),t._v(" "),e("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[e("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},t._l(t.years,(function(a){return e("v-col",{key:a.label,staticClass:"d-flex flex-row"},t._l(a.states,(function(a){return e("v-tooltip",{key:a.label,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("span",t._g(t._b({staticClass:"pa-1 ma-1",style:"background-color:"+a.state,on:{click:function(e){return t.setCurrentStartDate(a.date)}}},"span",i,!1),s),[t._v("\n                "+t._s(a.label)+"\n              ")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(a.label))])])})),1)})),1)],1)],1)}),[],!1,null,"87593296",null).exports,d={name:"aeris-datavalidation-monthscalendar",components:{},props:{year:{type:Object,default:()=>({})},session:{type:Object,default:null},hide:{type:Boolean,default:()=>!1},getMonthStates:{type:Function,default:()=>{}},setCurrentStartDate:{type:Function,default:()=>{}},setSkeletonLoader:{type:Function,default:()=>{}},setRenderBounds:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({months:[],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),watch:{hide:{handler:function(){this.hide||this.setMonthRender()},immediate:!0},year:{handler:function(){!this.hide&&this.year&&this.setMonthRender()},immediate:!0}},methods:{getCurrentDayState:function(t,e,a){let s={};return e&&(s={date:this.year.value+"-"+a+"-"+a,shortLabel:this.monthsShort[t-1],start:this.dateToFormat(new Date(e.getFullYear(),e.getMonth(),1).toString(),"en"),end:this.dateToFormat(new Date(e.getFullYear(),e.getMonth()+1,0).toString(),"en")}),s},setMonthRender:function(){let t,e,a,s=[];this.year&&(this.setSkeletonLoader(!0),this.setRenderBounds({start:this.year.value,end:this.year.value}),this.getMonthStates({startYear:this.year.value,endYear:this.year.value},(i,n)=>{const{periods:r,flags:o}=i,l=this.groupingFlags(o);if(r)for(let i=1;i<=12;i++)t=i<10?"0"+i:i,e=new Date(this.year.value+"-"+t+"-"+t),a=this.getCurrentDayState(i,e,t),a.days=this.getMothDays(a,r,n,l,!1),s.push(a)}),this.months=s,this.setSkeletonLoader(!1))}}},h={name:"aeris-datavalidation-yearcalendar",components:{AerisDatavalidationYearskeleton:r,AerisDatavalidationYearsCalendar:c,AerisDatavalidationMonthsCalendar:Object(n.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"1200px"}},[t.hide?t._e():e("div",{staticClass:"d-flex justify-start mb-6 overflow-x-auto",attrs:{color:t.$vuetify.theme.dark?"grey darken-3":"grey lighten-4",flat:"",tile:""}},[e("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[e("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},t._l(t.months,(function(a){return e("v-col",{key:a.date,staticClass:"d-flex flex-row"},[e("span",{staticClass:"pa-1 ma-1"},[t._v("\n                    "+t._s(a.shortLabel)+"\n              ")])])})),1)],1),t._v(" "),e("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[e("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},t._l(t.months,(function(a){return e("v-col",{key:a.date,staticClass:"d-flex flex-row"},t._l(a.days,(function(a){return e("v-tooltip",{key:a.value,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("span",t._g(t._b({staticClass:"pa-1 ma-1",style:"background-color:"+a.state,on:{click:function(e){return t.setCurrentStartDate(a.label)}}},"span",i,!1),s),[t._v("\n                "+t._s(a.value)+"\n              ")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(a.label))])])})),1)})),1)],1)],1)])}),[],!1,null,"6a3c4b2b",null).exports},props:{calendarType:{type:String,default:()=>""},session:{type:Object,default:null},webcomponent:{type:Boolean,default:!0},year:{type:Object,default:()=>({})},getPeriodsByYear:{type:Function,default:()=>{}},setStartDate:{type:Function,default:()=>{}},setType:{type:Function,default:()=>{}},setRenderBounds:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({value:"",type:"month",loading:!0,firstLoad:!0}),computed:{hideYearRender:function(){return this.calendarType&&"year"!==this.calendarType},hideYearsRender:function(){return this.calendarType&&"years"!==this.calendarType},showSkeleton:function(){return this.firstLoad}},methods:{setSkeletonLoader:function(t){this.firstLoad=t},setCurrentStartDate:function(t){const{firstDate:e,lastDate:a}=this.getDateFrag(t,!0);e&&a&&this.setRenderBounds({start:e,end:a}),this.setStartDate(t),this.setType("month")}}},u=Object(n.a)(h,(function(){var t=this,e=t._self._c;return e("div",[t.showSkeleton?e("AerisDatavalidationYearskeleton"):t._e(),t._v(" "),e("AerisDatavalidationMonthsCalendar",{attrs:{year:t.year,session:t.session,hide:t.hideYearRender,getMonthStates:t.getPeriodsByYear,setRenderBounds:t.setRenderBounds,setSkeletonLoader:t.setSkeletonLoader,setCurrentStartDate:t.setCurrentStartDate}}),t._v(" "),e("AerisDatavalidationYearsCalendar",{attrs:{year:t.year,session:t.session,hide:t.hideYearsRender,getYearsStates:t.getPeriodsByYear,setRenderBounds:t.setRenderBounds,setSkeletonLoader:t.setSkeletonLoader,setCurrentStartDate:t.setCurrentStartDate}})],1)}),[],!1,null,"c9447ce4",null);e.a=u.exports},293:function(t,e,a){"use strict";var s=a(279),i=a(282),n=a(280),r=a(302),o=a(294),l=a(295),c=a(286),d={name:"aeris-datavalidation-calendar",components:{AerisDatavalidationPeriodsFilter:o.a,AerisDatavalidationPeriodsCalendar:l.a,AerisDataValidationWebcomponentWrapper:c.a},props:{setDialogState:{type:Function,default:()=>{}},session:{type:Object,default:()=>({})},workperiod:{type:Object,default:()=>({startDate:"2012-09-11T00:00:00.000+00:00",endDate:"2012-09-13T23:59:59.000+00:00"})},webcomponent:{type:Boolean,default:!0},title:{type:String,default:()=>""},uuid:{type:String,default:()=>""},startdate:{type:String,default:()=>""},enddate:{type:String,default:()=>""},availabilityurl:{type:String,default:()=>""},periodsView:{type:Object,default:null}},mixins:[i.a,n.a,r.a],data:()=>({startDate:"",calDefaultView:null,currentSession:{},periodsFilter:null,currentEndDate:null,availablePeriods:null,currentStartDate:null,periodMenuState:!1,defaultDate:new Date,currentWorkPeriod:{startDate:"",endDate:""}}),beforeMount(){this.webcomponent&&this.initCalendarWcProps()},watch:{session:{handler:function(){this.initConf(this.session)},immediate:!0}},computed:{getCurrentDate:function(){return this.getDateTime(Date.now(),!0)}},methods:{dateToUtc:s.e,getDateTime:s.j,dateToFormat:s.d,translate(t){return this.$t(t)},initConf:function(t){let e,a=new Date;t&&t.workPeriod&&(e=t.workPeriod.startDate,""!==this.startDate?a=new Date(this.startDate+"T00:00:00Z"):e&&(a=new Date(e)),this.defaultDate=a,this.currentSession=Object.assign({},t))},setPeriodsFilter:function(t,e){this.periodsFilter={state:t,color:e}},setStartDate:function(t,e){t&&(this.startDate=this.getDateTime(t,!0),e&&(this.calDefaultView={value:"month"}))},closeDialog:function(){this.periodMenuState||this.setDialogState(!1),this.currentSession&&this.currentSession.workPeriod&&(this.defaultDate=new Date(this.currentSession.workPeriod.startDate))},notifyPeriodMenuState:function(t){void 0!==t&&(this.periodMenuState=t)},groupingDatesToPeriods:function(t){let e,a,s,i,n=[],r={};return t&&(n=t.map(t=>({startDate:t[0],endDate:t[t.length-1]})),n.forEach(t=>{e=new Date(t.startDate).getMonth()+1,a=new Date(t.endDate).getMonth()+1,s=new Date(t.startDate).getFullYear(),i=new Date(t.endDate).getFullYear(),void 0===r[s]&&(r[s]={}),void 0===r[i]&&(r[i]={}),void 0===r[s][e]&&(r[s][e]=[]),void 0===r[i][a]&&(r[i][a]=[]),s!==i?(r[s][e].push(t),r[i][a].push(t)):r[s][e].push(t)})),r},groupingDates:function(t){let e,a,s,i,n,r=[],o=[];return t&&t.availability&&(e=t.availability.date,a=t.availability.value,s=e[0],e.forEach((t,l)=>{i=new Date(t).getMonth()+1,n=new Date(s).getMonth()+1,i===n&&l!==e.length-1||(l===e.length-1&&a[l]&&r.push(t),0<r.length&&o.push(r),r=[]),a[l]&&r.push(t),s=t})),this.groupingDatesToPeriods(o)},getPeriodsProperties:function(t,e,a){const{parametersToValidate:s}=this.currentSession;let i,n,r,o;t&&e&&s&&(i=new Date(this.dateToFormat(t.date,"en")+"T00:00:00"),n=new Date(this.dateToFormat(e.date,"en")+"T23:59:59"),s[0]&&(r=s[0].instrumentId,o=s[0].name),this.currentStartDate=t,this.currentEndDate=e,a&&a(r,o,i,n))},getWCAvailablePeriods:function(t,e,a,s){let i,n;t&&e&&(i="month"===a?new Date(this.dateToFormat(t.date,"en")+"T00:00:00"):new Date(t+"T00:00:00"),n="month"===a?new Date(this.dateToFormat(e.date,"en")+"T23:59:59"):new Date(e+"-12-31"+"T23:59:59"),this.getProductAvailablePeriods(this.currentSession.instrument,this.dateToUtc(i),this.dateToUtc(n),t=>{this.availablePeriods=t,this.availablePeriods.years=this.groupingDates(t),s&&("month"===a?s(i,n,{periods:[],flags:[]},this.availablePeriods):s({periods:[],flags:[]},this.availablePeriods.years))}))},getPeriods({start:t,end:e},a){this.webcomponent?a&&this.getWCAvailablePeriods(t,e,"month",a):this.getPeriodsProperties(t,e,(t,e,s,i)=>{this.currentSession&&this.currentSession.instrument&&this.getProductAvailablePeriods(this.currentSession.instrument,this.dateToUtc(s),this.dateToUtc(i),n=>{this.getParameterPeriods(t,e,this.dateToUtc(s),this.dateToUtc(i),t=>{this.availablePeriods=n,this.availablePeriods.years=this.groupingDates(n),a&&a(s,i,t,this.availablePeriods)})})})},getYearProperties:function(t,e,a){let s,i,n,r;const{parametersToValidate:o}=this.currentSession;t&&e&&o&&(n=o[0].instrumentId,r=o[0].name,s=new Date(t+"T00:00:00"),i=new Date(e+"-12-31"+"T23:59:59"),a&&a(n,r,s,i))},getPeriodsByYear({startYear:t,endYear:e},a){!this.webcomponent&&t&&e?this.getYearProperties(t,e,(t,e,s,i)=>{this.getProductAvailablePeriods(this.currentSession.instrument,s,i,n=>{this.getParameterPeriods(t,e,s,i,t=>{this.availablePeriods=n,this.availablePeriods.years=this.groupingDates(n),a&&a(t,this.availablePeriods.years)})})}):a&&this.getWCAvailablePeriods(t,e,"years",a)}}},h=a(18),u=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("AerisDataValidationWebcomponentWrapper",{attrs:{webcomponent:t.webcomponent}},[e("v-card",{staticClass:"d-flex flex-row"},[e("AerisDatavalidationPeriodsFilter",{attrs:{session:t.currentSession,defaultDate:t.defaultDate,webcomponent:t.webcomponent,getFlags:t.getFlags,setStartDate:t.setStartDate,notifyCancelPopUp:t.closeDialog,downloadFlagsCsv:t.downloadFlagsCsv,getModelByPeriod:t.getModelByPeriod,setPeriodsFilter:t.setPeriodsFilter,getProductAvailablePeriods:t.getProductAvailablePeriods}}),t._v(" "),e("AerisDatavalidationPeriodsCalendar",{attrs:{title:t.title,model:t.periodsModel,startDate:t.startDate,session:t.currentSession,webcomponent:t.webcomponent,defaultDate:t.defaultDate,periodsFilter:t.periodsFilter,calDefaultView:t.calDefaultView,getPeriods:t.getPeriods,postPeriods:t.postPeriods,setStartDate:t.setStartDate,updatePeriod:t.updatePeriod,createPeriod:t.createPeriod,updateSession:t.updateSession,deletePeriods:t.deletePeriods,getPeriodsByYear:t.getPeriodsByYear,notifyPeriodMenuState:t.notifyPeriodMenuState,getProductAvailablePeriods:t.getProductAvailablePeriods}})],1)],1)}),[],!1,null,"996fbd40",null);e.a=u.exports},294:function(t,e,a){"use strict";var s=a(280),i=a(296),n={name:"aeris-datavalidation-periodsfilter",components:{AerisDatavalidationPeriodsPicker:a(298).a,AerisDatavalidationPeriodsFilterToolbar:i.a},props:{session:{type:Object,default:null},webcomponent:{type:Boolean,default:!0},setPeriodsFilter:{type:Function,default:()=>{}},notifyCancelPopUp:{type:Function,default:()=>{}},setStartDate:{type:Function,default:()=>{}},defaultDate:{type:Date,default:()=>{}},getFlags:{type:Function,default:()=>{}},downloadFlagsCsv:{type:Function,default:()=>{}},getModelByPeriod:{type:Function,default:()=>{}},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[s.a],data(){return{workPeriod:!0,notValidated:!0,alreadyValidated:!0,dataNotAvailable:!0,partiallyControlled:!0,checkboxStates:[{label:this.$t("session.label_alreadyValidated"),icon:"mdi-eye-check-outline",color:"#4CAF50"},{label:this.$t("session.label_partiallyControlled"),icon:"mdi-eye-outline",color:"#FFC107"},{label:this.$t("session.label_notValidated"),icon:"mdi-eye-remove",color:"#FF5252"},{label:this.$t("session.label_dataNotAvailable"),icon:"mdi-eye-remove",color:"#B0BEC5"},{label:this.$t("session.label_workPeriod"),icon:"mdi-timeline-clock",color:"#1976D2"}]}},watch:{alreadyValidated:function(){this.setPeriodsFilter(this.alreadyValidated,this.alreadyValidatedColor)},notValidated:function(){this.setPeriodsFilter(this.notValidated,this.notValidatedColor)},partiallyControlled:function(){this.setPeriodsFilter(this.partiallyControlled,this.partiallyControlledColor)},workPeriod:function(){this.setPeriodsFilter(this.workPeriod,this.workPeriodColor)}},methods:{}},r=a(18),o=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",[e("div",[e("v-col",{staticClass:"pl-8 pr-8",attrs:{cols:"12"}},[e("div",{staticClass:"overline"},[t._v("\n          "+t._s(t.$t("session.label_periods"))+"\n        ")]),t._v(" "),e("v-checkbox",{attrs:{label:t.checkboxStates[0].label,color:t.checkboxStates[0].color,"append-icon":t.checkboxStates[0].icon,"hide-details":""},model:{value:t.alreadyValidated,callback:function(e){t.alreadyValidated=e},expression:"alreadyValidated"}}),t._v(" "),e("v-checkbox",{attrs:{label:t.checkboxStates[1].label,color:t.checkboxStates[1].color,"append-icon":t.checkboxStates[1].icon,"hide-details":""},model:{value:t.partiallyControlled,callback:function(e){t.partiallyControlled=e},expression:"partiallyControlled"}}),t._v(" "),e("v-checkbox",{attrs:{label:t.checkboxStates[2].label,color:t.checkboxStates[2].color,"append-icon":t.checkboxStates[2].icon,"hide-details":""},model:{value:t.notValidated,callback:function(e){t.notValidated=e},expression:"notValidated"}}),t._v(" "),e("v-checkbox",{attrs:{"input-value":t.dataNotAvailable,label:t.checkboxStates[3].label,color:t.checkboxStates[3].color,"append-icon":t.checkboxStates[3].icon,readonly:t.dataNotAvailable,"hide-details":""}}),t._v(" "),e("v-checkbox",{attrs:{label:t.checkboxStates[4].label,color:t.checkboxStates[4].color,"append-icon":t.checkboxStates[4].icon,"hide-details":""},model:{value:t.workPeriod,callback:function(e){t.workPeriod=e},expression:"workPeriod"}})],1)],1),t._v(" "),e("v-divider",{staticClass:"mt-4"}),t._v(" "),e("AerisDatavalidationPeriodsPicker",{attrs:{session:t.session,defaultDate:t.defaultDate,setStartDate:t.setStartDate,getProductAvailablePeriods:t.getProductAvailablePeriods}}),t._v(" "),e("v-divider"),t._v(" "),e("AerisDatavalidationPeriodsFilterToolbar",{attrs:{session:t.session,getFlags:t.getFlags,webcomponent:t.webcomponent,downloadFlagsCsv:t.downloadFlagsCsv,getModelByPeriod:t.getModelByPeriod,notifyCancelPopUp:t.notifyCancelPopUp}})],1)}),[],!1,null,"6b4dbeef",null);e.a=o.exports},295:function(t,e,a){"use strict";a(281);var s=a(280),i=a(299),n=a(292),r=a(301),o={name:"aeris-datavalidation-periodscalendar",components:{AerisDatavalidationPeriodDialog:i.a,AerisDatavalidationYearCalendar:n.a,AerisDatavalidationPeriodsCalendarToolbar:r.a},props:{session:{type:Object,default:null},title:{type:String,default:""},calDefaultView:{type:Object,default:()=>null},periodsFilter:{type:Object,default:()=>({})},webcomponent:{type:Boolean,default:!0},model:{type:Object,default:()=>{}},startDate:{type:String},getPeriods:{type:Function,default:()=>{}},createPeriod:{type:Function},defaultDate:{type:Date,default:()=>{}},notifyPeriodMenuState:{type:Function,default:()=>{}},setStartDate:{type:Function,default:()=>{}},updateSession:{type:Function,default:()=>{}},updatePeriod:{type:Function,default:()=>{}},postPeriods:{type:Function,default:()=>{}},getPeriodsByYear:{type:Function,default:()=>{}},deletePeriods:{type:Function,default:()=>{}},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[s.a],data(){return{focus:"",value:"",year:{value:(new Date).getFullYear().toString()},periods:[],allPeriods:[],type:"month",currentBound:{},yearPeriods:[],renderBounds:null,calendarRef:null,selectedPeriod:{},toolbarTitle:"test",selectedOpen:!1,selectedElement:null,types:[{value:"month",translate:this.$t("session.label_month")},{value:"year",translate:this.$t("session.label_year")},{value:"years",translate:this.$t("session.label_year")+"s"}]}},watch:{calDefaultView:{handler:function(){this.calDefaultView&&this.setType(this.calDefaultView.value)},immediate:!0},periodsFilter:{handler:function(){this.periodsFilter&&this.applyFilter()},immediate:!0},startDate:{handler:function(){this.startDate&&(this.focus=this.startDate,this.year={value:new Date(this.startDate).getFullYear().toString()})},immediate:!0},type:{handler:function(){this.$refs.calendar?this.type!==this.types[1].value&&this.type!==this.types[2].value||(this.year={value:this.$refs.calendar.title.split(" ")[1]}):this.year={value:this.year.value}},immediate:!0},defaultDate:{handler:function(){this.defaultDate&&(this.focus=this.defaultDate)},immediate:!0}},methods:{translate(t){return this.$t(t)},setSelectedPeriod:function(t){let e,a,s;t&&(a=t.start,s=t.end,e=this.getTargetPeriod(this.dbPeriods,a,s),this.selectedPeriod=t,this.selectedPeriod.targetPeriod=e)},applyFilter:function(){const{state:t,color:e}=this.periodsFilter;!t&&e?this.periods=this.periods.filter(t=>t.color!==e):e&&(this.periods=[...this.periods,...this.allPeriods.filter(t=>t.color===e)])},showPeriod({nativeEvent:t,event:e}){if(e.color!==this.noDataColor&&!this.webcomponent){const a=()=>{this.setSelectedPeriod(e),this.selectedElement=t.target,setTimeout(()=>{this.selectedOpen=!0},10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(a,10)):a()}t.stopPropagation()},getPeriodColor:t=>t.color,setType:function(t){t&&(this.type=t)},calendarPrev:function(){this.type===this.types[0].value?(this.$refs.calendar.prev(),this.setCurrentYear()):this.type!==this.types[1].value&&this.type!==this.types[2].value||(this.year={value:(Number(this.year.value)-1).toString()},this.setStartDate(this.year.value+"-01-01"))},calendarNext:function(){this.type===this.types[0].value?(this.$refs.calendar.next(),this.setCurrentYear()):this.type!==this.types[1].value&&this.type!==this.types[2].value||(this.year={value:(Number(this.year.value)+1).toString()},this.setStartDate(this.year.value+"-01-01"))},setSelectedOpen:function(t){void 0!==t&&(this.selectedOpen=t)},setCurrentYear:function(){let{day:t,month:e,year:a,firstDate:s,lastDate:i}=this.getDateFrag(this.focus,!0);t&&e&&a&&this.setRenderBounds({start:s,end:i})},setRenderBounds:function(t){t&&(this.renderBounds=t)},monthPeriodsHandler:function(t,e,a,s,i){const{periods:n,flags:r}=a;this.session&&this.session.workPeriod&&n&&(this.setPeriodsModel(t,e,s,this.session.workPeriod,n,r),this.periods=this.periodsModelToTags(null,null,this.translate),this.allPeriods=this.periods,this.webcomponent||(this.dbPeriods=n,this.dbPeriodsHandler(this.session.workPeriod,this.groupingFlags(r),i)))},refreshMonthRender:function({start:t,end:e},a){let s,i,n,r,o;this.session&&this.session.workPeriod&&(s=this.getDateTime(this.session.workPeriod.startDate,!0),i=this.getDateTime(this.session.workPeriod.endDate,!0),n=s&&t&&this.isHigherThan(t.date,s,!0)?{date:s}:t,r=i&&e&&this.isHigherThan(i,e.date,!0)?{date:i}:e,o={start:n,end:r},this.getPeriods(o,(t,e,s,i)=>{this.monthPeriodsHandler(t,e,s,i,a)}))},getWorkPeriodParameters:function(){let t,e={start:null,end:null};return this.session&&this.session.workPeriod&&(t=this.getDateFrag(this.session.workPeriod.startDate,!0),t&&t.firstDate&&t.lastDate&&(e={start:{date:t.firstDate},end:{date:t.lastDate}})),e},setMonthRender:function(t,e){let a;const s=new Date(t+"T00:00:00"),i=new Date(e+"T23:59:59"),n=Object.assign({},this.session.workPeriod);this.session&&this.session.workPeriod&&s&&i&&(this.session.workPeriod.startDate=this.dateToUtc(s),this.session.workPeriod.endDate=this.dateToUtc(i),this.focus=new Date(this.session.workPeriod.startDate),a=Object.assign({},this.session.workPeriod),this.updateSession(this.session,()=>{this.refreshMonthRender(this.getWorkPeriodParameters(),()=>{const t=this.periods.find(t=>this.isSamePeriod(this.selectedPeriod,t));t&&this.setSelectedPeriod(t),this.$store.commit("updateNewPeriodData",{newPeriod:a,oldPeriod:n})})}))}}},l=a(18),c=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"1500px"}},[e("v-card",{staticClass:"overflow-x-auto"},[e("div",[e("AerisDatavalidationPeriodsCalendarToolbar",{attrs:{type:t.type,types:t.types,title:t.title,session:t.session,yearPeriods:t.yearPeriods,renderBounds:t.renderBounds,setType:t.setType,calendarPrev:t.calendarPrev,calendarNext:t.calendarNext}}),t._v(" "),this.$refs.calendar&&"month"===t.type?e("v-toolbar-title",{staticClass:"pa-1 mt-4"},[t._v("\n          "+t._s(this.$refs.calendar.title.toUpperCase())+"\n        ")]):e("v-toolbar-title",{staticClass:"pa-1"},[t._v("\n          "+t._s(this.year.value)+"\n        ")])],1),t._v(" "),e("v-sheet",{attrs:{height:"600"}},["month"===t.type?e("v-calendar",{ref:"calendar",attrs:{type:t.type,start:t.startDate,events:t.periods,locale:t.$i18n.locale,"event-overlap-threshold":30,"event-color":t.getPeriodColor,"event-more-text":t.$t("common.more")},on:{"click:event":t.showPeriod,change:t.refreshMonthRender},model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}}):e("AerisDatavalidationYearCalendar",{attrs:{year:t.year,session:t.session,setType:t.setType,calendarType:t.type,setStartDate:t.setStartDate,getPeriodsByYear:t.getPeriodsByYear,setRenderBounds:t.setRenderBounds}}),t._v(" "),e("AerisDatavalidationPeriodDialog",{attrs:{model:t.model,session:t.session,createPeriod:t.createPeriod,updatePeriod:t.updatePeriod,selectedOpen:t.selectedOpen,currentDbPeriods:t.dbPeriods,updateSession:t.updateSession,selectedPeriod:t.selectedPeriod,selectedElement:t.selectedElement,notifyPeriodMenuState:t.notifyPeriodMenuState,setMonthRender:t.setMonthRender,setSelectedOpen:t.setSelectedOpen,setRenderBounds:t.setRenderBounds,refreshMonthRender:t.refreshMonthRender,getProductAvailablePeriods:t.getProductAvailablePeriods}})],1)],1)],1)}),[],!1,null,"e229296e",null);e.a=c.exports},296:function(t,e,a){"use strict";var s=a(297),i={name:"aeris-datavalidation-periodsfiltertoolbar",props:{session:{type:Object,default:null},webcomponent:{type:Boolean,default:!0},notifyCancelPopUp:{type:Function,default:()=>{}},downloadFlagsCsv:{type:Function,default:()=>{}},getFlags:{type:Function,default:()=>{}},getModelByPeriod:{type:Function,default:()=>{}}},components:{AerisDatavalidationExportDataDialog:s.a},data:()=>({enableDialog:!1}),methods:{dialogHandler:function(t){this.enableDialog=t}}},n=a(18),r=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("div",[e("v-sheet",{staticClass:"d-flex justify-center mt-5",attrs:{tile:""}},[e("v-card-actions",{staticClass:"pa-1 ml-1"},[t.webcomponent?t._e():e("v-btn",{attrs:{color:"darken-1"},on:{click:function(e){return t.dialogHandler(!0)}}},[t._v("\n          "+t._s(t.$t("session.label_export"))+"\n          "),e("v-icon",{attrs:{left:""}},[t._v("\n            mdi-calendar-export\n          ")])],1),t._v(" "),t.webcomponent?t._e():e("v-btn",{attrs:{color:"darken-1"},on:{click:t.notifyCancelPopUp}},[t._v("\n          "+t._s(t.$t("common.close"))+"\n        ")])],1)],1),t._v(" "),e("AerisDatavalidationExportDataDialog",{attrs:{session:t.session,getFlags:t.getFlags,webcomponent:t.webcomponent,enableDialog:t.enableDialog,downloadFlagsCsv:t.downloadFlagsCsv,getModelByPeriod:t.getModelByPeriod,dialogHandler:t.dialogHandler}})],1)}),[],!1,null,"0719bbe6",null);e.a=r.exports},297:function(t,e,a){"use strict";var s=a(303),i=a(279),n={name:"aeris-datavalidation-exportdatadialog",components:{AerisDatavalidationDateMounthPicker:a(288).a},props:{enableDialog:{type:Boolean,default:()=>!1},dialogHandler:{type:Function,default:()=>{}},webcomponent:{type:Boolean,default:!0},session:{type:Object,default:null},getFlags:{type:Function,default:()=>{}},downloadFlagsCsv:{type:Function,default:()=>{}},getModelByPeriod:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({fileFormat:"",listAlert:!1,currentStartDate:"",exportDataDialog:!1}),watch:{enableDialog:{handler:function(){this.exportDataDialog=this.enableDialog},immediate:!0}},computed:{getTypeOfChart:function(){let t="";const{instrument:e}=this.session;return e&&(t=e.type),t},getFileFormats:function(){let t=[];const{instrument:e}=this.session;return e&&"PointSeries"===e.type?t=["CSV","JSON"]:e&&"Heatmap"===e.type&&(t=["JSON"]),t},disableExportButton:function(){return""===this.fileFormat},getCurrentStartDate:function(){let t="";const{workPeriod:e}=this.session;return e&&(t={date:this.dateToFormat(e.startDate,"en")}),t},getCurrentEndDate:function(){let t="";const{workPeriod:e}=this.session;return e&&(t={date:this.dateToFormat(e.endDate,"en")}),t},getMinDate:function(){let t,e="";const{instrument:a}=this.session;return a&&(t=a.start_date,e=new Date(this.dateToFormat(t,"en")).toISOString().slice(0,10)),e},getMaxDate:function(){let t,e="";const{instrument:a}=this.session;return a&&(t=a.end_date,e=new Date(this.dateToFormat(t,"en")).toISOString().slice(0,10)),e}},methods:{dateToFormat:i.d,isSameDateTime:i.o,closeDialog:function(){this.exportDataDialog=!1,this.dialogHandler(!1)},setCurrentStartDate:function(t){this.isSameDateTime(this.currentStartDate,t)||(this.currentStartDate=t)},setCurrentEndDate:function(t){this.isSameDateTime(this.currentEndDate,t)||(this.currentEndDate=t)},getFilterFlag:function(t){let e,a={};return t&&(e=t.availableFlags[0],a.startDate=this.dateToUtc(t.startXaxis),a.endDate=this.dateToUtc(t.endXaxis),a.parameter=t.parameterName,a.code=e.code.trim(),a.description=t.description?t.description:e.label.trim()),a},getFilterFlags:function(t){let e=[];return t&&(e=t.map(t=>this.getFilterFlag(t))),e},flagsToCsv:function(t){let e,a,s,i,n=[],r="";t&&0<t.length&&(e=t[0].instrumentName+"_"+t[0].parameterName,i=this.getFilterFlags(t),i&&(i.forEach((t,e)=>{0===e&&n.push(Object.keys(t)),n.push(Object.values(t))}),n.forEach((function(t){let e="";t.forEach((a,s)=>{e+='"'+a+'"',s<t.length-1&&(e+=",")}),r+=e+"\r\n"})),a="data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+r),s=document.createElement("a"),s.setAttribute("href",a),s.setAttribute("download",e+".csv"),document.body.appendChild(s),s.click()))},objToJsonFile:function(t,e){const a=new Blob([JSON.stringify(t)],{type:"text/json"}),s=document.createElement("a");s.download=t[0].instrumentName?t[0].instrumentName+"_"+t[0].parameterName:e,s.href=window.URL.createObjectURL(a),s.dataset.downloadurl=["text/json",s.download,s.href].join(":");const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(i),s.remove()},enableListAlert:function(){this.listAlert=!0,setTimeout(()=>{this.listAlert=!1},1e3)},exportPeriods:function(){let t;const{instrument:e}=this.session,a=new Date(this.currentStartDate+"T00:00:00"),s=new Date(this.currentEndDate+"T23:59:59"),i=this.session.parametersToValidate[0],n=i.instrumentId,r=i.name;e&&"PointSeries"===e.type?this.getFlags(n,r,null,a,s,e=>{"CSV"===this.fileFormat&&0<e.length?this.flagsToCsv(e,n+"_"+r):"JSON"===this.fileFormat&&0<e.length?(t=this.getFilterFlags(e),this.objToJsonFile(t,this.session.instrument.name+"_"+r+".json")):this.enableListAlert()},!0):e&&"Heatmap"===e.type&&this.getModelByPeriod(i,n,a,s,t=>{this.objToJsonFile(t.z,this.session.instrument.name+"_"+r+".json")})}}},r=a(18),o=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:t.exportDataDialog,callback:function(e){t.exportDataDialog=e},expression:"exportDataDialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n            "+t._s(t.$t("session.label_exportOfPeriod"))+"\n          ")]),t._v(" "),e("v-form",[e("v-container",[t.listAlert?e("v-alert",{attrs:{type:"warning"}},[t._v("\n                "+t._s(t.$t("session.label_emptyList"))+"\n              ")]):t._e(),t._v(" "),e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_startDate"),currentDate:t.getCurrentStartDate,setCurrentDate:t.setCurrentStartDate,minDate:t.getMinDate,maxDate:t.getMaxDate}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_endDate"),currentDate:t.getCurrentEndDate,setCurrentDate:t.setCurrentEndDate,minDate:t.getMinDate,maxDate:t.getMaxDate}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("v-select",{attrs:{items:t.getFileFormats,name:"name","item-text":"name","item-value":"name","data-cy":"sessionFormInstrumentName-select",label:t.$t("session.label_fileFormat"),required:"","return-object":""},model:{value:t.fileFormat,callback:function(e){t.fileFormat=e},expression:"fileFormat"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("v-card-actions",[e("v-btn",{attrs:{disabled:t.disableExportButton},on:{click:t.exportPeriods}},[t._v("\n                      "+t._s(t.$t("session.label_export"))+"\n                    ")]),t._v(" "),e("v-btn",{on:{click:t.closeDialog}},[t._v("\n                      "+t._s(t.$t("common.close"))+"\n                    ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"bd5c4c18",null);e.a=o.exports},298:function(t,e,a){"use strict";var s=a(279),i={name:"aeris-datavalidation-periodspicker",props:{session:{type:Object,default:null},setStartDate:{type:Function,default:()=>{}},defaultDate:{type:Date,default:()=>{}},getProductAvailablePeriods:{type:Function,default:()=>{}}},data:()=>({picker:"",minDate:"",maxDate:"",pickerDate:null,availablePeriods:{}}),watch:{pickerDate:function(t){t&&this.setAvailability(t+"-01")},defaultDate:{handler:function(){this.defaultDate&&(this.picker=this.defaultDate.toISOString().slice(0,10),this.setAvailability(this.defaultDate))},immediate:!0}},computed:{getMinDate:function(){let t=void 0;return this.session&&this.session.instrument&&(t=this.session.instrument.start_date),t||""},getMaxDate:function(){let t=void 0;return this.session&&this.session.instrument&&(t=this.session.instrument.end_date),t||""}},methods:{dateToUtc:s.e,getDateTime:s.j,getDateFrag:s.h,allowedDates:function(t){let e,a,s=!1;return this.availablePeriods&&this.availablePeriods.availability&&(e=this.availablePeriods.availability.date,a=this.availablePeriods.availability.value,s=e&&a&&t&&e.some((e,s)=>e===t&&a[s])),s},setAvailability:function(t){let e,a;const{firstDate:s,lastDate:i}=this.getDateFrag(t);this.session&&this.session.instrument&&s&&i&&(e=this.dateToUtc(s),a=this.dateToUtc(i),this.getProductAvailablePeriods(this.session.instrument,e,a,t=>{this.availablePeriods=t}))},onChangeHandler:function(t){t&&this.setStartDate(t,!0)}}},n=a(18),r=Object(n.a)(i,(function(){var t=this;return(0,t._self._c)("v-date-picker",{attrs:{"no-title":"",min:t.getMinDate,max:t.getMaxDate,locale:t.$i18n.locale,"picker-date":t.pickerDate,"allowed-dates":t.allowedDates},on:{"update:pickerDate":function(e){t.pickerDate=e},"update:picker-date":function(e){t.pickerDate=e},change:t.onChangeHandler},model:{value:t.picker,callback:function(e){t.picker=e},expression:"picker"}})}),[],!1,null,"c79f9e74",null);e.a=r.exports},299:function(t,e,a){"use strict";var s=a(280),i={name:"aeris-datavalidation-perioddialog",components:{AerisDatavalidationPeriodForm:a(300).a},props:{session:{type:Object,default:null},model:{type:Object},createPeriod:{type:Function},currentDbPeriods:{type:Array},selectedElement:{type:HTMLDivElement},selectedPeriod:{type:Object},selectedOpen:{type:Boolean},setSelectedOpen:{type:Function},setMonthRender:{type:Function},refreshMonthRender:{type:Function},notifyPeriodMenuState:{type:Function},updateSession:{type:Function},updatePeriod:{type:Function},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({open:!1}),updated(){this.notifyPeriodMenuState(this.open)},watch:{selectedOpen:{immediate:!0,handler(){this.selectedOpen&&(this.open=this.selectedOpen)}}},methods:{setOpen:function(t){void 0!==t&&(this.open=t,this.setSelectedOpen(t))}}},n=a(18),r=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("v-menu",{attrs:{"close-on-content-click":!1,"close-on-click":!1,activator:t.selectedElement,"offset-x":""},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e("v-card",{attrs:{width:"500"}},[e("v-toolbar",{attrs:{color:"#90A4AE",dark:""}},[t._v("\n        "+t._s(t.$t("session.label_workPeriodDef"))+"\n      ")]),t._v(" "),e("AerisDatavalidationPeriodForm",{attrs:{model:t.model,session:t.session,updatePeriod:t.updatePeriod,createPeriod:t.createPeriod,updateSession:t.updateSession,selectedPeriod:t.selectedPeriod,setMonthRender:t.setMonthRender,currentDbPeriods:t.currentDbPeriods,setOpen:t.setOpen,refreshMonthRender:t.refreshMonthRender,getProductAvailablePeriods:t.getProductAvailablePeriods}})],1)],1)}),[],!1,null,"53ad2e7c",null);e.a=r.exports},300:function(t,e,a){"use strict";var s=a(279),i=a(280),n=a(283),r=a(290),o=a(288),l={name:"aeris-datavalidation-periodform",components:{AerisDatavalidationSelect:r.a,AerisDatavalidationDeleteDialog:n.a,AerisDatavalidationDateMounthPicker:o.a},props:{model:{type:Object},currentDbPeriods:{type:Array},setOpen:{type:Function},createPeriod:{type:Function},session:{type:Object,default:null},selectedPeriod:{type:Object},setMonthRender:{type:Function},refreshMonthRender:{type:Function},updateSession:{type:Function},updatePeriod:{type:Function},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[i.a],data(){return{dialog:!1,edit:!0,endDate:null,oldState:null,startDate:null,defaultFlags:[],qualityFlags:[],selectedFlags:null,currentEndDate:"",currentStartDate:"",closePeriodDialog:!1,currentStateColor:"#1976D2",disabledClosePeriodButton:!1,stateValue:this.$t("session.label_workPeriod"),state:[{text:this.$t("session.label_workPeriod"),color:"#1976D2"}]}},watch:{selectedPeriod:{handler:function(t){if(t){const{color:e,start:a,end:s}=t;this.endDate=s,this.startDate=a,this.currentStateColor=e,this.state=this.getStates[0],this.session&&(this.qualityFlags=this.concatFlagCodeLabel(this.session.instrument.availableFlags)),"error"===e?this.disabledClosePeriodButton=!0:"primary"===e&&(this.disabledClosePeriodButton=!1)}},immediate:!0},state:function(t,e){this.oldState=e}},computed:{disabledCloseButton:function(){let t=!0;return this.selectedPeriod&&(t=this.selectedPeriod.color!==this.stateColor.workperiodcolor),t},alertForm:function(){let t;return!!this.session&&(t=this.session.instrument.name,"P2OA-CRA-Lannemezan"===t||"PDM_NEPHE"===t)},getStates:function(){let t=[];return this.statesColors&&(t=this.statesColors.filter(t=>t.color!==this.notValidatedColor&&t.color!==this.alreadyValidatedColor)),t},isNotValidated:function(){let t;return!!this.state&&(t=this.session.instrument.name,this.state.color===this.notValidatedColor||"P2OA-CRA-Lannemezan"===t||"PDM_NEPHE"===t)},getCurrentStartDate:function(){let t="";return this.startDate&&(t={date:this.dateToFormat(this.startDate,"en")}),t},getCurrentEndDate:function(){let t="";return this.endDate&&(t={date:this.dateToFormat(this.endDate,"en")}),t},getStartDateMinDate:function(){let t=void 0;return this.session&&this.session.instrument&&(t=this.session.instrument.start_date),t||""},getStartDateMaxDate:function(){let t=void 0;return this.currentEndDate&&""!==this.currentEndDate&&(t=this.dateToFormat(this.addDayToDate(this.currentEndDate,1,!0,!0),"en")),t||""},getEndDateMinDate:function(){let t=void 0;return this.currentStartDate&&""!==this.currentStartDate&&(t=this.dateToFormat(this.addDayToDate(this.currentStartDate,1,!0),"en")),t||""},getEndDateMaxDate:function(){let t=void 0;return this.session&&this.session.instrument&&(t=this.session.instrument.end_date),t||""}},methods:{dateToUtc:s.e,addDayToDate:s.a,dateToFormat:s.d,isSameDateTime:s.o,setCurrentStartDate:function(t){this.isSameDateTime(this.currentStartDate,t)||(this.currentStartDate=t)},setCurrentEndDate:function(t){this.isSameDateTime(this.currentEndDate,t)||(this.currentEndDate=t)},cancelForm:function(){this.setOpen(!1)},setDateFormat:function(t,e,a){t&&e&&a&&(t.startDate=this.dateToUtc(e),t.endDate=this.dateToUtc(a))},periodHandler:function(){this.setMonthRender(this.currentStartDate,this.currentEndDate),this.setOpen(!1)},validate:function(){this.dialog=!1,this.closePeriodDialog=!1,this.flushPeriod()},cancel:function(){this.dialog=!1,this.closePeriodDialog=!1},closePeriod:function(){this.cancelForm(),this.dialog=!0,this.closePeriodDialog=!0},getNewPeriod:function(t,e,a){let s=this.currentDbPeriods.find(t=>this.isSamePeriod(t,a));return s?(s.state=this.states["#4CAF50"],s.instrumentId=t,s):{state:this.states["#4CAF50"],instrumentId:t,parameterName:e,endDate:this.dateToUtc(a.endDate),startDate:this.dateToUtc(a.startDate)}},getWorkPeriodParameters:function(){let t={start:null,end:null};const{firstDate:e,lastDate:a}=this.getDateFrag(this.session.workPeriod.startDate,!0);return e&&a&&(t={start:{date:e},end:{date:a}}),t},refreshCal:function(t,e){t&&e&&(this.refreshMonthRender(this.getWorkPeriodParameters(),()=>{this.$store.commit("updateCloseFlagData",{workPeriod:e,availableFlags:this.selectedFlags})}),this.setOpen(!1))},flushPeriod:function(){let t;const{workPeriod:e}=this.session,a=this.session.parametersToValidate[0],s=a.instrumentId,i=a.name;e&&s&&i&&(t=this.getNewPeriod(s,i,e),t.id?this.updatePeriod(t,t=>{this.refreshCal(t,e)}):this.createPeriod(t,t=>{this.refreshCal(t,e)}))},setFlagsSelected:function(t){const e=t[0];e&&e.code&&(this.selectedFlags=e)},concatFlagCodeLabel:function(t){return t&&t.forEach(t=>{t.concatName=t.code+", "+t.label}),t}}},c=a(18),d=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("v-container",[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.dialog,ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validate,cancelCallBack:t.cancel,title:t.$t("session.label_closing"),message:t.$t("session.message_closeCurrentPeriod")}}),t._v(" "),e("v-dialog",{attrs:{width:500,heigth:600},model:{value:t.closePeriodDialog,callback:function(e){t.closePeriodDialog=e},expression:"closePeriodDialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n          "+t._s(t.$t("session.label_periodClosure"))+"\n        ")]),t._v(" "),e("v-row",{staticClass:"pa-2"},[e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationSelect",{attrs:{name:"flags",itemText:"concatName",session:t.session,qualityFlags:t.qualityFlags,flag_message:t.$t("session.message_novalidateddataflag"),setFlagsSelected:t.setFlagsSelected,defaultQualityFlags:t.defaultFlags,disabledSelect:t.disabledCloseButton}})],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{disabled:t.disabledCloseButton},on:{click:t.validate}},[t._v("\n            "+t._s(t.$t("session.label_validate"))+"\n          ")]),t._v(" "),e("v-btn",{on:{click:t.cancel}},[t._v("\n            "+t._s(t.$t("session.label_cancel"))+"\n          ")])],1)],1)],1),t._v(" "),e("v-form",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_startDate"),session:t.session,minDate:t.getStartDateMinDate,maxDate:t.getStartDateMaxDate,currentDate:t.getCurrentStartDate,getProductAvailablePeriods:t.getProductAvailablePeriods,setCurrentDate:t.setCurrentStartDate}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_endDate"),session:t.session,minDate:t.getEndDateMinDate,maxDate:t.getEndDateMaxDate,currentDate:t.getCurrentEndDate,getProductAvailablePeriods:t.getProductAvailablePeriods,setCurrentDate:t.setCurrentEndDate}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("v-card-actions",[e("v-btn",{attrs:{disabled:t.isNotValidated},on:{click:t.periodHandler}},[t._v("\n                OK\n              ")]),t._v(" "),e("v-btn",{attrs:{disabled:t.disabledCloseButton},on:{click:t.closePeriod}},[t._v("\n                "+t._s(t.$t("session.label_windUp"))+"\n              ")]),t._v(" "),e("v-btn",{on:{click:t.cancelForm}},[t._v("\n                "+t._s(t.$t("session.label_cancel"))+"\n              ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"173f8500",null);e.a=d.exports},301:function(t,e,a){"use strict";var s=a(280),i={name:"aeris-datavalidation-periodscalendartoolbar",props:{session:{type:Object,default:null},title:{type:String,default:"Title"},renderBounds:{type:Object,default:()=>({})},yearPeriods:{type:Array,default:()=>[]},type:{type:String,default:""},types:{type:Array,default:()=>[]},setType:{type:Function,default:()=>{}},calendarPrev:{type:Function,default:()=>{}},calendarNext:{type:Function,default:()=>{}}},data(){return{outBoundMin:!1,outBoundMax:!1,localeType:this.type}},mixins:[s.a],watch:{type:function(){this.type&&(this.localeType=this.type)},localeType:function(){this.setType(this.localeType)},renderBounds:{handler:function(){this.renderBounds&&this.setBounds()},immediate:!0}},computed:{getInstrumentName:function(){const{instrument:t}=this.session;return t?t.name:this.title}},methods:{setBounds:function(){let t,e;const{instrument:a}=this.session;a&&(t=new Date(this.renderBounds.start+"T00:00:00"),e=new Date(this.renderBounds.end+"T23:59:59"),this.outBoundMin=this.isHigherThan(a.start_date,t,!0),this.outBoundMax=this.isHigherThan(e,a.end_date,!0))}}},n=a(18),r=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"54"}},[e("v-btn",{staticClass:"ma-2",attrs:{icon:"",disabled:t.outBoundMin},on:{click:t.calendarPrev}},[e("v-icon",[t._v("mdi-chevron-left")])],1),t._v(" "),e("v-spacer"),t._v(" "),e("v-toolbar",{staticClass:"mt-1"},[t._v("\n      "+t._s(t.$t("session.label_instrument"))+" : "+t._s(t.getInstrumentName)+"\n      "),e("v-spacer"),t._v(" "),t._l(t.types,(function(a){return e("v-btn-toggle",{key:a.value,attrs:{color:"primary accent-3",group:""},model:{value:t.localeType,callback:function(e){t.localeType=e},expression:"localeType"}},[e("v-btn",{attrs:{value:a.value}},[t._v("\n          "+t._s(a.translate)+"\n        ")])],1)}))],2),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"ma-3",attrs:{icon:"",disabled:t.outBoundMax},on:{click:t.calendarNext}},[e("v-icon",[t._v("mdi-chevron-right")])],1)],1)}),[],!1,null,"268cb14e",null);e.a=r.exports},302:function(t,e,a){"use strict";a(322);e.a={data:()=>({workPeriod:{startDate:"2012-09-11T00:00:00Z",endDate:"2012-09-12T23:59:59.000Z"},instrument:{instrumentId:null,uuid:"OPE_NEPHE_RAW",rootUrl:"https://dataviz.icare.univ-lille.fr/daalia",path:"/getfiles",name:"OPE_NEPHE",type:"PointSeries",start_date:"2012-09-11T00:00:00.000Z",end_date:"2022-01-01T23:59:59.000Z",xaxis_name:"Time",yaxis_name:"Value",availableFlags:[]},wcThemes:[{name:"light",background:"rgb(255,255,255)",plotPaper:"rgb(255,255,255)",grid:"rgb(230,230,230)",text:"rgb(70,70,70)",iconColor:"rgba(68, 68, 68, 0.3)",activecolor:"rgba(212, 10, 10, 0.7)",chartTabColor:"light-blue",flagOpacity:.28,thresholdMinColor:"rgb(27,27,28)",thresholdMaxColor:"rgb(245,6,6)"},{name:"dark",background:"rgb(30,30,30)",plotPaper:"rgb(30,30,30)",grid:"rgb(60,60,60)",text:"rgb(230,230,230)",iconColor:"rgb(230,230,230)",activecolor:"rgba(212, 10, 10, 0.7)",chartTabColor:"light-blue",flagOpacity:.69,thresholdMinColor:"rgb(255,255,255)",thresholdMaxColor:"rgb(255,0,0)"}],colorScale:[{value:0,color:"rgba(68, 1, 84, 1)",default:!1},{value:.1111111111111111,color:"rgba(72, 40, 120, 1)",default:!1},{value:.2222222222222222,color:"rgba(62, 73, 137, 1)",default:!1},{value:.3333333333333333,color:"rgba(49, 104, 142, 1)",default:!1},{value:.4444444444444444,color:"rgba(38, 130, 142, 1)",default:!1},{value:.5555555555555556,color:"rgba(31, 158, 137, 1)",default:!1}],first1DParam:{name:"scat_coef_635",type:"PointSeries",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/OPE_NEPHE_RAW",color:{name:"rgb(255, 0, 0)",value:null,color:null,colorScale:null,description:null,default:!0}},second1DParam:{name:"cell_temp",type:"PointSeries",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/OPE_NEPHE_RAW",color:{name:"rgb(0, 255, 1)",value:null,color:null,colorScale:null,description:null,default:!0}},first2DParam:{name:"UWE",type:"Profiles",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/LZA_RADAR_VHF_L2A_DAILY",color:{name:"Viridis",value:null,color:null,description:"reset",default:!0}},sessionProps:{lock:!0,theme:"light",parametersToValidate:[],charts:[{title:"OPE_NEPHE",frName:"Graphique principal",enName:"Main chart",parameters:[]},{title:"OPE_NEPHE",frName:"Graphique secondaire",enName:"Secondary chart",parameters:[]}],currentSecondChartName:"Secondary chart",threshold:null}}),methods:{getSessionProps:function(){let t=Object.assign({},this.sessionProps);return t&&(t.workPeriod=Object.assign({},this.workPeriod),t.instrument=Object.assign({},this.instrument)),t},initChartsWC:function(){let t,e=this.getSessionProps();return e&&"[]"!==this.charts&&(t=JSON.parse(this.charts.replaceAll("'",'"')),t?e.charts=t:(e.parametersToValidate.push(this.first1DParam),e.charts[0].parameters.push(this.first1DParam),this.first2DParam.color.colorScale=this.colorScale),e.charts[1].parameters.push(this.first2DParam),this.newSession(e,this.wcThemes)),e},initCalendarWcProps:function(){let t=this.getSessionProps();t&&(t.instrument.name=""!==this.title?this.title:t.instrument.name,t.instrument.uuid=""!==this.uuid?this.uuid:t.instrument.uuid,t.instrument.start_date=""!==this.startdate?this.startdate:t.instrument.start_date,t.instrument.end_date=""!==this.enddate?this.enddate:t.instrument.end_date,t.instrument.rootUrl=""!==this.availabilityurl?this.availabilityurl:t.instrument.rootUrl,this.currentSession=t)}}}},303:function(t,e,a){"use strict";a(281);var s=a(289),i=a.n(s),n=a(279),r=a(285),o=a(0),l=a(48);o.default.use(l.a);var c=new l.a({locale:"fr",messages:function(){const t=a(304),e={};return t.keys().forEach(a=>{const s=a.match(/([A-Za-z0-9-_]+)\./i);if(s&&s.length>1){const i=s[1];e[i]=t(a)}}),e}()});e.a={data:()=>({inputsNames:{parametername:c.t("session.label_parameterName"),instrumentname:c.t("session.label_instrumentName"),creationdate:c.t("session.label_creationDate"),startdate:c.t("session.label_startDate"),enddate:c.t("session.label_endDate"),availableflags:c.t("session.label_availableFlags")}}),methods:{getFlag:r.f,dateToUtc:n.e,flagExist:r.b,isSameFlag:r.k,getDateTime:n.j,isHigherThan:n.n,isFlagInFlag:r.i,periodToFlag:r.l,flagToPeriod:r.c,isDateBetWeen:n.m,isSameDateTime:n.o,getExcludeFlags:r.d,isIncludesPeriod:r.j,getTargetFlagIndex:r.g,isDateInFlagPeriod:r.h,isFlagInclude:function(t,e){let a=!1;return t&&e&&(a=this.dateBetweenPeriod(t.x0,e)&&this.dateBetweenPeriod(t.x1,e)),a},isFlagIncludeInPeriod:function(t){let e=!1;return t&&(e=this.flags.some(e=>this.isFlagInclude(e,t))),e},getInstrumentAvailableFlags:function(t){let e={};return this.currentSession.instrument&&this.currentSession.instrument.availableFlags.forEach(a=>{e[t?a.color:a.code]=a}),e},getAvailableFlagsByCode:function(t){let e=0;const a=this.getInstrumentAvailableFlags();return a&&t&&(e=[a[t]]),e},getAvailableFlagsByColor:function(t){let e=0;const a=this.getInstrumentAvailableFlags(!0);return a&&t&&(e=[a[t]]),e},chartsFlagToFlag:function(t){let e=[];const a=this.currentSession.charts[0],{user:s}=this.$store.state.common;let i,n;return t&&a&&s&&(i=a.parameters[0],e=t.map(t=>(n=this.getAvailableFlagsByColor(t.fillcolor),{startXaxis:this.dateToUtc(t.x0),endXaxis:this.dateToUtc(t.x1),startYaxis:t.y0,endYaxis:t.y1,description:n?n[0].description:"",editable:!0,availableFlags:n,instrumentId:i.instrumentId,parameterName:i.name,piEmail:s.email}))),e},addThresholds:function(){this.isMainChart&&this.currentSession&&this.currentSession.threshold&&!this.currentSession.threshold.hide&&(this.drawThreshold(this.currentSession.threshold.thresholdMin,this.theme.thresholdMinColor),this.drawThreshold(this.currentSession.threshold.thresholdMax,this.theme.thresholdMaxColor))},drawDefaultFlags:function(){const{sessionFlags:t}=this.$store.state.common;this.data&&this.data[0]&&t&&(this.drawFlags(t,!0),this.addThresholds())},setDefaultProfiles:function(t){let e,a,s=this.data.find(t=>"flags"===t.name);s&&(e=this.chartModel.z.length,a=s.z.length,this.chartModel.z=t?this.chartModel.z.map((t,e)=>s.z[e]?s.z[e].map(t=>t):t):this.chartModel.z.map((t,i)=>i<e-a?t:s.z[i-(e-a)].map(t=>t)))},addModel:function(t,e,a){let s;t&&t.z&&this.data[0]&&this.data[0].x&&(t.z.forEach(t=>{s=this.data[0].x.findIndex(e=>this.isSameDateTime(t.date,this.dateToUtc(e))),-1!==s&&(this.chartModel.z[s]=Object.assign([],t.codes.map(t=>t)),this.chartModelHistory[0].z[s]=Object.assign([],t.codes.map(t=>t))),e&&this.setDefaultProfiles(a)}),this.chartModelToParameter(this.chartModel,"flags"),this.updateFlagsText())},drawFlags:function(t,e){const{coverageFlagsState:a}=this.$store.state.common,s=this.currentSession.charts[0];t&&!a.checkboxState&&this.isTimeSeries&&(t.forEach(t=>{this.drawFlag(t,e)}),this.saveModelHistory()),this.is2dChart&&!this.isModelInit&&(this.isModelInit=!0,this.addModel(s.chartModel))},draw2DFlag:function(t,e){let a;const s=this.currentSession.instrument.availableFlags;s&&(t.availableFlags=t.availableFlags?t.availableFlags:s,a=this.set2DModelByIndex(t,s[0].code,!1),a.eventCoords=e,a.availableFlags=s.slice(0,1),this.updateTargetTrace("flags",this.chartModel),this.drawSelectionZone(a,s[0].code),this.bind2DFlagListener(a),this.notify2DCovrageFlagsState())},notifyCovrageFlagsState:function(){let t;const e=this.chartModelHistory[0],{thresholdsStates:a}=this.$store.state.common,{coverageFlagsState:s}=this.$store.state.common,i=this.currentFlag.x0?this.getAvailableFlagsByColor(this.currentFlag.fillcolor)[0]:this.currentFlag.availableFlags[0],n=this.getChartModelMinMaxIndex(this.flagToPeriod(this.currentFlag));n&&i&&(t=e.x.slice(n.minIndex,n.maxIndex+1).some(t=>t&&t!==i.code),this.$store.commit("updateCoverageFlagsState",Object.assign({},{modelState:t||a.thresholdMinCheckBox||a.thresholdMaxCheckBox,checkboxState:!!s&&s.checkboxState})))},notify2DCovrageFlagsState:function(){let t=!1;const e=this.chartModelHistory[0],{coverageFlagsState:a}=this.$store.state.common,s=this.getChartModelMinMaxIndex(this.flagToPeriod(this.currentFlag)),i=this.currentFlag.x0?this.getAvailableFlagsByColor(this.currentFlag.fillcolor)[0]:this.currentFlag.availableFlags[0];e&&s&&i&&(t=e.z.slice(s.minIndex,s.maxIndex).some(t=>t.slice(s.minYIndex,s.maxYIndex).some(t=>t&&t!==i.code)),this.$store.commit("updateCoverageFlagsState",Object.assign({},{modelState:t,checkboxState:!!a&&a.checkboxState})))},drawFlag:function(t,e){let a,s;const i=t.availableFlags?t.availableFlags[0]:this.currentSession.instrument.availableFlags[0];i&&(a=this.setChartModelStateByIndex(t,i.code,e),a&&(s=this.chartModel.x.slice(a.minIndex,a.maxIndex+1),s.some(t=>null!==t)&&(this.flags=this.addFlagShape(a.min,a.max,i),e||(a.availableFlags=[i],this.bindFlagListener(a)))))},switchFlag:function(t){let e;e=this.currentSession.charts[0].flags.map(t=>Object.assign({},t)).sort((t,e)=>new Date(t.startXaxis)-new Date(e.startXaxis))[i()(t.currentTarget).attr("data-index")],this.currentFlag=e,e&&(this.saveModelHistory(),this.currentFlagId=e.id,this.$store.commit("updateCurrentFlag",Object.assign({},e))),this.notifyCovrageFlagsState()},setFlagDate:function(t,e,a,s){t&&s&&(t.trace.z[e].splice(a,1,s),t.flag.startXaxis=this.isHigherThan(t.flag.startXaxis,this.data[0].x[e])?this.data[0].x[e]:t.flag.startXaxis,t.flag.endXaxis=this.isHigherThan(this.data[0].x[e],t.flag.endXaxis)?this.data[0].x[e]:t.flag.endXaxis,t.flag.startYaxis=this.data[0].y[a]<t.flag.startYaxis?this.data[0].y[a]:t.flag.startYaxis,t.flag.endYaxis=t.flag.endYaxis<this.data[0].y[a]?this.data[0].y[a]:t.flag.endYaxis)},DFS:function(t,e,a,s,i,n,r){e<0||a<0||e>s-1||a>i-1||t.z[e][a]!==n||t.z[e][a]===n&&(t.z[e].splice(a,1,0),this.setFlagDate(r,e,a,n),this.DFS(t,e+1,a,s,i,n,r),this.DFS(t,e-1,a,s,i,n,r),this.DFS(t,e,a+1,s,i,n,r),this.DFS(t,e,a-1,s,i,n,r),this.DFS(t,e+1,a+1,s,i,n,r),this.DFS(t,e-1,a-1,s,i,n,r),this.DFS(t,e+1,a-1,s,i,n,r),this.DFS(t,e-1,a+1,s,i,n,r))},setConnectedComponent:function(t,e,a,s,i){let n=t.z.length,r=t.z[0].length;t.z[e][a]===s&&(t.z[e].splice(a,1,0),this.setFlagDate(i,e,a,s),this.DFS(t,e+1,a,n,r,s,i),this.DFS(t,e-1,a,n,r,s,i),this.DFS(t,e,a+1,n,r,s,i),this.DFS(t,e,a-1,n,r,s,i),this.DFS(t,e+1,a+1,n,r,s,i),this.DFS(t,e-1,a-1,n,r,s,i),this.DFS(t,e+1,a-1,n,r,s,i),this.DFS(t,e-1,a+1,n,r,s,i))},switch2DFlag:function(t){let e;const a=t.pointIndex[1],s=t.pointIndex[0],i=this.chartModel.z[a][s];let n={trace:null,flag:{isDefault:!0,startXaxis:this.data[0].x[a],endXaxis:this.data[0].x[a],startYaxis:this.data[0].y[s],endYaxis:this.data[0].y[s],availableFlags:this.getAvailableFlagsByCode(i)}};this.data.some(t=>"selection"===t.name)||(this.saveModelHistory(),n.trace=this.getSelectionZoneCopy(),e={x:this.chartModel.x.map(t=>t),y:this.chartModel.y.map(t=>t),z:this.chartModel.z.map(t=>t.map(t=>t))},this.setConnectedComponent(e,a,s,i,n),this.addSelectionZone(n.trace),this.bind2DFlagListener(n.flag))},eraseTargetFlag:function(t){let e,a;const s=this.charts["Main chart"];this.isTimeSeries&&t?(e=s.flags.find(e=>e.id===t.id),e&&(this.setChartModelStateByIndex(t,null),this.freshShapes(),a=this.setChartModelStateByIndex(e,null),this.flags=this.addFlagShape(a.min,a.max),this.submit1DModel())):this.is2dChart&&this.chartModel&&this.chartModelHistory[0]&&(this.chartModel.z=this.chartModelHistory[0].z.map(t=>t.map(t=>t)),this.set2DModelByIndex(this.originFlag,null,!0),this.updateTargetTrace("flags",this.chartModel),this.updateModel(!0,this.originFlag,this.originFlag),this.removeTraceByName(["selection"]))},restore1DFlags:function(t){t&&(this.currentFlag=null,this.setChartModelStateByIndex(t,null),this.freshShapes())},deleteFlagsHandler:function(){const{checkboxState:t}=this.$store.state.common.coverageFlagsState;this.currentFlag=null,i()("#"+this.getChartId+" .select-outline").remove()},setFlagDescription:function(t,e){let a;t&&e&&this.currentFlag&&(this.currentFlag.description=e.description,a=t.find(t=>this.isSameFlag(t,this.currentFlag)),a&&(a.description=this.currentFlag.description))},set1dAvailableFlag:function(t){let e,a;const{code:s}=t,{sessionFlags:i}=this.$store.state.common;this.currentFlag&&(a=this.flag?this.flag:this.currentFlag,this.setChartModelStateByIndex(this.currentFlag,null),e=this.setChartModelStateByIndex(a,s),this.flags=this.addFlagShape(e.min,e.max),this.currentFlag.availableFlags=[t],this.setFlagDescription(i,t),this.notifyCovrageFlagsState())},set2dAvailableFlag:function(t){let e;const a=this.currentFlag.availableFlags,{sessionFlags:s}=this.$store.state.common;t&&a&&t.code!==a[0].code&&(e=this.set2DModelByIndex(this.currentFlag,t.code,!1),this.updateTargetTrace("flags",this.chartModel),this.currentFlag.availableFlags=[t],this.removeTraceByName(["selection"]),this.drawSelectionZone(e,t.code),this.notify2DCovrageFlagsState()),this.setFlagDescription(s,t)},setCurrentFlag:function(t,e){const a=this.currentSession.charts[0].flags[t];a&&a.editable&&(this.currentFlag=this.flags[t],e||this.$store.commit("updateCurrentFlag",Object.assign({},a)))},setCurrentFlagById:function(t,e){let a;const s=this.currentSession.charts[0].flags.find(e=>e.id===t);s&&(a=this.flags.findIndex(t=>this.isSameFlag(t,s)),-1!==a&&(this.currentFlag=this.flags[a],this.currentFlagId=t,e||this.$store.commit("updateCurrentFlag",Object.assign({},s))))},set2DFlagCoords:function(t){let e;const{availableFlags:a}=t;this.isSameFlag(t,this.currentFlag)||(this.set2DModelByIndex(this.currentFlag,null,!1),e=this.set2DModelByIndex(t,a[0].code,!1),this.updateTargetTrace("flags",this.chartModel),this.removeTraceByName(["selection"]),this.drawSelectionZone(e,a[0].code),this.currentFlag=t,this.notify2DCovrageFlagsState())},set1DFlagCoords:function(){let t;const e=this.flag?this.flag.availableFlags:null,{selectedFlag:a}=this.$store.state.common,s=a||e[0];e&&a&&this.flag&&(this.setChartModelStateByIndex(this.currentFlag,null),t=this.setChartModelStateByIndex(this.flag,s.code),t&&(this.flags=this.addFlagShape(t.min,t.max,s),this.currentFlag=this.flag,this.notifyCovrageFlagsState()))},isCurrentFlagMainChartFlag:function(){let t=!1,e=this.currentSession.charts[0];return e&&this.currentFlag&&(t=this.flagExist(e.flags,this.flagToPeriod(this.currentFlag,e))),t},cancelFlag:function(t){void 0!==t&&this.isMainChart&&!this.isCurrentFlagMainChartFlag()&&this.addFlagListener()},deleteFlags:function(t){let e;const{sessionFlags:a}=this.$store.state.common;t&&(e=this.flags.filter(t=>"rect"!==t.type),this.flags=[...this.flags.filter(e=>this.isPeriodInPeriod(e,t,!0)),...e],a&&this.$store.commit("updateSessionFlags",a.filter(e=>this.isPeriodInPeriod(e,t,!0))),this.addFlagListener())},getYaxisMinMaxValues:function(){let t={};return this.data&&this.data.forEach(e=>{e&&e.y&&(void 0===t.min&&void 0===t.max&&(t.min=e.y[0],t.max=e.y[0]),e.y.forEach(e=>{e&&(e<t.min&&(t.min=e),t.max<e&&(t.max=e))}))}),t},deleteFlagsCoverage:function(t){t&&(this.isTimeSeries?this.flags=this.getFilterFlags(this.flags,t,!0):this.is2dChart&&(this.flags2d=this.getFilterFlags(this.flags2d,t,!0)))},applyFlagsCoverage:function(t){const{selectedFlag:e}=this.$store.state.common;t&&(this.deleteFlagsHandler(!1),this.flags=this.getFilterFlags(this.flags,t,!0),e&&e.color&&(t.availableFlags=[e]),this.drawFlag(t,!0,t))},overwriteProfiles:function(){let t,e;const a=this.$store.state.common.coverageFlagsState;this.currentFlag&&a&&a.modelState&&(t=this.currentFlag.availableFlags,this.removeTraceByName(["selection"]),e=this.set2DModelByIndex(this.currentFlag,t[0].code,!1),this.updateTargetTrace("flags",this.chartModel),this.drawSelectionZone(e,t[0].code))},restore2DProfiles:function(){this.chartModelHistory&&this.chartModelHistory[0]&&(this.chartModel.z=this.chartModelHistory[0].z.map(t=>t.map(t=>t)),this.updateTargetTrace("flags",this.chartModel),this.removeTraceByName(["selection"]))},coverage1DFlagsHandler:function(){let t,e;const{selectedFlag:a}=this.$store.state.common;a&&this.currentFlag&&(t=a.code,this.setChartModelStateByIndex(this.currentFlag,null),e=this.setChartModelStateByIndex(this.flag,t),this.flags=this.addFlagShape(e.min,e.max))},addFlags:function(t,e){let a;t&&0<t.length&&this.drawFlags(t,!0),e&&0<e.length&&e.forEach(t=>{a=this.setChartModelStateByIndex(t,null),this.flags=this.addFlagShape(a.min,a.max)}),(t&&0<t.length||e&&0<e.length)&&this.submit1DModel()}}}},304:function(t,e,a){var s={"./en.json":305,"./fr.json":306};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id=304},305:function(t){t.exports=JSON.parse('{"appbar":{"login":"Login","logout":"Logout","data_validation_tool":"Data validation tool"},"common":{"ok":"OK","no":"No","yes":"Yes","more":"More","save":"Save","edit":"Edit","chart":"Chart","close":"Close","state":"State","redColor":"Red","method":"Method","cancel":"Cancel","create":"Create","greyColor":"Grey","blueColor":"Blue","pinkColor":"Pink","actions":"Actions","endDate":"End date","whiteColor":"White","blackColor":"Black","greenColor":"Green","endTime":"End time","layering":"Layering","deletion":"Deletion","continue":"Continue","yellowColor":"Yellow","purpleColor":"Purple","orangeColor":"Orange","parameter":"Parameter","label_noData":"No data","startDate":"Start date","startTime":"Start time","skyBlueColor":"Sky blue","in_progress":"In progress","secondaryChart":"Secondary Chart","dataValidationTool":"Data validation tool","message_greaterThan":"The end date must be greater than the start date"},"configuration":{"label_cancel":"Cancel","label_ok":"@:common.ok","label_product":"Product","label_continue":"Continue","label_state":"@:common.state","label_chart":"@:common.chart","label_mainChart":"Main chart","label_newSession":"New session","label_create":"@:common.create","label_productSid":"Product SID","label_sessions":"Sessions list","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_editSession":"@:common.edit","label_sessionsList":"Sessions list","label_creationDate":"Creation date","label_sessionClose":"@:common.close","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_secondaryChart":"Secondary Chart","label_instrumentName":"Instrument name","label_inProgress":"@:common.in_progress","message_existSession":"This session exists","message_openSession":"Open session","label_continueSession":"Continue a session","message_greaterThan":"@:common.message_greaterThan","label_parameterToValidate":"Parameters to Validate","message_sessionHasBeenDeleted":"This session has been deleted","message_mainParameterInLinkedParameters":"Main parameter cannot be contained in linked parameters"},"session":{"label_day":"Day","label_add":"Add","label_name":"Name","label_open":"Open","label_week":"Week","label_send":"Send","label_year":"Year","label_line":"Line","label_hide":"Hide","label_month":"Month","label_color":"Color","label_colors":"Colors","label_clear":"Clear","label_overwrite":"Overwrite","label_times":"Times","label_value":"Values","label_january":"January","label_february":"February","label_march":"March","label_april":"April","label_may":"May","label_june":"June","label_july":"July","label_august":"August","label_ok":"@:common.ok","label_cancel":"@:common.cancel","label_september":"September","label_october":"October","label_november":"November","label_december":"December","label_state":"State","label_windUp":"Close","label_export":"Export","label_remove":"Remove","label_format":"Format","label_delete":"Delete","label_flags":"Flag(s)","label_submit":"Submit","label_period":"Period","label_import":"Import","label_diplay":"Display","label_allDay":"All day","label_profile":"Profile","label_editing":"Editing","label_download":"Download","label_profiles":"Profiles","label_creationDate":"Creation date","label_description":"Description","label_no":"@:common.no","label_selection":"Flag","label_selections":"Flags","label_periods":"Periods","label_general":"General","label_notSeen":"Not Seen","label_yes":"@:common.yes","label_newName":"New name","label_scatter":"Scatter","label_validate":"Validate","label_sessions":"Sessions","label_coverage":"Coverage","label_altitude":"Altitude","label_threshold":"Threshold","label_thresholds":"Thresholds","label_fileFormat":"File format","label_thresholdMin":"Threshold min","label_thresholdMax":"Threshold max","label_save":"@:common.save","label_edit":"@:common.edit","label_colorScale":"ColorScale","label_addChart":"Add chart","label_newPeriod":"New period","label_closeMode":"Close mode","label_validation":"Validation","label_emptyName":"Empty name","label_chart":"@:common.chart","label_emptyList":"Empty list","label_close":"@:common.close","label_chartName":"Chart name","label_exportOfPeriod":"Export","label_mainChart":"Main chart","label_instrument":"Instrument","label_workPeriod":"Work period","label_altitudeMax":"AltitudeMax","label_altitudeMin":"AltitudeMin","label_displayMode":"Display mode","label_renameChart":"Rename chart","label_closing":"Close the period","label_invalidation":"Invalidation","label_alreadySeen":"Already Seen","label_removeChart":"Remove chart","label_actions":"@:common.actions","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_addNewColor":"Add new color","label_vProfile":"Vertical profile","label_addParameter":"Add parameter","label_layering":"@:common.layering","label_deletion":"@:common.deletion","label_qualityFlags":"Quality flags","label_hProfile":"Horizontal profile","label_notValidated":"Not controlled","label_addParameters":"Add parameters","label_addColorScale":"Add colorScales","label_currentPeriod":"Current period","label_chartExist":"This chart exists","label_parameter":"@:common.parameter","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_sendMySession":"Send my session","label_closeSession":"Close the session","label_parameterName":"Parameter name","label_instrumentName":"Instrument name","label_availableFlags":"Available Flags","label_editColorScale":"Edit colorScales","label_deleteSelection":"Delete selection","label_closingOfPeriod":"Close the period","label_alreadyValidated":"Already checked","label_flagsCopy":"Flags copy","label_removeColorScale":"Remove colorScales","label_dataNotAvailable":"Data not available","label_complementaryFlag":"Complementary flag","label_nonDeletableChart":"Non-deletable chart","label_displayManagement":"Display management","label_secondaryChart":"@:common.secondaryChart","label_submittedSelections":"Submitted selections","label_automaticManagement":"Automatic management","label_partiallyControlled":"Partially controlled","label_auxiliaryInstrument":"Instrument","label_chartSynchronization":"Charts synchronization","label_workPeriodDef":"Definition of the working period","label_chartDeSynchronization":"Charts desynchronization","label_selectionBorderColor":"Selection border color","label_periodClosure":"Closing of the current period","label_selectionBackgroundColor":"Selection background color","message_unknownData":"Unknown data","message_existName":"This name exist","message_dataNotAvailable":"Data not available","message_existSelection":"This session exist","message_chooseQualityFlag":"Choose quality flag","message_recordedSelection":"Recorded selection","message_chooseSelection":"Please choose a selection","message_renameChart":"Do you want to rename the chart","message_overwriteFlags":"Do you want to overwrite available flags ?","message_delete":"Are you sure you want to delete this selection ?","message_deleteChart":"Are you sure you want to delete this chart ?","message_novalidateddataflag":"Flag associated with the remaining data","message_deleteSession":"Are you sure you want to delete this session ?","message_thresholdMinGreaterThanThresholdMax":"Threshold min > Threshold max","message_deleteParameter":"Are you sure you want to delete this parameter ?","message_deleteColorScale":"Are you sure you want to delete this colorScale ?","message_canNotEdit":"Selection not edited, because an identical selection exists","message_closeCurrentPeriod":"You are about to close the current period. Once closed, it will no longer be editable.","message_closeSession":"You are about to submit your session to CDS. Please note, once submitted, it will no longer be editable. Would you like to continue ?"},"worksFlow":{"validation":"Validation","view_selection":"Selection"}}')},306:function(t){t.exports=JSON.parse('{"appbar":{"login":"Se connecter","logout":"Se déconnecter","data_validation_tool":"Outil de validation des données"},"common":{"ok":"OK","no":"Non","yes":"Oui","more":"Plus","state":"État","edit":"Éditer","method":"Mode","close":"Fermer","create":"Créer","cancel":"Annuler","blueColor":"Bleu","greyColor":"Gris","pinkColor":"Rose","redColor":"Rouge","blackColor":"Noir","greenColor":"Vert","chart":"Graphique","actions":"Actions","save":"Enregistrer","whiteColor":"Blanc","yellowColor":"Jaune","orangeColor":"Orange","purpleColor":"Violet","continue":"Continuer","sessionClose":"Fermée","parameter":"Paramètre","in_progress":"En cours","endDate":"Date de fin","deletion":"Supression","endTime":"Heure de fin","layering":"Superposition","skyBlueColor":"Bleu ciel","startDate":"Date de début","startTime":"Heure de début","secondaryChart":"Graphique secondaire","dataValidationTool":"Outil de validation des données","message_greaterThan":"La date de fin doit être supérieur à la date de début"},"configuration":{"label_ok":"@:common.ok","label_cancel":"Annuler","label_product":"Produit","label_continue":"Continuer","label_state":"@:common.state","label_create":"@:common.create","label_productSid":"Produit SID","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_editSession":"@:common.edit","label_newSession":"Nouvelle session","label_sessions":"Liste des sessions","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_mainChart":"Graphique principal","label_creationDate":"Date de création","label_inProgress":"@:common.in_progress","label_sessionsList":"Liste des sessions","label_sessionClose":"@:common.sessionClose","label_instrumentName":"Nom de l\'instrument","label_secondaryChart":"Graphique secondaire","message_existSession":"Cette session existe","message_openSession":"Session ouverte","label_continueSession":"Continuer une session","label_parameterToValidate":"Paramètres à valider","message_greaterThan":"@:common.message_greaterThan","message_sessionHasBeenDeleted":"Cette session a été supprimer","message_mainParameterInLinkedParameters":"Le paramètre principal ne peut pas être contenu dans les paramètres liés"},"session":{"label_name":"Nom","label_day":"Jour","label_month":"Mois","label_state":"État","label_line":"Ligne","label_year":"Année","label_times":"Temps","label_open":"Ouvrir","label_add":"Ajouter","label_windUp":"Clore","label_value":"Valeurs","label_week":"Semaine","label_send":"Envoyer","label_clear":"Effacer","label_color":"Couleur","label_colors":"Couleurs","label_overwrite":"Écraser","label_period":"Période","label_january":"Janvier","label_february":"Février","label_march":"Mars","label_april":"Avril","label_may":"Mai","label_june":"Juin","label_july":"Juillet","label_ok":"@:common.ok","label_august":"Août","label_september":"Septembre","label_october":"Octobre","label_november":"Novembre","label_december":"Décembre","label_delete":"Effacer","label_hide":"Cacher","label_editing":"Édition","label_no":"@:common.no","label_notSeen":"Non vu","label_scatter":"Point","label_format":"Format","label_profile":"Profil","label_import":"Importer","label_general":"Général","label_export":"Exporter","label_profiles":"Profils","label_threshold":"Seuil","label_thresholds":"Seuils","label_thresholdMin":"Seuil min","label_thresholdMax":"Seuil max","label_emptyList":"Liste vide","label_parameterName":"Nom du paramètre","label_periods":"Périodes","label_diplay":"Affichage","label_remove":"Supprimer","label_submit":"Soumettre","label_yes":"@:common.yes","label_flags":"Drapeau(x)","label_validate":"Valider","label_sessions":"Sessions","label_selection":"Drapeau","label_altitude":"Altitude","label_availableFlags":"Drapeaux disponibles","label_selections":"Drapeaux","label_edit":"@:common.edit","label_emptyName":"Nom vide","label_save":"@:common.save","label_newName":"Nouveau nom","label_coverage":"Couverture","label_alreadySeen":"Déjà vu","label_validation":"Validation","label_download":"Télécharger","label_close":"@:common.close","label_closeMode":"Mode clore","label_creationDate":"Date de création","label_chart":"@:common.chart","label_noData":"Pas de données","label_instrument":"Instrument","label_cancel":"@:common.cancel","label_description":"Description","label_altitudeMax":"AltitudeMax","label_altitudeMin":"AltitudeMin","label_allDay":"Toute la journée","label_invalidation":"Invalidation","label_closing":"Clore la période","label_vProfile":"Profil vertical","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_actions":"@:common.actions","label_newPeriod":"Nouvelle période","label_layering":"@:common.layering","label_deletion":"@:common.deletion","label_chartName":"Nom du graphique","label_exportOfPeriod":"Exportation","label_hProfile":"Profil horizontal","label_notValidated":"Non controlées","label_displayMode":"Mode d’affichage","label_fileFormat":"Format de fichier","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_resetAxes":"Réinitialiser les axes","label_parameter":"@:common.parameter","label_workPeriod":"Période de travail","label_addChart":"Ajouter un graphique","label_closeSession":"clore la session","label_currentPeriod":"Période actuelle","label_chartExist":"Ce graphique existe","label_mainChart":"Graphique principal","label_colorScale":"Palette de couleurs","label_qualityFlags":"Drapeau de qualité","label_alreadyValidated":"Déjà controlées","label_closingOfPeriod":"Clore la période","label_sendMySession":"Envoyer ma session","label_renameChart":"Renommer le graphique","label_addParameter":"Ajouter un paramètre","label_instrumentName":"Nom de l\'instrument","label_removeChart":"Supprimer un graphique","label_addParameters":"Ajout des paramètres","label_deleteSelection":"Supprimer la sélection","label_secondaryChart":"@:common.secondaryChart","label_submittedSelections":"Sélections soumises","label_automaticManagement":"Gestion automatique","label_dataNotAvailable":"Données non disponibles","label_displayManagement":"Gestion de l’affichage","label_addNewColor":"Ajouter une nouvelle couleur","label_complementaryFlag":"Drapeau complémenataire","label_flagsCopy":"Copie de drapeaux","label_nonDeletableChart":"Graphique non supprimable","label_selectionBorderColor":"Couleur de la bordure","label_auxiliaryInstrument":"Instrument","label_editColorScale":"Éditer une palette de couleurs","label_partiallyControlled":"Partiellement contrôlées","label_addColorScale":"Ajouter une palette de couleurs","label_periodClosure":"Fermeture de la période courante","label_workPeriodDef":"Définition de la période de travail","label_removeColorScale":"Supprimer une palette de couleurs","label_chartSynchronization":"Synchronisation des graphiques","label_chartDeSynchronization":"Désynchronisation des graphiques","label_selectionBackgroundColor":"Couleur d\'arrière-plan de la sélection","message_existName":"Ce nom existe","message_unknownData":"Données inconnues","message_existSelection":"Cette selection existe","message_recordedSelection":"Sélection enregistrée","message_dataNotAvailable":"Données non disponibles","message_chooseSelection":"Veuillez choisir une sélection","message_renameChart":"Voulez-vous renommer le graphique","message_chooseQualityFlag":"Choisissez le drapeau de qualité","message_deleteChart":"Voulez-vous vraiment supprimer le graphique","message_thresholdMinGreaterThanThresholdMax":"Seuil min > Seuil max","message_novalidateddataflag":"Drapeau associé aux données restantes","message_overwriteFlags":"Voulez-vous écraser les drapeaux disponibles ?","message_delete":"Êtes-vous sûr de vouloir supprimer cette sélection ?","message_deleteSession":"Êtes-vous sûr de vouloir supprimer cette session ?","message_deleteParameter":"Êtes-vous sûr de vouloir supprimer ce paramètre ?","message_canNotEdit":"Sélection non éditée, car une sélection identique existe","message_deleteColorScale":"Êtes-vous sûr de vouloir supprimer cette palette ?","message_closeCurrentPeriod":"Vous êtes sur le point de clore la période courante. Une fois fermée, elle ne sera plus modifiable.","message_closeSession":"Vous êtes sur le point de soumette votre session au CDS. Attention, une fois soumise, celle-ci ne sera plus modifiable. Souhaitez vous continuer ?"},"worksFlow":{"validation":"Validation","view_selection":"Sélection"}}')},324:function(t,e,a){},325:function(t,e,a){},326:function(t,e,a){},327:function(t,e,a){},328:function(t,e,a){},367:function(t,e,a){"use strict";a(324)},368:function(t,e,a){"use strict";a(325)},371:function(t,e,a){"use strict";a(326)},372:function(t,e,a){"use strict";a(327)},373:function(t,e,a){"use strict";a(328)},392:function(t,e,a){"use strict";a.r(e);var s=a(0),i=a(323),n=a.n(i),r=(a(113),a(291)),o={name:"aeris-datavalidation-homepage",watch:{$route(){Object(r.a)()},"$store.state.common.hideHomeParallax":{handler:function(){const{hideHomeParallax:t}=this.$store.state.common;t&&(this.hideHomeParallax=t)},immediate:!0}},data:function(){return{hideHomeParallax:!1}},computed:{isAuthenticated:()=>s.default.$keycloak.authenticated}},l=a(18),c=(Object(l.a)(o,(function(){var t=this._self._c;return this.hideHomeParallax?this._e():t("v-parallax",{attrs:{src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg",height:900}},[t("h3",[this._v("Homepage")])])}),[],!1,null,"403f4dc4",null).exports,a(279)),d=a(282);const h="https://jupyter.icare.univ-lille.fr:5055";var u={name:"aeris-datavalidation-adminpage",components:{},data:()=>({products:[],product:null,files:[],fileObj:null,file:null,instruments:[],instrument:null,availableFlag:null,availableFlags:[]}),watch:{product:function(){const t=this.product["Product sid"];t&&this.getExternalRessources(h+"/getfiles/"+t,t=>{t&&(this.fileObj=t,this.file=JSON.stringify(t,null,"\t"))})},file:function(){const t={uuid:this.product["Product sid"],rootUrl:h,infos:{path:"/getfiles",type:"",xaxisName:"",yaxisName:"",name:this.fileObj.Instrument,minimumStartTime:this.fileObj["Minimum start time"],maximumEndTime:this.fileObj["Maximum end time"]},availableFlags:[],managersEmail:[],parameters:[],auxParameters:[]};this.instrument=JSON.stringify(t,null,"\t"),this.initPametertData(t=>{console.log("Test parameterData : ",t)})}},mixins:[d.a],mounted(){this.initForm()},methods:{dateToUtc:c.e,initForm:function(){this.initAvailableFlags()},initAvailableFlags:function(){this.getAvailableFlags(t=>{this.availableFlags=t,this.initProducts()})},initProducts:function(){this.getExternalRessources(h+"/products",t=>{t&&(this.products=t.sort((function(t,e){return t["Product sid"].localeCompare(e["Product sid"])})))})},addDayToDate:function(t,e){return new Date(new Date(t).getTime()+864e5*e).toDateString()},completeNumber:function(t){return Math.floor(t/10)<=0?"0"+t:t},initPametertData:function(t){const e=this.dateToUtc(this.fileObj["Minimum start time"]),a=this.dateToUtc(this.fileObj["Minimum start time"],5),s=h+"/getdata/"+this.product["Product sid"]+"?start_time="+e+"&end_time="+a;this.getExternalRessources(s,e=>{t&&t(e)})}}},m=(Object(l.a)(u,(function(){var t=this,e=t._self._c;return e("v-card",[e("v-container",[e("v-content",[e("v-autocomplete",{attrs:{items:t.products,name:"Product sid","item-text":"Product sid","item-value":"Product sid","data-cy":"sessionformparameterstovalid-autocomplete",label:"Produits","return-object":""},model:{value:t.product,callback:function(e){t.product=e},expression:"product"}}),t._v(" "),e("v-subheader",[t._v("Fichier")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.file,expression:"file"}],attrs:{rows:"10",cols:"80",disabled:!1},domProps:{value:t.file},on:{input:function(e){e.target.composing||(t.file=e.target.value)}}}),t._v(" "),e("v-select",{attrs:{name:"infos.name","item-text":"infos.name","item-value":"infos.name","data-cy":"sessionFormInstrumentName-select",label:"Courriels des gestionnaires",required:"","return-object":""}}),t._v(" "),e("v-select",{attrs:{name:"infos.name","item-text":"infos.name","item-value":"infos.name","data-cy":"sessionFormInstrumentName-select",label:"Paramètres",required:"","return-object":""}}),t._v(" "),e("v-select",{attrs:{name:"infos.name","item-text":"infos.name","item-value":"infos.name","data-cy":"sessionFormInstrumentName-select",label:"Paramètres auxiliares",required:"","return-object":""}}),t._v(" "),e("v-select",{attrs:{items:t.availableFlags,name:"label","item-text":"label","item-value":"label","data-cy":"sessionFormInstrumentName-select",label:"Drapeaux disponibles",required:"","return-object":""},model:{value:t.availableFlag,callback:function(e){t.availableFlag=e},expression:"availableFlag"}}),t._v(" "),e("v-subheader",[t._v("Instrument")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.instrument,expression:"instrument"}],attrs:{rows:"10",cols:"80",disabled:!1},domProps:{value:t.instrument},on:{input:function(e){e.target.composing||(t.instrument=e.target.value)}}})],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{type:"submit",color:"blue darken-1","data-cy":"sessionformcreate-button",text:""},on:{click:()=>{}}},[t._v("\n          "+t._s(t.$t("configuration.label_create"))+"\n        ")])],1)],1)],1)}),[],!1,null,"0d2b20d2",null).exports,a(303)),p=a(280),g=(a(281),a(289)),f=a.n(g);const v="M314.222 197.78c51.091 51.091 54.377 132.287 9.75 187.16-6.242 7.73-2.784 3.865-84.94 86.02-54.696 54.696-143.266 54.745-197.99 0-54.711-54.69-54.734-143.255 0-197.99 32.773-32.773 51.835-51.899 63.409-63.457 7.463-7.452 20.331-2.354 20.486 8.192a173.31 173.31 0 0 0 4.746 37.828c.966 4.029-.272 8.269-3.202 11.198L80.632 312.57c-32.755 32.775-32.887 85.892 0 118.8 32.775 32.755 85.892 32.887 118.8 0l75.19-75.2c32.718-32.725 32.777-86.013 0-118.79a83.722 83.722 0 0 0-22.814-16.229c-4.623-2.233-7.182-7.25-6.561-12.346 1.356-11.122 6.296-21.885 14.815-30.405l4.375-4.375c3.625-3.626 9.177-4.594 13.76-2.294 12.999 6.524 25.187 15.211 36.025 26.049zM470.958 41.04c-54.724-54.745-143.294-54.696-197.99 0-82.156 82.156-78.698 78.29-84.94 86.02-44.627 54.873-41.341 136.069 9.75 187.16 10.838 10.838 23.026 19.525 36.025 26.049 4.582 2.3 10.134 1.331 13.76-2.294l4.375-4.375c8.52-8.519 13.459-19.283 14.815-30.405.621-5.096-1.938-10.113-6.561-12.346a83.706 83.706 0 0 1-22.814-16.229c-32.777-32.777-32.718-86.065 0-118.79l75.19-75.2c32.908-32.887 86.025-32.755 118.8 0 32.887 32.908 32.755 86.025 0 118.8l-45.848 45.84c-2.93 2.929-4.168 7.169-3.202 11.198a17.31 173.31 0 0 1 4.746 37.828c.155 10.546 13.023 15.644 20.486 8.192 11.574-11.558 30.636-30.684 63.409-63.457 54.733-54.735 54.71-143.3-.001-197.991z",b="M304.083 405.907c4.686 4.686 4.686 12.284 0 16.971l-44.674 44.674c-59.263 59.262-155.693 59.266-214.961 0-59.264-59.265-59.264-155.696 0-214.96l44.675-44.675c4.686-4.686 12.284-4.686 16.971 0l39.598 39.598c4.686 4.686 4.686 12.284 0 16.971l-44.675 44.674c-28.072 28.073-28.072 73.75 0 101.823 28.072 28.072 73.75 28.073 101.824 0l44.674-44.674c4.686-4.686 12.284-4.686 16.971 0l39.597 39.598zm-56.568-260.216c4.686 4.686 12.284 4.686 16.971 0l44.674-44.674c28.072-28.075 73.75-28.073 101.824 0 28.072 28.073 28.072 73.75 0 101.823l-44.675 44.674c-4.686 4.686-4.686 12.284 0 16.971l39.598 39.598c4.686 4.686 12.284 4.686 16.971 0l44.675-44.675c59.265-59.265 59.265-155.695 0-214.96-59.266-59.264-155.695-59.264-214.961 0l-44.674 44.674c-4.686 4.686-4.686 12.284 0 16.971l39.597 39.598zm234.828 359.28l22.627-22.627c9.373-9.373 9.373-24.569 0-33.941L63.598 7.029c-9.373-9.373-24.569-9.373-33.941 0L7.029 29.657c-9.373 9.373-9.373 24.569 0 33.941l441.373 441.373c9.373 9.372 24.569 9.372 33.941 0z",y="M504 416H32V72a8 8 0 0 0-8-8H8a8 8 0 0 0-8 8v360a16 16 0 0 0 16 16h488a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8zM160 312a24 24 0 1 0-24-24 24 24 0 0 0 24 24zm256-160a24 24 0 1 0-24-24 24 24 0 0 0 24 24zm-224 0a24 24 0 1 0-24-24 24 24 0 0 0 24 24zm192 160a24 24 0 1 0-24-24 24 24 0 0 0 24 24zm-96-64a24 24 0 1 0-24-24 24 24 0 0 0 24 24z",D="M117.65 277.65c6.25 6.25 16.38 6.25 22.63 0L192 225.94l84.69 84.69c6.25 6.25 16.38 6.25 22.63 0L409.54 200.4l29.49 29.5c15.12 15.12 40.97 4.41 40.97-16.97V112c0-8.84-7.16-16-16-16H363.07c-21.38 0-32.09 25.85-16.97 40.97l29.5 29.49-87.6 87.6-84.69-84.69c-6.25-6.25-16.38-6.25-22.63 0l-74.34 74.34c-6.25 6.25-6.25 16.38 0 22.63l11.31 11.31zM496 400H48V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z";var x={data:()=>({data:[],layout:{},config:{},chartname:"",theme:{name:"light",background:"rgb(255,255,255)",plotPaper:"rgb(255,255,255)",grid:"rgb(230,230,230)",text:"rgb(70,70,70)",iconColor:"rgba(68, 68, 68, 0.3)",activecolor:"rgba(212, 10, 10, 0.7)",chartTabColor:"light-blue",flagOpacity:.28,thresholdMaxColor:"rgb(245,6,6)",thresholdMinColor:"rgb(27,27,28)"},componentKey:1,rangeslider:!0,modeBarButtons:[],isInitChartMode:!0,mainChart:"Main chart",chartTitle:"Chart title"}),watch:{data:function(){this.isInitChartMode&&this.isMainChart&&this.data.length===this.charts[this.mainChart].parameters.length&&(this.drawDefaultFlags(),this.isInitChartMode=!1)}},computed:{getChartId:function(){let t="defaultChart";return this.chartName&&this.charts&&(t="chart"+Object.keys(this.charts).indexOf(this.chartName)),t},getStartYaxis:function(){let t=this.data[0].y[0];return this.data[0].y.forEach(e=>{t=e<t?e:t}),t},getEndYaxis:function(){let t=this.data[0].y[0];return this.data[0].y.forEach(e=>{t=t<e?e:t}),t},getLinkChartIcon:function(){const{synchronization:t}=this.$store.state.chartstore;return t?v:b},getTypeOfChart:function(){let t="";return this.currentSession&&(t=this.currentSession.instrument.type),t},isTimeSeries:function(){return"PointSeries"===this.getTypeOfChart},is2dChart:function(){return"Heatmap"===this.getTypeOfChart}},methods:{getDateTime:c.j,isSameDateTime:c.o,initCurrentChart:function(t,e){this.$nextTick(()=>{f()("document").ready(()=>{this.currentSession?(this.chartDiv=document.getElementById(this.getChartId),this.initCurrentChartConf(this.chartDiv,t,e),t&&this.initDefaultParameters(),this.bindChartListener()):(this.chartDiv=document.getElementById(this.getChartId),this.initCurrentChartConf(this.chartDiv,t,e))})})},setIsInitChartMode:function(t){this.isInitChartMode=t},initCurrentChartConf:function(t,e,a){const s=this.getAxisName(!0),i=this.getAxisName(!1),n=this.currentSession?!this.currentSession.scatterMode:this.scatterMode,r=n?y:D;this.charts["Main chart"]&&a&&(this.data=[],this.flags=[],this.layout.shapes=[]),this.scatterMode=n,this.currentSession&&this.defaultthemes&&(this.theme=this.defaultthemes.find(t=>t.name===this.currentSession.theme)),this.initChartsConfig({linkIcon:this.getLinkChartIcon,scatterIcon:r}),this.initLayout(s,"date",i),null===e&&t?this.$Plotly.react(t,this.data,this.layout,this.config):t&&this.$Plotly.newPlot(t,this.data,this.layout,this.config)},setChartTheme:function(t){this.layout.font&&t&&(this.currentSession.theme=t.name,this.theme=this.defaultthemes.find(t=>t.name===this.currentSession.theme),this.layout.plot_bgcolor=this.theme.plotPaper,this.layout.paper_bgcolor=this.theme.plotPaper,this.layout.font.color=this.theme.text,this.layout.title.font.color=this.theme.text,this.layout.legend.bordercolor=this.theme.text,this.layout.modebar.bgcolor=this.theme.background,this.layout.modebar.activecolor=this.theme.activecolor,this.layout.xaxis.gridcolor=this.theme.grid,this.layout.xaxis.tickfont.color=this.theme.text,this.layout.xaxis.title.font.color=this.theme.text,this.layout.yaxis.gridcolor=this.theme.grid,this.layout.yaxis.tickfont.color=this.theme.text,this.layout.yaxis.title.font.color=this.theme.text,this.chartDiv&&this.$Plotly.relayout(this.chartDiv,this.layout),this.updateSession(this.currentSession),this.bindChartListener())},getAxisName:function(t){let e,a,s=t?"Time":"Value";return this.currentSession&&(e=this.currentSession.instrument.xaxis_name,a=this.parameters?this.parameters.map(t=>t.name).join(", "):"Value",s=t?e:a),s},initChartsConfig:function(t){this.isMainChart?this.modeBarButtons=this.getMainChartModeBar(t):this.modeBarButtons=this.getSecondChartsModeBar(),this.initConfig()},getScatterName:function(){const t=this.$t("session.label_displayMode");return(this.currentSession?!this.currentSession.scatterMode:this.scatterMode)?t+" : "+this.$t("session.label_scatter"):t+" : "+this.$t("session.label_line")},setMainChart1DIcons:function(t,e){t&&e&&(t[0].splice(1,0,{name:this.$t("session.label_editing"),icon:{width:500,height:500,path:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},click:()=>{this.setModeBarItem(this.$t("session.label_editing")),this.config.editable=!0,this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config),this.addFlagListener()}}),t[0].splice(2,0,{name:this.getScatterName(),icon:{width:500,height:500,path:e.scatterIcon},click:()=>{this.setModeBarItem(this.getScatterName()),this.scatterMode=!this.currentSession.scatterMode,this.displayModeHandler()}}),t[0].splice(2,0,{name:this.$t("session.label_threshold"),icon:{width:500,height:500,path:"M640 239.87v31.26A15.88 15.88 0 0 1 624.14 287H15.87A15.88 15.88 0 0 1 0 271.13v-31.26A15.88 15.88 0 0 1 15.87 224h608.27A15.88 15.88 0 0 1 640 239.87z"},click:()=>{this.setModeBarItem(this.$t("session.label_threshold")),this.hoverData=null,this.threshold=this.currentSession.threshold,this.enableThresHoldDialog=!0}}))},setMainChart2DIcons:function(t){t&&t[0].push({name:this.$t("session.label_profile"),icon:{width:500,height:500,path:"M496 384H64V80a16 16 0 0 0-16-16H16A16 16 0 0 0 0 80v336a32 32 0 0 0 32 32h464a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-336-64a32 32 0 1 0-32-32 32 32 0 0 0 32 32zm256-160a32 32 0 1 0-32-32 32 32 0 0 0 32 32zm-224 0a32 32 0 1 0-32-32 32 32 0 0 0 32 32zm192 160a32 32 0 1 0-32-32 32 32 0 0 0 32 32zm-96-64a32 32 0 1 0-32-32 32 32 0 0 0 32 32z"},click:()=>{this.layout.dragmode="select",this.profileDialog=!this.profileDialog,this.$Plotly.relayout(this.chartDiv,this.layout)}})},getMainChartModeBarInitConf:function(t){return[["select2d",{name:this.$t("session.label_chartSynchronization"),icon:{width:500,height:500,path:t.linkIcon},click:()=>{this.enableSynchronization()}},{name:this.$t("session.label_flagsCopy"),icon:{width:500,height:500,path:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},click:()=>{this.importDialog=!0}}],[{name:this.$t("session.label_windUp"),icon:{width:500,height:500,path:"M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"},click:()=>{this.closePeriodDialog=!0}},{name:this.$t("session.label_resetAxes"),icon:this.$Plotly.Icons.home,click:()=>{this.resetAxes()}},{name:"Docs",icon:{width:500,height:500,path:"M204.3 32.01H96c-52.94 0-96 43.06-96 96c0 17.67 14.31 31.1 32 31.1s32-14.32 32-31.1c0-17.64 14.34-32 32-32h108.3C232.8 96.01 256 119.2 256 147.8c0 19.72-10.97 37.47-30.5 47.33L127.8 252.4C117.1 258.2 112 268.7 112 280v40c0 17.67 14.31 31.99 32 31.99s32-14.32 32-31.99V298.3L256 251.3c39.47-19.75 64-59.42 64-103.5C320 83.95 268.1 32.01 204.3 32.01zM144 400c-22.09 0-40 17.91-40 40s17.91 39.1 40 39.1s40-17.9 40-39.1S166.1 400 144 400z"},click:()=>{window.open("https://aeris-recette.ipsl.fr/actris-validation/api/swagger-ui.html","_blank"),console.log("docs")}},"sendDataToCloud"]]},getMainChartDefaultModeBar:function(){return[[{name:this.$t("session.label_resetAxes"),icon:this.$Plotly.Icons.home,click:()=>{this.resetAxes()}},"sendDataToCloud"]]},getMainChartModeBar:function(t){let e=[];return this.webcomponent||"defaultChart"===this.getChartId?e=this.getMainChartDefaultModeBar():(e=this.getMainChartModeBarInitConf(t),this.is2dChart?this.setMainChart2DIcons(e):this.setMainChart1DIcons(e,t)),e},getSecondChartsModeBar:function(){return[[{name:this.$t("session.label_resetAxes"),icon:this.$Plotly.Icons.home,click:()=>{this.resetAxes()}},"sendDataToCloud"]]},initConfig:function(){this.config={modeBarButtons:this.modeBarButtons,scrollZoom:!0,displaylogo:!1,displayModeBar:!0,plotlyServerURL:"https://chart-studio.plotly.com"}},initLayout:function(t,e,a){this.layout={height:900,showlegend:!0,selectdirection:this.is2dChart?"any":"h",dragmode:this.isMainChart?"select":"",font:{color:this.theme.text},plot_bgcolor:this.theme.plotPaper,paper_bgcolor:this.theme.plotPaper,title:this.getLayoutTitle(),legend:this.getLayoutLegend(),xaxis:this.getLayoutXaxis(t,e),yaxis:this.getLayoutYaxis(a),shapes:[],modebar:this.getLayoutModeBarConf()}},setLayoutAxis:function(t,e,a,s,i){t&&e&&a&&(this.layout.xaxis=this.getLayoutXaxis(t,e),this.layout.yaxis=this.getLayoutYaxis(a),this.$Plotly.relayout(this.chartDiv,this.layout),this.setAxisShortsNames(s,i))},getLayoutTitle:function(){const t=Object.values(this.charts).find(t=>t.enName===this.chartName);return{text:"Current data set - "+(t?t.title:this.chartTitle),x:.52,font:{color:this.theme.text,family:'"Open Sans", verdana, arial, sans-serif',size:18}}},getLayoutLegend:function(){return{orientation:"v",x:1.02,y:.8,borderwidth:1,bordercolor:this.theme.text,xanchor:"auto",yanchor:"auto"}},getLayoutXaxis:function(t,e,a){let s=[],i=this.theme.text,n="",r="";this.currentSession&&(n=this.currentSession.workPeriod.startDate,r=this.currentSession.workPeriod.endDate,s=a?[n,r]:[],i=a?"green":i);let o={type:e,range:[n,r],gridcolor:this.theme.grid,tickfont:{color:i},title:{text:t,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},fixedrange:!0,margin:this.getXaxisMargin(),rangeslider:{visible:this.rangeslider,y:1}};return a&&(o.tickmode="array",o.side="bottom",o.tickvals=s,o.overlaying="x"),o},getXaxisMargin:function(){return{t:40,b:26,l:72,r:80,pad:0,autoexpand:!0}},getLayoutYaxis:function(t){let e;return e={title:{text:t,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},gridcolor:this.theme.grid,tickfont:{color:this.theme.text},fixedrange:!1,zeroline:!1},e},getLayoutModeBarConf:function(){return{orientation:"h",color:this.theme.iconColor,bgcolor:this.theme.background,activecolor:this.theme.activecolor}},refreshChart:function(){this.componentKey++,this.initCurrentChart(null,!1)}}},C={data:()=>({chartModel:{},selectionZone:{},pointsToDelete:[],isModelInit:!1,chartModelHistory:[]}),methods:{dateToUtc:c.e,isHigherThan:c.n,initModelXAxis:function(){this.chartModel.x&&(this.chartModel.x=this.chartModel.x.map(t=>this.is2dChart?t:null))},initModelYAxis:function(){this.chartModel.y&&this.is2dChart&&(this.chartModel.y=this.chartModel.y.map(t=>t))},initModelZAxis:function(){this.chartModel.z&&this.is2dChart&&(this.chartModel.z=this.chartModel.z.map(t=>t.map(t=>null)))},getModelCopy:function(t){const{x:e,y:a,z:s}=t;return{x:e.map(t=>t),y:a.map(t=>t),z:s.map(t=>t.map(t=>null))}},getSelectionZoneCopy:function(){const{x:t,y:e,z:a}=this.selectionZone&&this.selectionZone.x?this.selectionZone:this.data[0];return{x:t.map(t=>t),y:e.map(t=>t),z:a.map(t=>t.map(t=>null))}},buildChartModel:function(){let t;const{x:e,y:a,z:s,name:i}=this.data[0]?this.data[0]:{};this.isMainChart&&i&&(t=this.charts[this.mainChart].parameters.find(t=>t.name===i),this.data&&this.chartModel.length!==this.data[0].x.length&&(this.chartModel={parameterName:i,instrumentId:t.instrumentId,x:e,y:a,z:s},this.initModelXAxis(),this.initModelYAxis(),this.initModelZAxis(),this.saveModelHistory(),this.is2dChart&&(this.selectionZone=this.getSelectionZoneCopy())))},saveModelHistory:function(){let t={};this.chartModel&&(this.chartModelHistory.splice(0,1),t.parameterName=this.chartModel.parameterName,t.instrumentId=this.chartModel.instrumentId,this.chartModel.x&&void 0===this.chartModel.z&&(t.x=this.chartModel.x.map(t=>t)),this.chartModel.y&&void 0===this.chartModel.z&&(t.y=this.chartModel.y.map(t=>t)),this.chartModel.z&&(t.z=this.chartModel.z.map(t=>t.slice())),this.chartModelHistory.push(t))},saveModelHistoryByIndex:function(t,e,a){void 0!==t&&void 0!==e&&void 0!==a&&this.chartModelHistory[0].z[t].splice(e,1,a)},getChartModelMinMaxIndex:function(t){let e,a,s,i,n,r,o={min:null,max:null,minIndex:-1,maxIndex:-1};const l=this.flagToPeriod(t);return this.data[0]&&l&&void 0===l.minIndex?(n=this.data[0].x.length,r=this.data[0].y.length,s=this.data[0].x.findIndex(t=>this.isHigherThan(t,l.startXaxis)),e=this.data[0].x.findIndex(t=>this.isHigherThan(t,l.endXaxis,!0)),i=this.data[0].y.findIndex(t=>l.startYaxis<=t),a=this.data[0].y.findIndex(t=>l.endYaxis<t),e=-1===e&&this.isHigherThan(l.endXaxis,this.data[0].x[n-1])?n-1:e-1,a=-1===a&&this.data[0].y[r-1]<=l.endYaxis?r-1:a-1,o={min:this.data[0].x[s],max:this.data[0].x[e],minY:this.isTimeSeries?0:this.data[0].y[i],maxY:this.isTimeSeries?1:this.data[0].y[a],minIndex:s,maxIndex:e,minYIndex:i,maxYIndex:a}):l&&void 0!==l.minIndex&&this.data&&this.data[0]&&(o={min:this.data[0].x[l.minIndex],max:this.data[0].x[l.maxIndex],minY:this.isTimeSeries?0:this.data[0].y[l.minYIndex],maxY:this.isTimeSeries?1:this.data[0].y[l.maxYIndex],minIndex:l.minIndex,maxIndex:l.maxIndex,minYIndex:l.minYIndex,maxYIndex:l.maxYIndex,startXaxis:this.dateToUtc(this.data[0].x[l.minIndex]),endXaxis:this.dateToUtc(this.data[0].x[l.maxIndex]),startYaxis:this.isTimeSeries?0:this.data[0].y[l.minYIndex],endYaxis:this.isTimeSeries?1:this.data[0].y[l.maxYIndex]}),o},resetState:function(t,e,a,s,i){i?this.chartModel.x.splice(t+e,1,i):this.chartModel.x.splice(t+e,1,s)},newStatesHandler:function(t,e,a,s,i,n,r){i.thresholdMinCheckBox&&this.data[0].y[t+e]<n.thresholdMin||i.thresholdMaxCheckBox&&n.thresholdMax<this.data[0].y[t+e]?!r&&s?this.chartModel.x.splice(t+e,1,s):this.chartModel.x.splice(t+e,1,a):!s||i.thresholdMinCheckBox||i.thresholdMaxCheckBox?i.thresholdMinCheckBox||i.thresholdMaxCheckBox?!r&&s?this.chartModel.x.splice(t+e,1,s):this.chartModel.x.splice(t+e,1,null):this.chartModel.x.splice(t+e,1,a):this.chartModel.x.splice(t+e,1,s)},addNewFlagState:function(t,e,a,s,i){const{threshold:n}=this.currentSession,{thresholdsStates:r}=this.$store.state.common;a&&r&&!r.thresholdMinCheckBox&&!r.thresholdMaxCheckBox?this.chartModel.x.splice(t+e,1,s):this.newStatesHandler(t,e,s,i,r,n,a)},setFlagState:function(t,e,a,s,i){const{threshold:n}=this.currentSession,{thresholdsStates:r}=this.$store.state.common,o=this.chartModel.x[t+e];r.thresholdMinCheckBox&&this.data[0].y[t+e]<n.thresholdMin?a&&r.thresholdMinCheckBox?this.chartModel.x.splice(t+e,1,s):this.chartModel.x.splice(t+e,1,i):r.thresholdMaxCheckBox&&n.thresholdMax<this.data[0].y[t+e]?a&&r.thresholdMaxCheckBox?this.chartModel.x.splice(t+e,1,s):this.chartModel.x.splice(t+e,1,i):r.thresholdMinCheckBox||r.thresholdMaxCheckBox||(a||null===o?this.chartModel.x.splice(t+e,1,s):this.chartModel.x.splice(t+e,1,i))},set2DModelByIndex:function(t,e,a){let s,i,n,r=null;const o=this.$store.state.common.coverageFlagsState;if(t){r=this.getChartModelMinMaxIndex(t),i=t.availableFlags,n=i[0].code;for(let t=r.minIndex;t<=r.maxIndex;t++)for(let i=r.minYIndex;i<=r.maxYIndex;i++)s=this.chartModelHistory[0].z[t][i],!e||!this.data[0].z||!this.data[0].z[t][i]&&0!==this.data[0].z[t][i]||a||null!==s&&!o.checkboxState?s&&!a||s!==n?this.chartModel.z[t].splice(i,1,s):this.chartModel.z[t].splice(i,1,null):this.chartModel.z[t].splice(i,1,e)}return r},closeModel:function(t){const e=this.data[0];e&&t&&this.chartModel&&(this.chartModel.z=this.chartModel.z.map((a,s)=>a.map((a,i)=>null===a&&e.z[s][i]?t[0].code:a)))},setFlagStateMan:function(t,e,a,s,i){s&&!i?this.chartModel.x.splice(t+e,1,s):this.chartModel.x.splice(t+e,1,a)},setChartModelStateByIndex:function(t,e,a=!1,s=!1,i=!1){let n,r,o,l=!1,c=null;const d=this.chartModelHistory[0],{checkboxState:h}=this.$store.state.common.coverageFlagsState;return t&&d&&(c=this.getChartModelMinMaxIndex(t),n=c.minIndex,r=c.maxIndex,void 0!==n&&void 0!==r&&this.chartModel.x.slice(n,r+1).forEach((r,c)=>{o=d.x[n+c],s&&null===o?this.chartModel.x.splice(n+c,1,e):void 0===t.id&&null!==e?this.addNewFlagState(n,c,h,e,o):a?(!l&&e&&o&&e!==o&&(l=!0),this.setFlagStateMan(n,c,e,o,i)):t.id&&null!==e?this.setFlagState(n,c,h,e,o,t):t.id&&null===e&&t.availableFlags[0].code===o?this.chartModel.x.splice(n+c,1,e):null===e&&this.resetState(n,c,h,e,o)})),l&&this.$store.commit("updateCurrentFlag",this.currentFlag),c},setChartModelState:function(t,e,a,s,i){let n;const r=this.flagToPeriod(t);let o=this.getChartModelMinMaxIndex(r);const l=this.data.find(t=>"flags"===t.name);if(o)for(let t=o.minIndex;t<=o.maxIndex;t++){this.isTimeSeries&&this.chartModel.x.splice(t,1,e);for(let r=o.minYIndex;r<=o.maxYIndex;r++)n=this.data[0].z[t][r]?e:null,i&&this.saveModelHistoryByIndex(t,r,this.chartModel.z[t][r]),void 0===a&&(!s||s&&null===this.chartModel.z[t][r])?this.chartModel.z[t].splice(r,1,n):this.chartModel.z[t][r]===a&&(this.chartModel.z[t].splice(r,1,n),l.z[t].splice(r,1,n))}},resetChartModel:function(){let t;const e=this.currentSession.charts[0],{sessionFlags:a}=this.$store.state.common;this.isMainChart&&e&&(this.selectionZone=null,this.buildChartModel(),a?a.forEach(t=>{this.setChartModelState(this.flagToPeriod(t),t.availableFlags[0].code)}):this.data&&this.chartModel&&(t=this.data.find(t=>"flags"===t.name),t&&(this.chartModel.z=t.z.map(t=>t.map(t=>t)))))},modeltoProfiles:function(t,e){let a=[];const{name:s}=this.data[0],{user:i}=this.$store.state.common,n=t.z.map(t=>t.map(t=>t)),r=this.charts[this.mainChart].parameters.find(t=>t.name===s);return n&&i&&r&&e&&(a=n.map((t,a)=>t.some(t=>null!==t)?{sessionId:this.currentSession.id,codes:t,piEmail:i.email,date:this.dateToUtc(this.data[0].x[a]),parameterToValidate:s,instrumentId:r.instrumentId,description:e.description}:null).filter(t=>null!==t)),a},flushChartModel:function(t,e){let a;const{name:s}=this.data[0],i=this.currentSession.charts[0];s&&t&&e&&(a={z:this.modeltoProfiles(this.chartModel,e),workPeriod:this.currentSession.workPeriod},this.addChartModel(a,t=>{i.chartModel=t}))},flushChartNewStates:function(t,e,a,s,i){const{name:n}=this.data[0];let r,o;const l=this.currentSession.charts[0],c=Object.assign({},l.chartModel),{minIndex:d,maxIndex:h}=this.getChartModelMinMaxIndex(a);a&&(s.slice(d,h+1).forEach((t,e)=>{r=this.dateToUtc(this.data[0].x[d+e]),o=c.z.find(t=>this.isSameDateTime(t.date,r)),t.some(t=>null!==t)?o?o.codes=t:c.z.push({codes:t,sessionId:this.currentSession.id,date:this.dateToUtc(this.data[0].x[d+e]),parameterToValidate:n,instrumentId:l.parameters.find(t=>t.name===n).instrumentId}):o&&(c.z=c.z.filter(t=>t.id!==o.id))}),c.workPeriod=this.currentSession.workPeriod,this.updateChartModel(c,i))},filterModel:function(t,e,a,s){let i,n,r,o=[];this.originFlag?(i=this.getChartModelMinMaxIndex(this.originFlag),a.slice(i.minIndex,i.maxIndex+1).forEach((t,a)=>{t.some(t=>null!==t)||(n=this.dateToUtc(this.data[0].x[i.minIndex+a]),r=e.z.find(t=>this.isSameDateTime(t.date,n)),r&&o.push(r.id))}),0<o.length?this.deleteModelProfiles(o,"",s):s()):s()},updateModel:function(t,e,a){const s=this.currentSession.charts[0],i=Object.assign({},s.chartModel),n=this.chartModel.z.map(t=>t.map(t=>t));n&&this.flushChartNewStates(t,e,a,n,t=>{this.filterModel(e,i,n,()=>{s.chartModel=t})})},chartModelToFlags:function(t){let e,a=[],s=null;return t&&t.x.forEach((i,n)=>{!e||i===e&&n!==t.x.length-1||(a.push({start:s,end:this.data[0].x[n-1],code:e}),s=null,e=null),null===s&&i&&(e=i,s=this.data[0].x[n])}),a}}},_=a(285),S={data:()=>({xRange:[],yRange:[],coverageFlags:[],currentEvent:null,deleteDialog:!1,closePeriodDialog:!1,dateRegex:/\d{4}-\d{2}-\d{2}/g,shapesRegex:/shapes\[\d*\].[xy]\d*/g}),methods:{getFlag:_.f,addHours:c.b,flagExist:_.b,dateToUtc:c.e,getDateTime:c.j,isFlagInFlag:_.i,isHigherThan:c.n,isDateBetWeen:c.m,isSameDateTime:c.o,coordsToPeriod:_.a,getFilterFlags:_.e,sortFlagsByDate:_.m,bindChartListener:function(){this.$forceNextTick(()=>{f()("document").ready(()=>{this.isMainChart&&(this.drawDefaultFlags(),f()(".modebar").on("click",this.modeBarListener),this.chartDiv.on("plotly_hover",this.hoverHandler),this.chartDiv.on("plotly_selected",this.addNewFlag),this.chartDiv.on("plotly_afterplot",this.modeBarHandler),this.chartDiv.on("plotly_click",this.parameterClickHandler),this.chartDiv.on("plotly_restyle",this.parametersStateHandler),f()("#"+this.getChartId).on("click",this.mainChartClickHandler)),this.chartDiv.on("plotly_relayout",this.reLayoutHandler)})})},applyLinkedEffect:function(t){const{synchronization:e,synchronizationData:a}=this.$store.state.chartstore;e&&t&&(t["xaxis.range[0]"]||t["yaxis.range[0]"])?this.$store.commit("updateLinkedDataAxis",t):a&&t.points?this.$store.commit("updateLinkedHoverData",t):this.$store.commit("updateSynchronizationData",{type:t})},hoverHandler:function(t){let e,a=t.points[0];this.tooltipState=!1,this.hoverData=t;const{synchronization:s}=this.$store.state.chartstore;Object(r.a)(),this.profileDialog&&this.hoverData&&this.hoverData.points&&(e={startXaxis:this.hoverData.points[0].x,endXaxis:this.hoverData.points[0].x,startYaxis:this.hoverData.points[0].y,endYaxis:this.hoverData.points[0].y},this.profileIndex=this.getChartModelMinMaxIndex(e)),a&&s&&this.isMainChart&&this.applyLinkedEffect(t),this.tooltipState&&(this.tooltipState=!1)},getActiveElement:function(){let t=null;const e=f()(".modebar"),a=f()(e[0]).find(".active");return a&&(t=f()(a).attr("data-title")),t},mainChartClickHandler:function(){const t=this.getActiveElement();t&&!["Box Select"].some(e=>e===t)&&(this.setModeBarItem(t),t===this.$t("session.label_threshold")?(this.drawThresholds(this.currentSession.threshold,!0),this.enableThresHoldDialog=!0):this.enableThresHoldDialog=!1)},modeBarHandler:function(){let t;const e=f()(".modebar"),a=f()(e[0]).find(".active");a?(t=f()(a).attr("data-title"),this.currentElement&&t!==this.currentModeBarItem&&(f()(a).removeClass("active"),this.currentElement.addClass("active"))):this.currentElement&&this.currentElement.addClass("active")},modeBarListener:function(t){let e;const a=t.target,s=f()(a).is("a")?f()(a):f()(a).is("svg")?f()(a).parent():f()(f()(a).parent()).parent();t&&s&&(e=f()(s).attr("data-title"),this.currentElement=f()(s),this.currentModeBarItem=e,this.isTimeSeries&&this.setEditableMode(e),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config))},setEditableMode:function(t){t&&(this.config.editable="Box Select"!==t&&"Zoom in"!==t&&"Zoom out"!==t&&"Pan"!==t&&t!==this.$t("session.label_chartSynchronization")&&t!==this.$t("session.label_chartDeSynchronization")&&t!==this.$t("session.label_scatter")&&t!==this.$t("session.label_line")&&t!==this.$t("session.label_windUp")&&t!==this.$t("session.label_resetAxes")&&t!==this.$t("session.label_flagsCopy"))},setModeBarItem:function(t){const e=f()(".modebar"),a=f()(e[0]).find(".active"),s=f()(e[0]).find(`[data-title='${t}']`),i=f()(a).attr("data-title"),n=f()(s).attr("data-title");n&&this.isTimeSeries&&this.setEditableMode(n),i&&n&&i!==n?(this.currentElement=f()(s),f()(a).attr("class","modebar-btn"),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config)):n&&(this.currentElement=f()(s),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config))},parametersStateHandler:function(t){const e=t[0],a=t[1];e&&a&&(e.visible&&"legendonly"===e.visible[0]?"flags"===this.data[a[0]].name&&this.setFlagsTracesState(!1):e.visible&&e.visible[0]&&"flags"===this.data[a[0]].name&&this.setFlagsTracesState(!0))},getTargetEndDate:function(t,e){let a,s=t;return t&&(a=this.flags.find(e=>this.isDateBetWeen(t,e.x0,e.x1)),a&&!e&&(s=this.getDateTime(a.x0)),a&&e&&(s=this.getDateTime(a.x1))),s},minMaxPointsToPeriod:function(t,e,a){let s=Object.assign({},t);return t&&t.min&&t.max&&(s={startXaxis:a?this.dateToUtc(t.min):t.min,endXaxis:a?this.dateToUtc(t.max):t.max,startYaxis:e?e.startYaxis:t.minY,endYaxis:e?e.endYaxis:t.maxY,minIndex:t.minIndex,maxIndex:t.maxIndex,minYIndex:t.minYIndex,maxYIndex:t.maxYIndex}),s},getChartPeriod:function(t){let e,a={};return t&&(e=this.getChartModelMinMaxIndex(t),a=this.minMaxPointsToPeriod(e,t,!0)),a},getEventCoords:function(t){let e,a,s,i,n=null;return t&&(e=t.range?t.range.x[0]:t.x0,a=t.range?t.range.x[1]:t.x1,s=t.range?t.range.y[0]:t.y0,i=t.range?t.range.y[1]:t.y1,n={startXaxis:this.isHigherThan(e,a)?a:e,endXaxis:this.isHigherThan(e,a)?e:a,startYaxis:this.is2dChart?s:0,endYaxis:this.is2dChart?i:1}),n},eventDataToCoords:function(t){let e=null;return t&&(e={x0:t["shapes[0].x0"],x1:t["shapes[0].x1"],y0:t["shapes[0].y0"],y1:t["shapes[0].y1"]}),e},addNewFlag:function(t){let e;const a=this.getEventCoords(t);this.setModeBarItem("Box Select"),t&&!this.isSamePeriod(a,this.lastFlag)&&(this.lastFlag=a,e=this.getChartPeriod(a),e&&e.startXaxis&&e.endXaxis&&(this.saveModelHistory(),this.isTimeSeries?this.drawFlag(e,null):this.draw2DFlag(e,a)))},shapeOutBounds:function(t){let e=!1;const a=this.data[0].x[0],s=this.data[0].x[this.data[0].x.length-1];return t&&a&&s&&(e=!this.isDateBetWeen(t.x0,a,s)&&!this.isDateBetWeen(t.x1,a,s)),e},thresholdEventHandler:function(){let t;this.layout&&this.layout.shapes&&(t=this.layout.shapes.filter(t=>"line"===t.type).map(t=>t.y0),t&&this.drawThresholds({hide:!1,thresholdMin:Math.min(...t),thresholdMax:Math.max(...t)},!0))},shapeCoordsToPeriod:function(t){let e={};return t&&Object.keys(t).forEach(a=>{a.includes(".x0")&&(e.x0=this.dateToUtc(t[a])),a.includes(".x1")&&(e.x1=this.dateToUtc(t[a])),a.includes(".y0")&&(e.y0=t[a]),a.includes(".y1")&&(e.y1=t[a])}),e},eraseDefaultFlag:function(t,e){t&&e&&(this.currentEvent=t,this.currentShape=e,this.setChartModelStateByIndex(this.flagToPeriod(e),null,!0,!1,!0))},eraseOutBoundsShape:function(t){const e=this.currentShapes.findIndex(e=>this.isSamePeriod(e,t));0<=e&&(this.layout.shapes.splice(e,1),this.$Plotly.relayout(this.chartDiv,this.layout))},addShapeNewcoords:function(t,e){let a,s,i;t&&(i=this.flagToPeriod(t),s=this.getAvailableFlagsByColor(e.fillcolor)[0],a=this.setChartModelStateByIndex(i,s.code,!0,!1,!1),this.flags=this.addFlagShape(a.min,a.max))},setCurrentFlagByEvent:function(t,e){const a=this.flagToPeriod(t),{sessionFlags:s}=this.$store.state.common;a&&s&&(this.currentFlag=s.find(t=>this.isSamePeriod(t,e)),this.currentFlag.startXaxis=a.startXaxis,this.currentFlag.endXaxis=a.endXaxis)},selectionShapeHandler:function(t){const e=this.currentShapes.find(t=>!this.layout.shapes.some(e=>this.isSamePeriod(t,e,!0)&&t.y0===e.y0&&t.y1===e.y1));e&&(this.eraseDefaultFlag(t,e),this.setCurrentFlagByEvent(t,e),this.shapeOutBounds(t)?this.eraseOutBoundsShape(e):this.addShapeNewcoords(t,e),this.submit1DModel(),this.addFlagListener())},strIncludesRegex:function(t,e){let a,s=!1;return t&&e&&(a=t.toString().match(e),s=a&&0<a.length),s},shapeEventHandler:function(t,e){const a=this.getActiveElement();e&&(Object.values(t).some(t=>this.strIncludesRegex(t,this.dateRegex))?this.selectionShapeHandler(this.shapeCoordsToPeriod(t)):a!==this.$t("session.label_threshold")&&a!==this.$t("session.label_editing")||this.thresholdEventHandler())},isIncludeElement:function(t,e){let a=!1;return t&&e&&(a=t.some(t=>t.includes("shapes")&&t.includes(e))),a},isShapeEvent:function(t){let e=!1;return t&&(e=4===t.length&&this.isIncludeElement(t,"y1")&&this.isIncludeElement(t,"y0")&&this.isIncludeElement(t,"x0")&&this.isIncludeElement(t,"x1")),e},isResetAxes:function(t){return t&&this.layout&&!Object.keys(t).some((t,e)=>t!==Object.keys(this.layout)[e])},isAxisEvent:function(t,e,a,s){return void 0!==t&&void 0!==e||void 0!==a&&void 0!==s},isZoomOutEvent:function(t,e){let a=!1;const{workPeriod:s}=this.currentSession;return t&&e&&s&&(a=this.isHigherThan(s.startDate,t)||this.isHigherThan(e,s.endDate)),a},eventToAxis:function(t){let e={startXaxis:null,endXaxis:null,startYaxis:null,endYaxis:null};return t&&(e={startXaxis:t["xaxis.range"]?t["xaxis.range"][0]:t["xaxis.range[0]"],endXaxis:t["xaxis.range"]?t["xaxis.range"][1]:t["xaxis.range[1]"],startYaxis:t["xaxis.range"]?this.layout.yaxis.range[0]:t["yaxis.range[0]"],endYaxis:t["xaxis.range"]?this.layout.yaxis.range[1]:t["yaxis.range[1]"]},t["xaxis.range"]?e.currentData={"xaxis.range[0]":t["xaxis.range"][0],"xaxis.range[1]":t["xaxis.range"][1],"yaxis.range[0]":this.layout.yaxis.range[0],"yaxis.range[1]":this.layout.yaxis.range[1]}:e.currentData=t),e},reLayoutHandler:function(t){const e=Object.keys(t),{synchronization:a}=this.$store.state.chartstore,{startXaxis:s,endXaxis:i,startYaxis:n,endYaxis:r,currentData:o}=this.eventToAxis(t);this.isResetAxes(t)&&this.isMainChart&&a&&this.$store.commit("updateSynchronizationData",{type:"Reset axes"}),this.tooltipState=!1,e.some(t=>!this.strIncludesRegex(t,this.shapesRegex))||this.shapeEventHandler(o,e),this.isAxisEvent(s,i,n,r)&&this.isMainChart&&a&&this.applyLinkedEffect(o),this.isMainChart&&this.isTimeSeries&&this.config.editable&&this.addFlagListener(),t&&t["xaxis.range"]&&this.layout.xaxis.rangeslider.autorange&&(this.layout.xaxis.rangeslider.autorange=!1,this.$Plotly.relayout(this.chartDiv,this.layout))},isAxisChange:function(t,e,a,s){const{synchronizationData:i}=this.$store.state.chartstore,n=i.startXaxis,r=i.endXaxis,o=i.startYaxis,l=i.endYaxis;return n!==t&&r!==e||o!==a&&l!==s},tooltipMouseLeave:function(){this.tooltipState=!1},tooltipMouseEnter:function(t){let e,a;const s=this.currentSession.charts[0].flags.map(t=>Object.assign({},t)).sort((t,e)=>new Date(t.startXaxis)-new Date(e.startXaxis))[f()(t.currentTarget).attr("data-index")];s&&(e=this.getDateTime(s.startXaxis),a=this.getDateTime(s.endXaxis),this.positionX=t.clientX,this.positionY=t.clientY,this.tooltipContent=this.$t("session.label_startDate")+" : "+e+"</br>",this.tooltipContent+=this.$t("session.label_endDate")+" : "+a+"</br>",this.tooltipContent+=this.$t("session.label_flags")+" : </br>",s.availableFlags.forEach(t=>{this.tooltipContent+=t.code+", "+t.label+"</br>"}),s&&""!==s.description&&(this.tooltipContent+=this.$t("session.label_description")+" : "+s.description),this.tooltipState=!1,setTimeout(()=>{this.tooltipState=!0},100))},parameterClickHandler:function(t){let e;t&&t.points&&!this.profileDialog&&(e=t.points[1],e&&e.data.name.includes("flags")&&!this.data.some(t=>"selection"===t.name)&&this.switch2DFlag(e))},addFlagListener:function(){this.config.editable&&this.$forceNextTick(()=>{let t,e=0,a=f()("#"+this.getChartId).find(".shapelayer")[0];a&&(t=a.children,f()("document").ready(()=>{if(t)for(let a of t)void 0===f()(a).attr("id")&&(f()(a).attr("id","flag"+e),f()(a).attr("pointer-events","auto").on("click",t=>{f()(this.currentElement).attr("data-title")===this.$t("session.label_editing")&&(this.switchFlag(t),this.addFlagListener())}),f()(a).attr("pointer-events","auto").on("mouseenter",t=>{this.tooltipMouseEnter(t)}),f()(a).attr("pointer-events","auto").on("mouseleave",t=>{this.tooltipMouseLeave(t)})),e++}))})},removeFlagsListener:function(){this.flags&&this.$forceNextTick(()=>{let t,e=f()("#"+this.getChartId).find(".shapelayer")[0];e&&(t=e.children,f()("document").ready(()=>{t&&t.forEach(t=>{f()(t).attr("id")&&(f()(t).attr("pointer-events","auto").off(),f()(t).attr("pointer-events","auto").off(),f()(t).attr("pointer-events","auto").off())})}))})},bindFlagListener:function(t){this.currentFlag=t,this.$store.commit("updateCurrentFlag",t),this.notifyCovrageFlagsState()},bind2DFlagListener:function(t){t&&(this.originFlag=t,this.currentFlag=t,this.$store.commit("updateCurrentFlag",Object.assign({},t)))},upDateModeBarIcon:function(){this.config.scrollZoom=!0!==this.config.scrollZoom,this.config.displaylogo=!this.config.displaylogo,this.config.displayModeBar=!this.config.displayModeBar,this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config)},setModeBarIcons:function(t){t&&(this.initChartsConfig(t),this.upDateModeBarIcon(),this.upDateModeBarIcon(),this.updateSession(this.currentSession))},enableSynchronization:function(){const{synchronization:t}=this.$store.state.chartstore,e=t?b:v,a=this.scatterMode?D:y;this.isMainChart&&e&&a&&(this.currentSession.synchronization=!t,this.$store.commit("updateSynchronization",!t),this.setModeBarIcons({linkIcon:e,scatterIcon:a}))},displayModeHandler:function(){const{synchronization:t}=this.$store.state.chartstore,e=t?v:b,a=this.scatterMode?D:y;this.currentSession.scatterMode=this.scatterMode,this.isMainChart&&e&&a&&(this.setModeBarIcons({linkIcon:e,scatterIcon:a}),this.setDisplayMode(this.currentSession.scatterMode))},validateDelete:function(){this.deleteDialog=!1},cancelDelete:function(){this.deleteDialog=!1},closeCurrentPeriod:function(t){const{workPeriod:e}=this.currentSession,a=this.currentSession.parametersToValidate[0],s=a.instrumentId,i=a.name,n=e.startDate,r=e.endDate;e&&this.getParameterPeriods(s,i,n,r,a=>{this.isSamePeriod(a[0],e)&&(a[0].state="Already validated",this.updatePeriod(a[0],()=>{this.closePeriodDialog=!1,this.closePeriodHandler({workPeriod:e,availableFlags:t})}))})},setPeriodDialog:function(t){this.closePeriodDialog=t},chartSynchronizationHandler:function(t,e){const{synchronizationData:a}=this.$store.state.chartstore;a&&!this.isMainChart&&this.chartName===this.currentSecondChart&&("Reset axes"===t.type?this.resetAxes():t&&e&&(t.startXaxis!==e.startXaxis||t.endXaxis!==e.endXaxis)?this.setLayoutAxisRange():!this.isMainChart&&t.hoverData&&this.applyLinkedHoverEffect(t.hoverData.points[0]))},resetAxes:function(){const{workPeriod:t}=this.currentSession;t&&(this.layout.yaxis.autorange=!0,this.layout.xaxis.range=[t.startDate,t.endDate],this.$Plotly.relayout(this.chartDiv,this.layout))},setLayoutAxisRange:function(){const{synchronizationData:t}=this.$store.state.chartstore,e=t.startXaxis,a=t.startYaxis,s=t.endXaxis,i=t.endYaxis;(e||a)&&(this.setXaxisRange(e,s),this.is2dChart&&this.setYaxisRange(a,i))},setXaxisRange:function(t,e){const{synchronization:a}=this.$store.state.chartstore;t&&e&&(this.layout.xaxis.range=[t,e],this.layout.xaxis.autorange=!a,this.$Plotly.relayout(this.chartDiv,this.layout))},setYaxisRange:function(t,e){const{synchronization:a}=this.$store.state.chartstore;t&&e&&(this.layout.yaxis.range=[t,e],this.layout.yaxis.autorange=!a)},applyLinkedHoverEffect:function(t){const e=new Date(t.x);this.isTimeSeries&&e?this.$Plotly.Fx.hover(this.chartDiv,{xval:e.getTime()}):t&&this.$Plotly.Fx.hover(this.chartDiv,this.getPointNumber(t.pointNumber))},getPointNumber:function(t){let e=[];return e=Array.from(Array(this.data.length).keys(),e=>({curveNumber:e,pointNumber:t})),e}}},P={data:()=>({currentUrl:"",currentData:[],callBack:null,requestData:null,typeOfRequest:""}),methods:{dateToUtc:c.e,getDateTime:c.j,isHigherThan:c.n,addSecondsToDate:c.c,periodsVariationHandler:function(t,e,a){this.isEmptyInter(t,e)?this.loadNewPeriod(t,a):this.isPeriodInclude(t,e)?this.reducePeriod(t,e):this.isPeriodInclude(e,t)&&this.expandPeriod(t,e,a)},reBuildChart:function(t){t&&(this.$Plotly.purge(this.chartDiv),this.setIsInitChartMode(!0),this.initCurrentChart(this.parameters[0],!0))},loadNewPeriod:function(t,e){const{startDate:a,endDate:s}=t;a&&s&&(this.isModelInit=!1,this.isMainChart?this.getSessionFlags(this.currentSession,t=>{t&&(e.flags=t.flags,this.$store.commit("updateSessionFlags",e.flags),this.reBuildChart(e,a,s))}):(e.flags=[],this.reBuildChart(e,a,s)))},reducePeriod:function(t){t&&this.isTimeSeries&&this.deleteFlags(t),this.deleteParameterData(t)},expandPeriod:function(t,e,a){t&&a&&(this.isPreappendPeriod(t,e)?this.expandPeriodHandler(t.startDate,e.startDate,this.currentSession,!1,a,()=>{this.isAppendPeriod(t,e)&&this.expandPeriodHandler(e.endDate,t.endDate,this.currentSession,!0,a)}):this.isAppendPeriod(t,e)&&this.expandPeriodHandler(e.endDate,t.endDate,this.currentSession,!0,a))},isCoordsChange:function(){let t,e,a,s;return!!(null===this.currentFlag&&this.flag||void 0===this.currentFlag&&this.flag)||(t=this.is2dChart?this.currentFlag.startXaxis:this.currentFlag.x0,e=this.is2dChart?this.currentFlag.endXaxis:this.currentFlag.x1,a=this.is2dChart?this.currentFlag.startYaxis:this.currentFlag.y0,s=this.is2dChart?this.currentFlag.endYaxis:this.currentFlag.y1,!this.isSameDateTime(this.flag.startXaxis,t)||!this.isSameDateTime(this.flag.endXaxis,e)||this.flag.startYaxis!==a||this.flag.endYaxis!==s)},getMinMaxIndex:function(t,e,a,s){let i={min:-1,max:-1};return t.forEach((t,n)=>{if(-1===i.min&&s(t,e)&&(i.min=n),-1===i.max&&s(t,a)&&(i.max=n),-1!==i.min&&-1!==i.max)return i}),i},closePeriodHandler:function(t){let e,a;const{availableFlags:s}=t,{workPeriod:i,instrument:n,parametersToValidate:r}=this.currentSession;i&&(e=this.flagToPeriod(i),e.startYaxis=this.data[0].y[0],e.endYaxis=this.data[0].y[this.data[0].y.length-1],this.isTimeSeries&&n&&s&&r?(a=this.setChartModelStateByIndex(e,s.code,null,!0),a&&void 0!==a.min&&void 0!==a.max&&(this.flags=this.addFlagShape(a.min,a.max),this.currentFlag={description:s.description},this.submit1DModel())):this.is2dChart&&(this.closeModel([s]),this.chartModelToParameter(this.chartModel,"flags"),this.updateFlagsText(),this.updateModel(!1,e,e)))}}};const F=[[0,"rgb(150, 150, 150)"],[1e-4,"rgb(150, 150, 150)"],[.001,"rgb(150, 150, 150)"],[.01,"rgb(150, 150, 150)"],[.1,"rgb(150, 150, 150)"],[1,"rgb(150, 150, 150)"]],T=[[0,"rgb(250,9,9)"],[1e-4,"rgb(250,9,9)"],[.001,"rgb(250,9,9)"],[.01,"rgb(250,9,9)"],[.1,"rgb(250,9,9)"],[1,"rgb(250,9,9)"]];var w={methods:{initDefaultParameters:function(){this.data&&this.parameters&&0===this.data.length&&this.addParameters(this.currentSession,this.parameters)},addNewParameter:function(t,e,a){this.currentSession&&t&&e&&a&&(this.addParameter(this.currentSession,t,e,a,this.parameters),this.setYaxisName())},addParameter:function(t,e,a,s,i){t&&e&&a&&s&&(this.chartProgress=!0,this.getParameterData(t,[e],a,s,t=>{"Result is empty !"===t?(this.dataNotAvailable=!0,setTimeout(()=>{this.dataNotAvailable=!1},7e3)):this.parametersResponseHandler(t,i)}))},getFlagShape:function(t,e,a){let s=null;return t&&e&&a&&(s={visible:!0,type:"rect",editable:!0,layer:this.is2dChart?"above":"below",opacity:this.theme.flagOpacity,fillcolor:a.color,fillrule:"evenodd",line:{width:1,color:"#DD2C00",dash:"dot"},xsizemode:"scaled",ysizemode:"scaled",xref:"x",x0:this.getDateTime(t),x1:this.getDateTime(e),yref:this.is2dChart?"y":"paper",y0:0,y1:1}),s},addFlagShape:function(t,e){let a=[],s=[];const i=this.flags.filter(t=>"rect"!==t.type);return t&&e&&(a=this.chartModelToFlags(this.chartModel),s=a.map(t=>this.getFlagShape(t.start,t.end,this.getAvailableFlagsByCode(t.code)[0])),this.layout.shapes=[...s,...i],this.currentShapes=this.layout.shapes.map(t=>t?{x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1,fillcolor:t.fillcolor}:{}),this.$Plotly.relayout(this.chartDiv,this.layout)),[...s,...i]},freshShapes:function(){let t;const e=this.chartModelHistory[0],a=this.chartModelToFlags(e),s=this.flags.filter(t=>"rect"!==t.type);a&&(this.layout.shapes.forEach((t,e)=>{t&&this.layout.shapes.splice(e,1)}),t=[...a.map(t=>this.getFlagShape(t.start,t.end,this.getAvailableFlagsByCode(t.code)[0])),...s],this.flags=t,this.chartModel=e,this.layout.shapes=t,this.$Plotly.relayout(this.chartDiv,this.layout),this.addFlagListener())},addParameters:function(t,e){t&&e&&(this.chartProgress=!0,this.getParametersData(t,e,t=>{t[0]&&t[0].domain||t[0]&&t[0].parameters?t.forEach(t=>{this.parametersResponseHandler(t,e)}):(this.chartProgress=!1,this.dataNotAvailable=!0,setTimeout(()=>{this.dataNotAvailable=!1},3e3))}))},parametersResponseHandler:function(t,e,a,s){if(t){const{domain:i,ranges:n,parameters:r}=t;i&&n?this.externalParmetersHandler(r,i,n,e,a,s):r&&this.localParmetersHandler(r,e,a,s),this.resetAxes()}},externalParmetersHandler:function(t,e,a,s,i,n){let r,o;t&&e&&a&&(r=Object.keys(t),r.forEach(r=>{o=s.find(t=>t.name===r),o&&this.addExternalParmeter(t[r],e,a,o,i,n)}))},addExternalParmeter:function(t,e,a,s,i,n){let r=[],o=[];(void 0===e.axes.level||"PointSeries"===e.domainType)&&t&&e&&s?(r=e.axes.t.values,o=a[s.name].values,this.get1DDataFormat(s,r,o,t=>{void 0!==i?this.appendOrPrependParams(t,i,n):t&&this.AddChartTrace(t,!0)})):this.get2DDataFormat(e,a,s,(t,e)=>{void 0!==i?this.appendOrPrependParams(t[0],i,n):this.AddChartTrace(t,!1,e)})},localParmetersHandler:function(t,e,a,s){let i,n;const{parameters:r}=t;r&&e&&(r.forEach(t=>{t.domain&&"PointSeries"===t.domain.domainType?this.addLocalParameter(t,e,a,s):t.dimensions&&t.variables&&(i=Object.keys(t.variables)[0],i&&(n=e.find(t=>t.name===i),n&&this.heatMapDataHandler(t,n)))}),this.chartProgress=!1)},addLocalParameter:function(t,e,a,s){let i,n=[],r=[];t&&e&&Object.keys(t.ranges).forEach(o=>{n=t.domain.axes.t.values,r=t.ranges[o].values,i=e.find(t=>t.name===o),t.name=o,i&&(t.color=i.color),this.get1DDataFormat(t,n,r,t=>{void 0!==a?this.appendOrPrependParams(t,a,s):t&&this.AddChartTrace(t)})})},appendOrPrependParams:function(t,e,a){const s=this.data;let i,n;const{instrument:r}=this.currentSession;t&&s&&(i=s.find(e=>e.name===t.name),n=!(!r||!r.rootUrl.includes("localhost")),i&&(e?(i.x=n?this.sortFlagsByDate([...i.x,...t.x]):[...i.x,...t.x],i.y=void 0===i.z?[...i.y,...t.y]:i.y,i.z&&(i.z=[...i.z,...t.z])):(i.x=n?this.sortFlagsByDate([...t.x,...i.x]):[...t.x,...i.x],i.y=void 0===i.z?[...t.y,...i.y]:i.y,i.z&&(i.z=[...t.z,...i.z])),this.$Plotly.update(this.chartDiv,this.data,this.layout),this.chartProgress=!1),a&&a())},get1DDataFormat:function(t,e,a,s){let i,n=e;if(e&&a){if(this.currentSession){const{rootUrl:t}=this.currentSession.instrument;t&&t.includes("localhost")&&(n=e.sort((t,e)=>new Date(e)-new Date(t)).reverse())}s&&(i={x:n,y:a,close:!1,mode:this.currentSession.scatterMode?"markers":"lines",type:this.currentSession.scatterMode?"scattergl":"scatter",connectgaps:!1,name:t.name,size:3,opacity:1,marker:this.currentSession.scatterMode?{size:3,symbol:"circle",opacity:1,color:t.color.name}:{size:3},line:{color:t.color.name,width:2,dash:"solid",shape:"linear",simplify:!0},gradient:{type:"none"},selected:{marker:{opacity:1}},unselected:{marker:{opacity:1}},maxdisplayed:0,yaxis:"y"},s(i))}},get2DDataFormat:function(t,e,a,s){let i,n;const r=e[a.name];t&&e&&a&&r&&s&&(i=Array.from(Array(r.shape[0]).keys()).map(t=>r.values.slice(t*r.shape[1],(t+1)*r.shape[1])),n=this.customColorScaleToColorScale(a.color),s([{z:i,x:t.axes.t.values,y:t.axes.level.values,name:a.name,colorscale:n,type:"heatmap",showlegend:!0,transpose:!0,hoverlabel:{namelength:15,font:{family:"Arial, sans-serif",size:13},align:"auto"}}],r))},setDisplayMode:function(t){this.data&&this.isTimeSeries&&(this.data=this.data.map(e=>{let a=Object.assign({},e);return a.mode=t?"markers":"lines",a.type=t?"scattergl":"scatter",a.marker=t?{size:3,symbol:"circle",opacity:1,color:a.line.color,line:{color:"#444",width:0},gradient:{type:"none"},selected:{marker:{opacity:1}},unselected:{marker:{opacity:1}},maxdisplayed:0}:{size:3},a}),this.isMainChart&&this.$store.commit("updateDisplayModeData",{scatterMode:t}),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config))},heatMapDataHandler:function(t,e){let a;const{dimensions:s,variables:i}=t,n=i.time.attributes.units.split(" "),r=n.length,o=i.time.data.map(t=>{let e=new Date(n[r-2]+"T00:00:00");return e.setSeconds(e.getSeconds()+t),this.dateToUtc(e)});s&&i&&(a=[{z:i[e.name].data,x:o,y:i.level.data,name:e.name,colorscale:this.customColorScaleToColorScale(e.color),type:"heatmap",showlegend:!0,transpose:!0}],this.$Plotly.addTraces(this.chartDiv,a),this.buildChartModel())},setYaxisName:function(){this.layout.yaxis.title.text=this.getAxisName(!1),this.$Plotly.relayout(this.chartDiv,this.layout)},AddChartTrace(t,e,a){t&&!this.data.some(e=>e.name===t.name)&&(e?(this.$Plotly.addTraces(this.chartDiv,t),this.currentSession.charts=Object.values(this.charts),this.updateSession(this.currentSession),this.resetChartModel()):!e&&a&&(this.$Plotly.addTraces(this.chartDiv,t),this.resetChartModel()),this.chartProgress=!1)},removeTraceByName:function(t){t&&this.chartDiv&&(this.data=this.data.filter(e=>!t.some(t=>t===e.name)),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config),this.setYaxisName())},setTraceColorScale:function(t,e){let a;t&&(a=this.data.find(e=>e.ids===t.ids),a&&(a.colorscale=e?F:T),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config))},customColorScaleToColorScale:function(t){let e=[];return t&&t.colorScale&&(e=t.colorScale.map(t=>[t.value,t.color])),e},sameColorScale:function(t,e){let a=!1;return t&&e&&(a=!t.colorscale.some((t,a)=>t[0]!==e[a][0]||t[1]!==e[a][1])),a},setParameterColorScale:function({parameters:t,enName:e}){let a=t[0],s=this.data.find(t=>t.name===a.name),i=this.customColorScaleToColorScale(a.color);s&&a&&!this.sameColorScale(s,i)&&e===this.chartName&&(s.colorscale=i,this.updateSession(this.currentSession),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config))},setParameterColor:function({parameter:t}){let e=this.data.find(e=>e.name===t.name);e&&t&&(e.line.color=t.color.name,e.marker=this.currentSession.scatterMode?{size:3,symbol:"circle",opacity:1,color:t.color.name}:{size:3},this.updateSession(this.currentSession),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config))},parameterColorsHandler:function(t){t.chart&&t.isColorScale?this.setParameterColorScale(t.chart):t.chart&&!t.isColorScale&&this.setParameterColor(t)},getChartModelText:function(t){let e=[];const a=this.getInstrumentAvailableFlags();return t&&(e=t.z.map(t=>t.map(t=>t?a[t].code+", "+a[t].label:""))),e[0].map((t,a)=>e.map(t=>t[a]))},chartModelToParameter:function(t,e){let a,s=this.data.find(t=>t.name===e);s?(s.x=t.x.map(t=>t.value?t.value:t),s.y=t.y.map(t=>t),s.z=t.z.map(t=>t.map(t=>t)),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config)):t&&t.z&&t.x&&t.y&&(a=[{z:t.z.map(t=>t.map(t=>t)),x:t.x.map(t=>t&&t.value?t.value:t),y:t.y.map(t=>t),hoverinfo:"text",name:e,type:"heatmap",colorscale:F,opacity:.5,showlegend:!0,transpose:!0,showscale:!1,hoverongaps:!1,connectgaps:!1}],this.$Plotly.addTraces(this.chartDiv,a),this.chartModel={instrumentId:t.instrumentId,parameterName:t.parameterName,x:t.x.map(t=>t&&t.value?t.value:t),y:t.y.map(t=>t),z:t.z.map(t=>t.map(t=>t))})},flush1DDeleteFlags:function(t,e){let a=[],s=[];const i=this.currentSession.charts[0],{sessionFlags:n}=this.$store.state.common;0<t.length?(t.forEach(t=>a.push(t.id)),this.deleteDbFlags(a,()=>{s=n.filter(e=>!t.some(t=>e.id===t.id)),s=[...s,...e],i.flags=s,this.$store.commit("updateSessionFlags",s)})):(s=[...n,...e],this.$store.commit("updateSessionFlags",s),i.flags=s,this.postFlags({flags:s}))},submit1DModel:function(){let t,e;const{sessionFlags:a}=this.$store.state.common,s=this.chartsFlagToFlag(this.flags.filter(t=>"rect"===t.type));s&&a&&(t=a.filter(t=>!s.some(e=>this.isSameFlag(t,e))),e=s.filter(t=>!a.some(e=>this.isSameFlag(t,e))),0<e.length?this.postFlags({flags:e},e=>{this.flush1DDeleteFlags(t,e)}):this.flush1DDeleteFlags(t,[]),this.saveModelHistory())},submit2DChartModel:function(t,e){const a=this.currentSession.charts[0];t&&e&&this.is2dChart&&(this.removeTraceByName(["selection"]),void 0===a.chartModel?this.flushChartModel(t,e):this.updateModel(!0,t,e))},addSelectionZone:function(t){t&&(t.name="selection",t.type="heatmap",t.colorscale=T,t.opacity=.5,t.hoverinfo="skip",t.transpose=!0,t.showscale=!1,t.showlegend=!1,t.hoverongaps=!1,t.connectgaps=!1,this.$Plotly.addTraces(this.chartDiv,[t]))},drawSelectionZone:function(t,e){const a=this.getChartModelMinMaxIndex(t),{minIndex:s,maxIndex:i,minYIndex:n,maxYIndex:r}=a;let o,l,c,d;this.chartModel&&this.chartModel.z&&e&&a&&(l=this.getSelectionZoneCopy(),c=this.chartModel.z.map(t=>t.map(t=>t)),c.slice(s,i+1).forEach((t,a)=>{t.slice(n,r+1).forEach((t,i)=>{d=this.data[0].z[s+a][n+i],o=!d&&0!==d||t!==e?null:e,l.z[s+a].splice(n+i,1,o)})}),this.addSelectionZone(l))},updateFlagsText:function(){let t;const e=this.data.find(t=>"flags"===t.name);e&&(t=this.getChartModelText(this.chartModel),e.text=t),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config)},updateTargetTrace:function(t,e){const a=this.data.find(e=>e.name===t);a&&e?(a.z=e.z.map(t=>t.map(t=>t)),this.$Plotly.update(this.chartDiv,this.data,this.layout)):this.chartModelToParameter(this.chartModel,"flags"),e.z&&this.updateFlagsText()},renameTargetTrace:function(t,e){let a;t&&e&&(a=this.data.find(e=>e.ids===t.ids),a&&(a.hovertemplate=e.code+", "+e.label,this.$Plotly.update(this.chartDiv,this.data,this.layout)))},setFlagsTracesState:function(t){this.data&&(this.data.forEach(e=>{e.ids&&e.ids.includes("flag")&&(e.visible=t)}),this.$Plotly.update(this.chartDiv,this.data,this.layout))},setThresholds:function(t,e){t&&(t.x0=0,t.y0=e,t.x1=1,t.y1=e,this.$Plotly.relayout(this.chartDiv,{shapes:this.flags}))},clearThresholds:function(t){this.flags=this.flags.filter(t=>!("line"===t.type&&t.line.color===this.theme.thresholdMinColor||"line"===t.type&&t.line.color===this.theme.thresholdMaxColor)),t&&(this.currentSession.threshold={hide:!0,thresholdMin:null,thresholdMax:null},this.updateSession(this.currentSession,t=>{t&&(this.threshold=t.threshold)})),this.$Plotly.relayout(this.chartDiv,{shapes:this.flags})},drawThreshold:function(t,e){this.flags=[...this.flags,{type:"line",x0:0,y0:t,x1:1,y1:t,xref:"paper",yref:"y",line:{color:e,dash:"dash",width:.4}}],this.$Plotly.relayout(this.chartDiv,{shapes:this.flags})},updateThresholds:function(t){const{thresholdMin:e,thresholdMax:a}=t;let s=this.flags.find(t=>"line"===t.type&&t.line.color===this.theme.thresholdMinColor),i=this.flags.find(t=>"line"===t.type&&t.line.color===this.theme.thresholdMaxColor);e&&a&&(s?this.setThresholds(s,e):this.drawThreshold(e,this.theme.thresholdMinColor),i?this.setThresholds(i,a):this.drawThreshold(a,this.theme.thresholdMaxColor),this.currentSession.threshold={hide:t.hide,thresholdMin:e,thresholdMax:a},this.updateSession(this.currentSession,t=>{t&&(this.threshold=t.threshold)}))},drawThresholds:function(t,e,a){this.isMainChart&&(e&&void 0===a?t&&e&&this.updateThresholds(t):this.clearThresholds(a))},removeParameter:function(t,e){let a,s,i;a=e.filter(e=>!t.some(t=>t.name===e.name)),s=a[0].name,i=this.data.findIndex(t=>t.name===s),-1<i&&(this.$Plotly.deleteTraces(this.chartDiv,i),this.$Plotly.newPlot(this.chartDiv,this.data,this.layout,this.config)),this.currentSession.charts=Object.values(this.charts),this.updateSession(this.currentSession),this.setYaxisName()},parameterHandler:function(t,e){let a,s,i;this.data&&0===this.data.length?(a=t[0],this.initCurrentChart(a)):e&&t&&(e.length<t.length&&this.currentSession.workPeriod?(s=this.currentSession.workPeriod.startDate,i=this.currentSession.workPeriod.endDate,a=t[t.length-1],this.addNewParameter(a,s,i)):t.length<e.length&&this.removeParameter(t,e))},secondChartsParametersHandler:function(t,e){t&&e&&(0===this.secondChartsParameters.length||1===t.length&&0===e.length)&&(0===t.length&&1<=e.length&&this.updateSession(this.currentSession),this.refreshChart())},reduceTrace:function(t,e,a,s){let i,n;-1!==t&&(n=this.data[t],i=this.getMinMaxIndex(n.x,e,a,this.isHigherThan),i&&(n.x=n.x.slice(i.min,i.max),n.y=void 0===n.z?n.y.slice(i.min,i.max):n.y,s&&this.chartModel&&(this.chartModel.x=this.chartModel.x.slice(i.min,i.max),this.chartModel.z=this.chartModel.z.slice(i.min,i.max)),n.z&&(n.z=n.z.slice(i.min,i.max),this.$Plotly.update(this.chartDiv,this.data,this.layout))))},deleteParameterData:function(t){let e;const{startDate:a,endDate:s}=t;this.charts["Main chart"].parameters.forEach(t=>{e=this.data.findIndex(e=>e.name===t.name),this.reduceTrace(e,a,s)}),this.isTimeSeries||(e=this.data.findIndex(t=>"flags"===t.name),this.reduceTrace(e,a,s,!0)),this.layout&&this.layout.xaxis&&(this.layout.xaxis.range=[a,s],this.$Plotly.update(this.chartDiv,this.data,this.layout))},expandPeriodHandler:function(t,e,a,s,i,n){const{id:r}=a,o=i.parameters,{sessionFlags:l}=this.$store.state.common,c=s?this.addSecondsToDate(t,1,!0):t,d=s?e:this.addSecondsToDate(e,1,!1);r&&c&&d&&o&&this.getParameterData(a,o,c,d,t=>{this.getSessionFlagsByPeriod(c,d,this.currentSession,e=>{t&&this.parametersResponseHandler(t,o,s,()=>{e&&e.instrument&&("PointSeries"===e.instrument.type&&i.flags?(this.resetChartModel(),i.flags=s?[...l,...e.flags]:[...e.flags,...l],this.$store.commit("updateSessionFlags",i.flags),this.drawFlags(i.flags,!0)):"Heatmap"===e.instrument.type&&e.chartModel&&e.chartModel.z&&(this.buildChartModel(),this.addModel(e.chartModel,!0,s)),n&&n())})})})}}},M=a(283),k={name:"aeris-datavalidation-periodstable",components:{AerisDatavalidationDeleteDialog:M.a},props:{session:{type:Object,default:()=>null},flagsData:{type:Object,default:()=>({})},setDialogState:{type:Function,default:()=>{}},importDialog:{type:Boolean,default:()=>!1}},watch:{"$store.state.common.sessionFlags":{handler:function(){const{sessionFlags:t}=this.$store.state.common;t&&!this.importDialog&&(this.flags=this.sortFlagsByDate(t))},immediate:!0},flagsData:{handler:function(){this.flagsData&&this.flagsData.flags&&(this.flags=this.sortFlagsByDate(this.flagsData.flags))},immediate:!0}},mixins:[d.a],data:()=>({page:1,flags:[],pageCount:0,dialog:!1,itemsPerPage:100,editedIndex:-1,deleteItem:null,editedItem:null,flagsDialog:!1,singleSelect:!1,submittedFlags:!1}),computed:{tableHeaders:function(){let t,e=!1;this.session&&(t=this.session.instrument,e=t&&"Heatmap"===t.type);let a=[{text:this.$t("session.label_startDate"),align:"start",sortable:!1,value:"startXaxis"},{text:this.$t("session.label_endDate"),align:"start",sortable:!1,value:"endXaxis"},{text:this.$t("session.label_flags"),align:"start",sortable:!1,value:"flags"},{text:this.$t("session.label_description"),align:"start",sortable:!1,value:"description"}];return this.importDialog||a.splice(4,0,{text:this.$t("session.label_actions"),value:"actions",sortable:!1}),e&&(a.splice(2,0,{text:this.$t("session.label_altitudeMin"),align:"start",sortable:!1,value:"startYaxis"}),a.splice(3,0,{text:this.$t("session.label_altitudeMax"),align:"start",sortable:!1,value:"endYaxis"})),a},getFlagsLen:function(){return this.flags.length},is2dChart:function(){let t,e=!1;return this.session&&(t=this.session.instrument,e=t&&"Heatmap"===t.type),e}},methods:{isSameFlag:_.k,getDateTime:c.j,sortFlagsByDate:_.m,getDatePikerDateFormat:c.i,setCurrentFlag:function(t){t&&this.$store.commit("updataTargetFlag",{id:t.id,startXaxis:this.getDateTime(t.startXaxis),endXaxis:this.getDateTime(t.endXaxis),startYaxis:t.startYaxis,endYaxis:t.endYaxis})},editFlag(t){const e=Object.assign({},t);e.startXaxis=this.getDateTime(e.startXaxis),e.endXaxis=this.getDateTime(e.endXaxis),this.setCurrentFlag(t),this.$store.commit("updateCurrentFlag",e)},setDeleteItem(t){this.editedItem=Object.assign({},t),this.editedIndex=this.flags.findIndex(e=>e.id===t.id),-1!==this.editedIndex&&(this.dialog=!0,this.deleteItem=t)},getDateGoodFormat:function(t){if(t)return this.getDateTime(t)},resetTable:function(){this.flags=[]},cancelDelete:function(){this.dialog=!1},validateDelete:function(){this.dialog=!1,this.flags.splice(this.editedIndex,1),this.flushDeleteFlag(this.deleteItem.id,!1,()=>{this.dialog=!1,this.$store.commit("updateDeletedFlag",this.deleteItem)})}}},I=Object(l.a)(k,(function(){var t=this,e=t._self._c;return e("div",[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.dialog,ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validateDelete,cancelCallBack:t.cancelDelete,title:t.$t("session.label_deletion"),message:t.$t("session.message_delete")}}),t._v(" "),[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.flags,"item-key":"id","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage,height:"400","single-select":!0,"show-select":!1,disabled:0===t.getFlagsLen},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.startXaxis",fn:function({item:a}){return[e("div",[t._v(t._s(t.getDateGoodFormat(a.startXaxis)))])]}},{key:"item.endXaxis",fn:function({item:a}){return[null===a.endXaxis?e("div",{staticClass:"pa-4"},[t._v("/")]):e("div",[t._v(t._s(t.getDateGoodFormat(a.endXaxis)))])]}},t.is2dChart?{key:"item.startYaxis",fn:function({item:a}){return[e("div",[t._v(t._s(a.startYaxis))])]}}:null,t.is2dChart?{key:"item.endYaxis",fn:function({item:a}){return[e("div",[t._v(t._s(a.endYaxis))])]}}:null,{key:"item.description",fn:function({item:a}){return[e("div",[t._v(t._s(t.getDateGoodFormat(a.description)))])]}},{key:"item.flags",fn:function({item:a}){return t._l(a.availableFlags,(function(a,s){return e("div",{key:"flag"+s},[e("div",[t._v(t._s(a.code)+", "+t._s(a.label))])])}))}},t.importDialog?null:{key:"item.actions",fn:function({item:a}){return[e("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editFlag(a)}}},[t._v("\n            mdi-pencil\n          ")]),t._v(" "),e("v-icon",{attrs:{small:""},on:{click:function(e){return t.setDeleteItem(a)}}},[t._v("\n            mdi-delete\n          ")])]}}],null,!0)})],t._v(" "),e("div",{staticClass:"text-center pt-2",attrs:{disabled:0===t.getFlagsLen}},[e("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),e("v-card-actions",[e("v-btn",{on:{click:function(e){return t.setDialogState(!1)}}},[t._v("\n        "+t._s(t.$t("common.close"))+"\n      ")])],1)],2)}),[],!1,null,"521abf30",null).exports,$={name:"aeris-datavalidation-instrumentinput",components:{},props:{importInputs:{type:Boolean,default:()=>!1},session:{type:Object,default:()=>{}},charts:{type:Object,default:()=>({})},setIsOpen:{type:Function,default:()=>{}},addParameters:{type:Function,default:()=>{}},parametersLabel:{type:Array,default:()=>[]},setCurrentFlags:{type:Function,default:()=>{}}},mixins:[d.a],computed:{getParameters:function(){let t=[],e=[];return this.session&&this.session.auxParameters&&this.session.parametersToValidate&&(e=[...this.session.auxParameters,...this.session.parametersToValidate],t=this.parameters.filter(t=>!e.some(e=>t.instrumentId===e.instrumentId&&t.name===e.name))),t}},data:()=>({parameters:[],instrument:null,instruments:[],selectedParameters:null}),mounted(){this.initInstruments()},watch:{instrument:{handler:function(){this.instrument&&(this.parameters=[...this.instrument.parameters,...this.instrument.auxParameters])},immediate:!0},selectedParameters:{handler:function(){this.importInputs&&this.setCurrentFlags(this.instrument,this.selectedParameters)},immediate:!0}},methods:{resetForm:function(){this.instrument=null,this.selectedParameters=null},initInstruments:function(){this.getInstruments(t=>{t&&(this.instruments=t)})},setInstrumentName:function(){this.selectedParameters&&this.instrument&&(this.selectedParameters=this.selectedParameters.map(t=>{let e=Object.assign({},t);return e.instrumentName=this.instrument.name,e}))},addSelectedParameters:function(){let t=[];const e=Object.values(this.charts)[1];this.instrument&&this.selectedParameters&&e&&(this.setInstrumentName(),t=[...this.selectedParameters],this.addParameters(this.instrument,t,e.enName),this.closeMenu())},closeMenu:function(){this.resetForm(),this.setIsOpen(!1)}}},A=Object(l.a)($,(function(){var t=this,e=t._self._c;return e("div",[t.importInputs?e("v-form",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("v-select",{attrs:{items:t.instruments,name:"name","item-text":"name","item-value":"name","data-cy":"sessionFormInstrumentName-select",label:t.$t("session.label_auxiliaryInstrument"),required:"","return-object":""},model:{value:t.instrument,callback:function(e){t.instrument=e},expression:"instrument"}})],1),t._v(" "),e("v-col",{staticClass:"d-flex flex-row",attrs:{cols:"6"}},[e("v-autocomplete",{attrs:{items:t.getParameters,name:"name","item-text":"name","item-value":"name",label:t.$t("session.label_parameter"),"return-object":""},model:{value:t.selectedParameters,callback:function(e){t.selectedParameters=e},expression:"selectedParameters"}})],1)],1)],1)],1):e("v-card",{staticClass:"pa-4",staticStyle:{"max-width":"400px"}},[e("v-form",[e("v-select",{attrs:{items:t.instruments,name:"name","item-text":"name","item-value":"name","data-cy":"sessionFormInstrumentName-select",label:t.$t("session.label_auxiliaryInstrument"),required:"","return-object":""},model:{value:t.instrument,callback:function(e){t.instrument=e},expression:"instrument"}}),t._v(" "),e("v-autocomplete",{attrs:{items:t.getParameters,name:"name","item-text":"name","item-value":"name",label:t.$t("session.label_parameter"),multiple:!0,"return-object":""},model:{value:t.selectedParameters,callback:function(e){t.selectedParameters=e},expression:"selectedParameters"}}),t._v(" "),e("v-btn",{staticClass:"mb-2 mt-2 mr-2",attrs:{color:"blue","data-cy":"workSpaceAddChart-button"},on:{click:t.addSelectedParameters}},[t._v("\n          "+t._s(t.$t("session.label_add"))+"\n        ")]),t._v(" "),e("v-btn",{on:{click:t.closeMenu}},[t._v("\n          "+t._s(t.$t("common.close"))+"\n        ")])],1)],1)],1)}),[],!1,null,null,null).exports,N={name:"aeris-datavalidation-importdialog",components:{AerisDatavalidationFlagsTable:I,AerisDatavalidationDeleteDialog:M.a,AerisDatavalidationInstrumentInput:A},props:{session:{type:Object,default:null},importDialog:{type:Boolean,default:()=>!1},setImportDialog:{type:Function,default:()=>{}},addFlags:{type:Function,default:()=>{}}},mixins:[d.a,p.a],data:()=>({tab:"",flags:{},importData:{},instruments:[],periodsData:[],currentFlags:[],inputesStates:{},overwriteFlags:!1,importFlagsDialog:!1}),watch:{importDialog:function(){this.importFlagsDialog=this.importDialog,this.importFlagsDialog&&(this.tab=this.$t("session.label_selections"))}},methods:{dateToUtc:c.e,isFlagInFlag:_.i,setCurrentFlags:function(t,e){t&&e&&(this.importData={instrument:t,parameter:e},this.tab===this.$t("session.label_selections")&&this.updateImportFlags())},validateImportFlags:function(){this.overwriteFlags=!1,this.currentFlags&&(this.flags={flags:this.currentFlags},this.addFlags(this.currentFlags,[]))},cancelImportFlags:function(){this.overwriteFlags=!1,this.inputesStates={parameters:[]}},updateImportFlags:function(){const t=this.session.workPeriod,{instrument:e,parameter:a}=this.importData,{sessionFlags:s}=this.$store.state.common;e&&a&&this.getFlags(e.id,a.name,null,t.startDate,t.endDate,t=>{s&&t&&s.some(e=>t.some(t=>this.isFlagInFlag(t,e,!0)))?(this.overwriteFlags=!0,this.currentFlags=t):0<t.length&&(this.flags={flags:t},this.addFlags(t,[]))},!0)}}},B=Object(l.a)(N,(function(){var t=this,e=t._self._c;return e("div",[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.overwriteFlags,ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validateImportFlags,cancelCallBack:t.cancelImportFlags,title:t.$t("session.label_overwrite"),message:t.$t("session.message_overwriteFlags")}}),t._v(" "),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-dialog",{attrs:{"max-width":"900",persistent:""},model:{value:t.importFlagsDialog,callback:function(e){t.importFlagsDialog=e},expression:"importFlagsDialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n              "+t._s(t.$t("session.label_flagsCopy"))+"\n            ")]),t._v(" "),e("v-form",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationInstrumentInput",{attrs:{session:t.session,setCurrentFlags:t.setCurrentFlags,inputesStates:t.inputesStates,importInputs:t.importFlagsDialog}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationFlagsTable",{attrs:{session:t.session,flagsData:t.flags,importDialog:t.importFlagsDialog,setDialogState:t.setImportDialog}})],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"343165eb",null).exports,O={name:"aeris-datavalidation-profiledialog",props:{hideProfile:{type:Boolean,default:()=>!1},isMainchart:{type:Boolean,default:()=>!1},currentTheme:{type:Object,default:()=>{}},profileHoverData:{type:Object,default:()=>null},setProfileChartState:{type:Function,default:()=>{}},mainchartData:{type:Array,default:()=>[]},profileIndex:{type:Object,default:()=>null},profileDialog:{type:Boolean,default:()=>!1},currentLayout:{type:Object},session:{type:Object,default:null}},data:()=>({theme:null,hideChart:!1,vProfileDiv:null,hProfileDiv:null,vProfileData:[],hProfileData:[],vXaxis:"",hXaxis:"",vYaxis:"",hYaxis:"",vProfileTrace:{x:[],y:[],close:!1,connectgaps:!1,name:"name",line:{width:2,dash:"solid",shape:"linear",simplify:!0},yaxis:"y"},hProfileTrace:{x:[],y:[],close:!1,connectgaps:!1,name:"name",line:{width:2,dash:"solid",shape:"linear",simplify:!0},yaxis:"y"},dialogHeight:500,dialogWidth:800,vProfileLayout:{},hProfileLayout:{},profileChartId:"profile",profileVerticalId:"prodilebyaltitude"}),watch:{hideProfile:function(){this.hideChart=this.hideProfile,this.isMainchart&&this.hideChart&&this.initProfileChart()},currentTheme:{handler:function(){this.currentTheme&&(this.theme=this.currentTheme)},deep:!0,immediate:!0},profileHoverData:function(){let t,e,a,s;this.isMainchart&&this.profileHoverData&&this.profileIndex&&this.profileDialog&&(t=this.profileIndex.minIndex,e=this.profileIndex.minYIndex,s=this.profileHoverData&&this.profileHoverData.points[0]?this.profileHoverData.points[0].x:"",this.vProfileTrace.y=this.mainchartData[0].y,this.vProfileTrace.x=this.mainchartData[0].z[t],this.vProfileData=[this.vProfileTrace],this.hProfileTrace.y=this.mainchartData[0].z.map(t=>t.slice(e,e+1)).flat(),this.hProfileTrace.x=this.mainchartData[0].x.map(t=>t),a=this.profileHoverData&&this.profileHoverData.points[0]?this.profileHoverData.points[0].y:"",this.hProfileData=[this.hProfileTrace],this.vProfileLayout.title.text=this.$t("session.label_vProfile")+" <br>"+s+" ("+this.hXaxis+")",this.hProfileLayout.title.text=this.$t("session.label_hProfile")+" <br>"+a+" ("+this.vYaxis+")",this.$Plotly.update(this.vProfileDiv,this.vProfileData,this.vProfileLayout,{displayModeBar:!1}),this.$Plotly.update(this.hProfileDiv,this.hProfileData,this.hProfileLayout,{displayModeBar:!1}))}},methods:{getZminZmax:function(){let t=[],e=null;return this.mainchartData&&(t=this.mainchartData[0].z.flat(),e={min:Math.min.apply(null,t),max:Math.max.apply(null,t)}),e},initVPlofileConf:function(){let t,e;const a=this.session.charts[0];a&&(t=a.parameters[0],this.vYaxis=this.$t("session.label_altitude")+"(m)",this.vXaxis=t?t.name:"Valeurs",e=this.getZminZmax(),this.vProfileLayout={height:500,width:400,showlegend:!1,title:{text:this.$t("session.label_vProfile"),x:.52,font:{color:this.theme.text,family:'"Open Sans", verdana, arial, sans-serif',size:18}},font:{color:this.theme.text},plot_bgcolor:this.theme.plotPaper,paper_bgcolor:this.theme.plotPaper,xaxis:{title:{text:this.vXaxis,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},zeroline:!1,showline:!1,gridcolor:this.theme.grid,fixedrange:!0,range:[e.min,e.max]},yaxis:{title:{text:this.vYaxis,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},gridcolor:this.theme.grid,tickfont:{color:this.theme.text},range:this.currentLayout.yaxis.range}})},initHProfileConf:function(){let t,e;const a=this.session.charts[0];a&&(t=a.parameters[0],e=this.getZminZmax(),this.hYaxis=t?t.name:"Valeurs",this.hXaxis=this.$t("session.label_times"),this.hProfileLayout={title:{text:this.$t("session.label_hProfile"),x:.52,font:{color:this.theme.text,family:'"Open Sans", verdana, arial, sans-serif',size:18}},height:500,width:400,showlegend:!1,font:{color:this.theme.text},plot_bgcolor:this.theme.plotPaper,paper_bgcolor:this.theme.plotPaper,xaxis:{title:{text:this.hXaxis,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},zeroline:!1,gridcolor:this.theme.grid,range:this.currentLayout.xaxis.range},yaxis:{title:{text:this.hYaxis,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},zeroline:!1,gridcolor:this.theme.grid,tickfont:{color:this.theme.text},range:[e.min,e.max]}})},hideDialog:function(){this.hideChart=!1,this.setProfileChartState(!1)},initProfileChart:function(){this.$nextTick(()=>{f()("document").ready(()=>{this.theme=this.session.theme,this.initVPlofileConf(),this.initHProfileConf(),this.vProfileDiv=document.getElementById(this.profileChartId),this.hProfileDiv=document.getElementById(this.profileVerticalId),this.vProfileDiv&&(this.vProfileData=[this.vProfileTrace],this.$Plotly.react(this.vProfileDiv,this.vProfileData,this.vProfileLayout,{displayModeBar:!1})),this.hProfileDiv&&(this.hProfileData=[this.hProfileTrace],this.$Plotly.react(this.hProfileDiv,this.hProfileData,this.hProfileLayout,{displayModeBar:!1}))})})}}},j=(a(367),Object(l.a)(O,(function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{width:t.dialogWidth,height:t.dialogHeight,"hide-overlay":!0,persistent:""},model:{value:t.hideChart,callback:function(e){t.hideChart=e},expression:"hideChart"}},[e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2 popup-header"},[t._v("\n        "+t._s(t.$t("session.label_profiles"))+"\n      ")]),t._v(" "),e("v-card",{staticClass:"d-flex flex-row"},[e("v-card",[t.isMainchart?e("div",{attrs:{id:t.profileChartId}}):t._e()]),t._v(" "),e("v-card",[t.isMainchart?e("div",{attrs:{id:t.profileVerticalId}}):t._e()])],1),t._v(" "),e("v-card-actions",[e("v-btn",{on:{click:t.hideDialog}},[t._v("\n          "+t._s(t.$t("common.close"))+"\n        ")])],1)],1)],1)}),[],!1,null,"97745fdc",null).exports),E={name:"aeris-datavalidation-thresholddialog",components:{},props:{threshold:{type:Object,default:()=>({thresholdMin:null,thresholdMax:null})},enableThresHoldDialog:{type:Boolean,default:!1},setThresHoldDialog:{type:Function,default:()=>{}},session:{type:Object,default:null},drawThresholds:{type:Function,default:()=>{}},mainchartData:{type:Array,default:()=>[]}},data:()=>({hide:!1,thresholdMin:null,thresholdMax:null,thresholdDialog:!1,thresholdAlert:!1}),watch:{hide:function(){null!==this.thresholdMin&&null!==this.thresholdMax&&(this.hide?this.drawThresholds(null,!1):this.session&&this.session.threshold&&this.drawThresholdDialog(!1))},enableThresHoldDialog:function(){this.initForm()}},computed:{thresholdNoExist:function(){return this.session&&(null===this.session.threshold||null===this.session.threshold.thresholdMin||null===this.session.threshold.thresholdMax)}},methods:{initForm:function(){const t=/^0[.,]\d*/;let e,a,s,i;this.thresholdDialog=this.enableThresHoldDialog,!this.thresholdNoExist&&this.threshold&&this.threshold.thresholdMin&&this.threshold.thresholdMax?(e=this.threshold.thresholdMin,a=this.threshold.thresholdMax,s=e.toString().match(t),i=a.toString().match(t),this.thresholdMin=s&&s.length>0?this.expo(e):e,this.thresholdMax=i&&i.length>0?this.expo(a):a,this.hide=this.session.threshold.hide):this.mainchartData&&this.mainchartData[0]&&(e=Math.min(...this.mainchartData[0].y),a=Math.max(...this.mainchartData[0].y),s=e.toString().match(t),i=a.toString().match(t),this.thresholdMin=s&&s.length>0?this.expo(e):e,this.thresholdMax=i&&i.length>0?this.expo(a):a,this.hide=!1)},expo:function(t,e){return Number.parseFloat(t).toExponential(e)},drawThresholdDialog:function(t=!0){const e={hide:this.hide,thresholdMin:this.thresholdMin,thresholdMax:this.thresholdMax};this.thresholdDialog&&!this.hide?Number(this.thresholdMax)<Number(this.thresholdMin)?this.enableAlert():(t&&this.setThresHoldDialog(!1),this.drawThresholds(e,!0)):this.setThresHoldDialog(!1)},enableAlert:function(){this.thresholdAlert=!0,setTimeout(()=>{this.thresholdAlert=!1},2e3)},removeThresholdDialog:function(){this.setThresHoldDialog(!1),this.drawThresholds(null,null,!0)}}},V=Object(l.a)(E,(function(){var t=this,e=t._self._c;return e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:t.thresholdDialog,callback:function(e){t.thresholdDialog=e},expression:"thresholdDialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n            "+t._s(t.$t("session.label_thresholds"))+"\n          ")]),t._v(" "),t.thresholdAlert?e("v-alert",{attrs:{type:"warning","data-cy":"sessionform-alert"}},[t._v("\n            "+t._s(t.$t("session.message_thresholdMinGreaterThanThresholdMax"))+"\n          ")]):t._e(),t._v(" "),e("v-form",[e("v-container",[e("v-checkbox",{attrs:{disabled:t.thresholdNoExist,label:t.$t("session.label_hide")},model:{value:t.hide,callback:function(e){t.hide=e},expression:"hide"}}),t._v(" "),e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{type:"number",label:t.$t("session.label_thresholdMin")},model:{value:t.thresholdMin,callback:function(e){t.thresholdMin=e},expression:"thresholdMin"}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{type:"number",label:t.$t("session.label_thresholdMax")},model:{value:t.thresholdMax,callback:function(e){t.thresholdMax=e},expression:"thresholdMax"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}}),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("v-card-actions",[e("v-btn",{on:{click:t.drawThresholdDialog}},[t._v("\n                     OK\n                    ")]),t._v(" "),e("v-btn",{attrs:{disabled:t.thresholdNoExist},on:{click:t.removeThresholdDialog}},[t._v("\n                      "+t._s(t.$t("session.label_remove"))+"\n                    ")]),t._v(" "),e("v-btn",{on:{click:function(e){return t.setThresHoldDialog(!1)}}},[t._v("\n                      "+t._s(t.$t("common.close"))+"\n                    ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"3e273762",null).exports,H=a(290),L={name:"aeris-datavalidation-closeperioddialog",components:{AerisDatavalidationSelect:H.a},props:{session:{type:Object,default:null},dialog:{type:Boolean,default:!1},closePeriod:{type:Function,default:()=>{}},setDialog:{type:Function,default:()=>{}}},data:()=>({defaultFlags:[],qualityFlags:[],selectedFlags:null,closePeriodDialog:!1}),watch:{dialog:function(){this.qualityFlags=this.concatFlagCodeLabel(this.session.instrument.availableFlags),this.closePeriodDialog=this.dialog}},computed:{isValidated:function(){let t=!1;return this.selectedPeriod&&(t="success"===this.selectedPeriod.color),t},disabledCloseButton:function(){return null===this.selectedFlags||0===this.selectedFlags.length}},methods:{validate:function(){this.closePeriodDialog=!1,this.setDialog(!1),this.closePeriod(this.selectedFlags)},cancel:function(){this.setDialog(!1),this.closePeriodDialog=!1},setFlagsSelected:function(t){const e=t[0];e&&e.code&&(this.selectedFlags=e)},concatFlagCodeLabel:function(t){return t&&t.forEach(t=>{t.concatName=t.code+", "+t.label}),t}}},Y=Object(l.a)(L,(function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{width:500,heigth:600},model:{value:t.closePeriodDialog,callback:function(e){t.closePeriodDialog=e},expression:"closePeriodDialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n        "+t._s(t.$t("session.label_periodClosure"))+"\n      ")]),t._v(" "),e("v-row",{staticClass:"pa-2"},[e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationSelect",{attrs:{name:"flags",itemText:"concatName",session:t.session,qualityFlags:t.qualityFlags,flag_message:t.$t("session.message_novalidateddataflag"),setFlagsSelected:t.setFlagsSelected,defaultQualityFlags:t.defaultFlags,disabledSelect:t.isValidated}})],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{disabled:t.isValidated||t.disabledCloseButton},on:{click:t.validate}},[t._v("\n          "+t._s(t.$t("session.label_validate"))+"\n        ")]),t._v(" "),e("v-btn",{on:{click:t.cancel}},[t._v("\n          "+t._s(t.$t("session.label_cancel"))+"\n        ")])],1)],1)],1)}),[],!1,null,"553ce746",null).exports,z={name:"aeris-datavalidation-chartcore",components:{AerisDatavalidationImportDialog:B,AerisDatavalidationDeleteDialog:M.a,AerisDatavalidationProfileDialog:j,AerisDatavalidationThresholdDialog:V,AerisDatavalidationClosePeriodDialog:Y},props:{chartId:{type:String,default:()=>"defaultId"},componentKey:{type:Number,default:()=>0},theme:{type:Object,default:()=>{}},currentUrl:{type:String,default:()=>""},currentLayout:{type:Object},callBack:{type:Function,default:()=>{}},requestData:{type:Object,default:()=>null},typeOfRequest:{type:String,default:()=>""},positionX:{type:Number,default:()=>0},positionY:{type:Number,default:()=>0},tooltipContent:{type:String,default:()=>""},tooltipState:{type:Boolean,default:()=>!1},deleteDialog:{type:Boolean,default:()=>!1},importDialog:{type:Boolean,default:()=>!1},dataNotAvailable:{type:Boolean},chartProgress:{type:Boolean},validateDelete:{type:Function,default:()=>{}},cancelDelete:{type:Function,default:()=>{}},setPeriodDialog:{type:Function,default:()=>{}},closePeriod:{type:Function,default:()=>{}},session:{type:Object,default:null},closePeriodDialog:{type:Boolean,default:!1},profileDialog:{type:Boolean,default:!1},setProfileDialog:{type:Function,default:()=>{}},setImportDialog:{type:Function,default:()=>{}},isMainchart:{type:Boolean,default:!1},is2dChart:{type:Boolean,default:!1},hoverData:{type:Object,default:()=>null},threshold:{type:Object,default:()=>({thresholdMin:null,thresholdMax:null})},mainchartData:{type:Array,default:()=>[]},profileIndex:{type:Object,default:()=>null},drawThresholds:{type:Function,default:()=>{}},enableThresHoldDialog:{type:Boolean,default:!1},setThresHoldDialog:{type:Function,default:()=>{}},addFlags:{type:Function,default:()=>{}}},watch:{tooltipState:{handler:function(){this.currentTooltipState=this.tooltipState},deep:!0,immediate:!0}},data:()=>({currentTooltipState:!1}),computed:{hideProfileChart:function(){return this.profileDialog&&this.isMainchart},chartCoreClass:function(){let t="v-sheet v-sheet--outlined grey--text ";return this.$vuetify.theme.dark?t+="theme--dark":t+="theme--light",t}}},X={name:"aeris-datavalidation-chart",components:{AerisDatavalidationChartCore:Object(l.a)(z,(function(){var t=this,e=t._self._c;return e("div",{class:t.chartCoreClass},[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.deleteDialog,ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validateDelete,cancelCallBack:t.cancelDelete,title:t.$t("session.label_deletion"),message:t.$t("session.message_delete")}}),t._v(" "),e("AerisDatavalidationClosePeriodDialog",{attrs:{setDialog:t.setPeriodDialog,closePeriod:t.closePeriod,session:t.session,dialog:t.closePeriodDialog}}),t._v(" "),e("AerisDatavalidationProfileDialog",{attrs:{session:t.session,currentTheme:t.theme,isMainchart:t.isMainchart,profileIndex:t.profileIndex,currentLayout:t.currentLayout,profileDialog:t.profileDialog,mainchartData:t.mainchartData,hideProfile:t.hideProfileChart,profileHoverData:t.hoverData,setProfileChartState:t.setProfileDialog}}),t._v(" "),e("AerisDatavalidationThresholdDialog",{attrs:{threshold:t.threshold,session:t.session,mainchartData:t.mainchartData,drawThresholds:t.drawThresholds,setThresHoldDialog:t.setThresHoldDialog,enableThresHoldDialog:t.enableThresHoldDialog}}),t._v(" "),e("AerisDatavalidationImportDialog",{attrs:{session:t.session,addFlags:t.addFlags,importDialog:t.importDialog,setImportDialog:t.setImportDialog}}),t._v(" "),t.dataNotAvailable?e("v-alert",{attrs:{type:"error"}},[t._v("\n      "+t._s(t.$t("session.message_dataNotAvailable"))+"\n    ")]):t._e(),t._v(" "),t.chartProgress?e("div",{staticClass:"mb-3"},[e("v-progress-linear",{attrs:{color:"primary",indeterminate:"",rounded:"",height:"6"}})],1):t._e(),t._v(" "),e("v-tooltip",{attrs:{bottom:"","position-x":t.positionX,"position-y":t.positionY},model:{value:t.currentTooltipState,callback:function(e){t.currentTooltipState=e},expression:"currentTooltipState"}},[e("div",{domProps:{innerHTML:t._s(t.tooltipContent)}})]),t._v(" "),e("v-row",{attrs:{justify:"center"}},[e("v-col",{staticStyle:{"padding-top":"0"},attrs:{cols:12}},[e("div",{key:t.componentKey,ref:"graph",attrs:{id:t.chartId}})])],1)],1)}),[],!1,null,"7be6b082",null).exports},props:{webcomponent:{type:Boolean,default:!0},chartName:{type:String},parameters:{type:Array,default:()=>[]},defaultthemes:{type:Array,default:()=>[]},isMainChart:{type:Boolean,default:!1},charts:{type:Object},currentSession:{type:Object,default:()=>null},secondChartsParameters:{type:Array},currentSecondChart:{type:String,default:()=>""},isBreackPointChange:{type:Boolean,default:!1},switchSynchronizationMode:{type:Function},setAxisShortsNames:{type:Function,default:()=>{}}},watch:{"$store.state.common.currentTheme":{handler:function(){const{currentTheme:t}=this.$store.state.common;t&&this.setChartTheme(t)},immediate:!0},"$store.state.common.colorScaleData":{handler:function(){const{colorScaleData:t}=this.$store.state.common;t&&(console.log("colorScaleData : ",t),this.parameterColorsHandler(t))},immediate:!0},"$store.state.chartstore.chartsBreackPoint":{handler:function(t,e){t&&e&&this.refreshChart()},immediate:!0},currentSecondChart:function(){this.currentSession.currentSecondChartName=this.currentSecondChart,this.updateSession()},secondChartsParameters:function(t,e){this.secondChartsParametersHandler(t,e)},"$store.state.common.closeFlagData":{handler:function(){const{closeFlagData:t}=this.$store.state.common;t&&t.availableFlags&&this.closePeriodHandler(t)},immediate:!0},parameters:{handler:function(t,e){this.parameterHandler(t,e)},deep:!0,immediate:!0},"$store.state.common.targetFlag":function(){const{targetFlag:t}=this.$store.state.common;this.isMainChart&&t&&this.setCurrentFlagById(t.id,!0)},"$store.state.common.currentFlag":{handler:function(){const{currentFlag:t}=this.$store.state.common;t&&this.isMainChart&&(this.flag=t,this.isTimeSeries&&this.flag&&this.currentFlag?this.set1DFlagCoords():this.flag&&this.is2dChart&&this.set2DFlagCoords(this.flag))},immediate:!0},"$store.state.common.selectedFlag":{handler:function(){const{selectedFlag:t}=this.$store.state.common;this.isMainChart&&t&&""!==t.color&&(this.isTimeSeries?this.set1dAvailableFlag(t):this.is2dChart&&this.set2dAvailableFlag(t))},immediate:!0},"$store.state.common.deletedFlag":{handler:function(){const{deletedFlag:t}=this.$store.state.common;this.isMainChart&&t&&this.eraseTargetFlag(t)},immediate:!0},"$store.state.common.eraseFlag":{handler:function(){const{eraseFlag:t}=this.$store.state.common;t&&this.isMainChart&&null!==this.currentFlag&&(this.isTimeSeries?this.restore1DFlags(t):this.is2dChart&&this.mainChart&&this.restore2DProfiles())},immediate:!0},"$store.state.common.coverageFlagsState":{handler:function(){const t=this.$store.state.common.coverageFlagsState;t&&t.origin&&(this.isMainChart&&this.isTimeSeries?this.coverage1DFlagsHandler(t.checkboxState):this.overwriteProfiles())},immediate:!0},"$store.state.common.flushFlagsData":function(){const{flushFlagsData:t}=this.$store.state.common;this.isMainChart&&(this.isTimeSeries?this.submit1DModel():this.is2dChart&&this.submit2DChartModel(this.currentFlag,t))},"$store.state.common.newPeriodData":{handler:function(){let t,e,a;const{newPeriodData:s}=this.$store.state.common;s&&(e=s.newPeriod,a=s.oldPeriod,e&&a&&!this.isSamePeriod(e,a)&&(t=this.charts[this.chartName],this.periodsVariationHandler(s.newPeriod,s.oldPeriod,t)))},immediate:!0},"$store.state.common.thresholdsStates":{handler:function(){const{thresholdsStates:t}=this.$store.state.common;this.isMainChart&&t&&this.currentFlag&&(this.flag=t.flag,this.set1DFlagCoords())},immediate:!0},"$store.state.common.displayModeData":{handler:function(){const{displayModeData:t}=this.$store.state.common;!this.isMainChart&&t&&this.setDisplayMode(t.scatterMode)},immediate:!0},"$store.state.chartstore.synchronization":{handler:function(){const{synchronization:t}=this.$store.state.chartstore;this.isMainChart||t||!this.chartDiv||this.$Plotly.Fx.hover(this.chartDiv,[])},immediate:!0},"$store.state.chartstore.synchronizationData":{handler:function(t,e){this.currentSession&&this.chartName===this.currentSession.currentSecondChartName&&this.chartSynchronizationHandler(t,e)},immediate:!0}},mixins:[d.a,m.a,p.a,x,C,S,P,w],data:()=>({flags:[],flag:null,flags2d:[],positionY:0,positionX:0,threshold:{thresholdMin:null,thresholdMax:null},hoverData:null,chartDiv:null,lastFlag:null,chartProgress:!1,currentShapes:[],profileDiv:null,currentFlag:null,lastEvent:null,scatterMode:!1,currentShape:null,mouseEvents:!1,profileIndex:null,tooltipState:!1,tooltipContent:"",currentFlagId:null,currentElement:null,profileDialog:!1,flagsEditable:!1,importDialog:!1,originFlag:void 0,currentParameter:null,dataNotAvailable:!1,enableThresHoldDialog:!1,currentModeBarItem:"Box Select"}),methods:{setProfileDialog:function(t){this.profileDialog=t},setThresHoldDialog:function(t){this.enableThresHoldDialog=t},setImportDialog:function(t){this.importDialog=t}}},U=Object(l.a)(X,(function(){var t=this;return(0,t._self._c)("AerisDatavalidationChartCore",{attrs:{callBack:t.callBack,theme:t.theme,mainchartData:t.data,chartId:t.getChartId,hoverData:t.hoverData,threshold:t.threshold,currentLayout:t.layout,positionX:t.positionX,positionY:t.positionY,is2dChart:t.is2dChart,currentUrl:t.currentUrl,session:t.currentSession,isMainchart:t.isMainChart,requestData:t.requestData,componentKey:t.componentKey,deleteDialog:t.deleteDialog,tooltipState:t.tooltipState,profileIndex:t.profileIndex,profileDialog:t.profileDialog,typeOfRequest:t.typeOfRequest,tooltipContent:t.tooltipContent,dataNotAvailable:t.dataNotAvailable,closePeriodDialog:t.closePeriodDialog,importDialog:t.importDialog,chartProgress:t.chartProgress,enableThresHoldDialog:t.enableThresHoldDialog,addFlags:t.addFlags,cancelDelete:t.cancelDelete,validateDelete:t.validateDelete,drawThresholds:t.drawThresholds,closePeriod:t.closeCurrentPeriod,setPeriodDialog:t.setPeriodDialog,setProfileDialog:t.setProfileDialog,setImportDialog:t.setImportDialog,setThresHoldDialog:t.setThresHoldDialog}})}),[],!1,null,null,null).exports,R={name:"aeris-datavalidation-timepicker",props:{time_label:{type:String,default:"Time"},setCurrentTime:{type:Function},currentTime:{type:String,default:""},disabled:{type:Boolean,default:!1},min:{type:String,default:()=>""},max:{type:String,default:()=>""}},data:()=>({time:"",menu2:!1,modal2:!1}),watch:{time(t){this.isSameTime(this.time,this.currentTime)||this.setCurrentTime(t)},currentTime:{handler:function(t){this.time!==t&&(this.time=t)},immediate:!0}},methods:{isSameTime:c.p}},W=Object(l.a)(R,(function(){var t=this,e=t._self._c;return e("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.time,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px",disabled:t.disabled},on:{"update:returnValue":function(e){t.time=e},"update:return-value":function(e){t.time=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-text-field",t._g(t._b({attrs:{label:t.time_label,"prepend-icon":"mdi-clock-time-eight-outline",readonly:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),t.menu2?e("v-time-picker",{attrs:{"full-width":"",scrollable:"",format:"24hr",min:t.min,max:t.max},on:{"click:minute":function(e){return t.$refs.menu.save(t.time)}},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}):t._e()],1)}),[],!1,null,"fbe261d6",null).exports,q=a(288),Z={name:"aeris-datavalidation-flagform",components:{AerisDatavalidationDateMounthPicker:q.a,AerisDatavalidationDeleteDialog:M.a,AerisDatavalidationTimePicker:W,AerisDatavalidationSelect:H.a},props:{session:{type:Object,default:null},currentFlag:{type:Object,default:null},currentFlagPoints:{type:Object,default:null},currentView:{type:String},qualityFlags:{type:Array,default:()=>[]},setDialogState:{type:Function,default:()=>{}},notifyDeleteFlag:{type:Function,default:()=>{}},xaxisShortName:{type:String,default:"Time"},yaxisShortName:{type:String,default:"Value"}},mixins:[d.a,p.a],data:()=>({endTime:"",endXaxis:"",endYaxis:null,startTime:"",startYaxis:null,startXaxis:"",selectedFlags:[],flagDescription:"",isRecorded:!1,defaultFlags:[],existFlag:!1,defaultEndTime:"",defaultEndXaxis:"",defaultStartTime:"",defaultStartXaxis:"",deleteDialog:!1,flagCoverage:!1,isEditFlagExist:!1,thresholdMinCheckBox:!1,thresholdMaxCheckBox:!1}),watch:{startYaxis:function(t,e){e&&t!==e&&this.is2dChart&&(this.startYaxis=t,this.notifyCoordsChange())},endYaxis:function(t,e){e&&t!==e&&this.is2dChart&&(this.endYaxis=t,this.notifyCoordsChange())},currentFlag:{handler:function(){this.currentFlag&&this.initForm(this.currentFlag)},immediate:!0},flagCoverage:function(){const{coverageFlagsState:t}=this.$store.state.common;this.$store.commit("updateCoverageFlagsState",{modelState:!!t&&t.modelState,checkboxState:this.flagCoverage,origin:"FlagForm"})},thresholdMinCheckBox:{handler:function(){this.$store.commit("updateThresholdsStates",{thresholdMinCheckBox:this.thresholdMinCheckBox,thresholdMaxCheckBox:this.thresholdMaxCheckBox,flag:this.currentFlag})},immediate:!0},thresholdMaxCheckBox:{handler:function(){this.$store.commit("updateThresholdsStates",{thresholdMinCheckBox:this.thresholdMinCheckBox,thresholdMaxCheckBox:this.thresholdMaxCheckBox,flag:this.currentFlag})},immediate:!0}},computed:{disableThresholdMinCheckBox:function(){return!(this.session&&this.session.threshold&&this.session.threshold.thresholdMin)},disableThresholdMaxCheckBox:function(){return!(this.session&&this.session.threshold&&this.session.threshold.thresholdMax)},is1dChart:function(){let t,e=!1;return this.session&&(t=this.session.instrument,e=t&&"PointSeries"===t.type),e},is2dChart:function(){let t,e=!1;return this.session&&(t=this.session.instrument,e=t&&"Heatmap"===t.type),e},isSelectedFlagsEmpty:function(){return null===this.selectedFlags||0===this.selectedFlags.length||void 0===this.selectedFlags[0]||this.selectedFlags[0]&&0===this.selectedFlags[0].length},getQualityFlags:function(){return this.concatFlagCodeLabel(this.qualityFlags)}},methods:{getFlag:_.f,addHours:c.b,flagExist:_.b,dateToUtc:c.e,getDateTime:c.j,flagToPeriod:_.c,isHigherThan:c.n,isSameDateTime:c.o,coordsToPeriod:_.a,getFilterFlags:_.e,getExcludeFlags:_.d,getDatePikerDateFormat:c.i,getTimePickerTimeFormat:c.l,getTargetFlagIndex:_.g,concatFlagCodeLabel:function(t){return t&&t.forEach(t=>{t&&(t.concatName=t.code+", "+t.label)}),Object.assign([],t)},initForm:function(t){const{startXaxis:e,endXaxis:a,startYaxis:s,endYaxis:i,description:n}=t;e&&a&&void 0!==s&&void 0!==i&&(this.defaultStartXaxis={date:this.getDatePikerDateFormat(e)},this.defaultEndXaxis={date:this.getDatePikerDateFormat(a)},this.defaultStartTime=this.getTimePickerTimeFormat(e),this.defaultEndTime=this.getTimePickerTimeFormat(a),this.flagDescription=n,this.startXaxis=this.defaultStartXaxis.date,this.endXaxis=this.defaultEndXaxis.date,this.startYaxis=s,this.endYaxis=i,this.startTime=this.defaultStartTime,this.endTime=this.defaultEndTime,t.availableFlags&&0<t.availableFlags.length?this.defaultFlags=this.concatFlagCodeLabel(t.availableFlags):0<this.selectedFlags.length?this.defaultFlags=this.selectedFlags:this.defaultFlags=this.session.instrument.availableFlags)},resetForm:function(){this.endTime="",this.endYaxis=null,this.startTime="",this.startYaxis=null,this.defaultFlags=[],this.selectedFlags=[],this.flagDescription="",this.startXaxis="",this.endXaxis="",this.defaultEndTime="",this.flagCoverage=!1,this.defaultEndXaxis={date:""},this.defaultStartTime="",this.defaultStartXaxis={date:""},this.setDialogState(!1),this.thresholdMinCheckBox=!1,this.thresholdMaxCheckBox=!1,this.$store.commit("updateSelectedFlag",null),this.$store.commit("updateCoverageFlagsState",{modelState:!1,checkboxState:!1})},setStartXaxis:function(t){this.isSameDateTime(this.startXaxis,t)||(this.startXaxis=t,this.notifyCoordsChange())},setStartTime:function(t){this.startTime!==t&&(this.startTime=t,this.notifyCoordsChange())},setEndXaxis:function(t){this.isSameDateTime(this.endXaxis,t)||(this.endXaxis=t,this.notifyCoordsChange())},setEndTime:function(t){this.endTime!==t&&(this.endTime=t,this.notifyCoordsChange())},setFlagsSelected:function(t){let e;t&&t[0]&&t[0].code&&(e=t[0].description!==this.flagDescription?Object.assign({},t[0]):t[0],this.selectedFlags=t,this.flagDescription=t[0].description,this.$store.commit("updateSelectedFlag",e))},isEmptyDate:function(){return""===this.startXaxis||""===this.startTime||""===this.endXaxis||""===this.endTime},notifyCoordsChange:function(){let t,e=this.startXaxis+" "+this.startTime,a=this.endXaxis+" "+this.endTime;this.isEmptyDate()||(t={id:this.currentFlag.id,ids:this.currentFlag.ids,name:this.currentFlag.name,colorscale:this.currentFlag.colorscale,parameterName:this.currentFlag.parameterName,startXaxis:e,endXaxis:a,startYaxis:this.startYaxis,endYaxis:this.endYaxis,availableFlags:this.selectedFlags,color:this.currentFlag.color,description:this.flagDescription,editable:this.currentFlag.editable,instrumentId:this.currentFlag.instrumentId,type:this.currentFlag.type,transpose:this.currentFlag.transpose,showscale:this.currentFlag.showscale,showlegend:this.currentFlag.showlegend,opacity:this.currentFlag.opacity,eventCoords:this.currentFlag.eventCoords,isDefault:this.currentFlag.isDefault},this.$store.commit("updateCurrentFlag",Object.assign({},t)))},saveFlag:function(){const t=Object.assign({},this.currentFlag);t.description=this.flagDescription,this.$store.commit("updateFlushFlagsData",t),this.resetForm()},deleteCurrentSelecton:function(){this.deleteDialog=!0},cancelDelete:function(){this.deleteDialog=!1},validateDelete:function(){const{currentFlag:t}=this.$store.state.common;this.deleteDialog=!1,t&&this.$store.commit("updateDeletedFlag",t),this.resetForm()},cancelCurrentFlag:function(){this.$store.commit("updateEraseFlag",this.currentFlag),this.resetForm()},activeNoEditAlert:function(){this.isEditFlagExist=!0,setTimeout(()=>{this.isEditFlagExist=!1},2e3)}}},J={name:"aeris-datavalidation-worksflowdialog",components:{AerisDatavalidationFlagform:Object(l.a)(Z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pa-8"},[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.deleteDialog,ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validateDelete,cancelCallBack:t.cancelDelete,title:t.$t("session.label_deletion"),message:t.$t("session.message_delete")}}),t._v(" "),t.isRecorded?e("v-alert",{attrs:{type:"success"}},[t._v("\n      "+t._s(t.$t("session.message_recordedSelection"))+"\n    ")]):t._e(),t._v(" "),t.isEditFlagExist?e("v-alert",{attrs:{type:"warning"}},[t._v("\n      "+t._s(t.$t("session.message_canNotEdit"))+"\n    ")]):t._e(),t._v(" "),t._e(),t._v(" "),e("v-form",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:12,sm:12,md:12}},[e("v-row",[e("v-col",{staticClass:"d-flex flex-row",attrs:{cols:"12"}},[e("v-checkbox",{attrs:{label:t.$t("session.label_overwrite"),"hide-details":""},model:{value:t.flagCoverage,callback:function(e){t.flagCoverage=e},expression:"flagCoverage"}}),t._v(" "),t.is1dChart?e("v-checkbox",{staticClass:"ml-1",attrs:{label:t.$t("session.label_value")+" < "+t.$t("session.label_thresholdMin"),disabled:t.disableThresholdMinCheckBox,"hide-details":""},model:{value:t.thresholdMinCheckBox,callback:function(e){t.thresholdMinCheckBox=e},expression:"thresholdMinCheckBox"}}):t._e(),t._v(" "),t.is1dChart?e("v-checkbox",{staticClass:"ml-1",attrs:{label:t.$t("session.label_value")+" > "+t.$t("session.label_thresholdMax"),disabled:t.disableThresholdMaxCheckBox,"hide-details":""},model:{value:t.thresholdMaxCheckBox,callback:function(e){t.thresholdMaxCheckBox=e},expression:"thresholdMaxCheckBox"}}):t._e()],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_startDate"),currentDate:t.defaultStartXaxis,setCurrentDate:t.setStartXaxis}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_endDate"),currentDate:t.defaultEndXaxis,setCurrentDate:t.setEndXaxis}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationTimePicker",{attrs:{time_label:t.$t("session.label_startTime"),currentTime:t.defaultStartTime,setCurrentTime:t.setStartTime}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationTimePicker",{attrs:{time_label:t.$t("session.label_endTime"),currentTime:t.defaultEndTime,setCurrentTime:t.setEndTime}})],1),t._v(" "),t.is1dChart?t._e():e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{type:"number",label:t.$t("session.label_altitudeMin"),"prepend-icon":"mdi-axis-y-arrow"},model:{value:t.startYaxis,callback:function(e){t.startYaxis=e},expression:"startYaxis"}})],1),t._v(" "),t.is1dChart?t._e():e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{label:t.$t("session.label_altitudeMax"),type:"number","prepend-icon":"mdi-axis-y-arrow"},model:{value:t.endYaxis,callback:function(e){t.endYaxis=e},expression:"endYaxis"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationSelect",{attrs:{name:"flags",itemText:"concatName",session:t.session,qualityFlags:t.getQualityFlags,flag_message:t.$t("session.label_qualityFlags"),setFlagsSelected:t.setFlagsSelected,defaultQualityFlags:t.defaultFlags,defaultFlagDescription:t.flagDescription}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("v-card-actions",[(this.currentView,this.$t("session.label_selection"),e("v-btn",{attrs:{disabled:t.isSelectedFlagsEmpty},on:{click:t.saveFlag}},[t._v("\n                    "+t._s(t.$t("session.label_save"))+"\n                  ")])),t._v(" "),e("v-btn",{attrs:{disabled:t.currentView===t.$t("session.label_selection")},on:{click:t.deleteCurrentSelecton}},[t._v("\n                    "+t._s(t.$t("session.label_remove"))+"\n                  ")]),t._v(" "),e("v-btn",{on:{click:t.cancelCurrentFlag}},[t._v("\n                    "+t._s(t.$t("session.label_cancel"))+"\n                  ")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,AerisDatavalidationFlagsTable:I,AerisDatavalidationPeriodsDialog:a(293).a},props:{session:{type:Object,default:null},webcomponent:{type:Boolean,default:!0},qualityFlags:{type:Array,default:()=>[]},xaxisShortName:{type:String,default:"Time"},yaxisShortName:{type:String,default:"Value"},updateCurrentPeriod:{type:Function},notifyDeleteTargetFlag:{type:Function}},data:()=>({dialog:!1,currentView:"",sessionFlag:null,currentFlag:null,isResetFlag:!1,toggleOne:void 0,currentFlagPoints:null}),mixins:[d.a],watch:{"$store.state.common.currentFlag":{handler:function(){const{currentFlag:t}=this.$store.state.common;t&&(t.id||t.isDefault?this.editFlagHandler(t):this.createFlagHandler(t),this.currentFlag=t,this.dialog=!0)},immediate:!0},"$store.state.common.currentFlagPoints":{handler:function(){const{currentFlagPoints:t}=this.$store.state.common;this.currentFlagPoints=t},immediate:!0}},computed:{getCardTitle:function(){return this.currentView===this.$t("session.label_closing")?this.$t("session.label_closingOfPeriod"):this.currentView},isTitleVisible:function(){return this.isEditView||this.isFlagView||this.isFlagsView||this.isClosingView},getMainDialogWidth:function(){return this.currentView===this.$t("session.label_periods")?1500:900},isFlagView:function(){return this.currentView===this.$t("session.label_selection")},isFlagsView:function(){return this.currentView===this.$t("session.label_selections")},isEditView:function(){return this.currentView===this.$t("session.label_edit")},isPeriodView:function(){return this.currentView===this.$t("session.label_periods")},isClosingView:function(){return this.currentView===this.$t("session.label_closing")},isTimeSeries:function(){return this.session&&"PointSeries"===this.session.instrument.type}},methods:{reloadPage(){this.setSessionLock(()=>{window.location.reload()})},setDialogState:function(t){this.currentFlag=null,this.dialog=t,t||(this.toggleOne=void 0)},createFlagHandler:function(t){t&&(this.currentView=this.$t("session.label_selection"))},editFlagHandler:function(t){t&&(this.currentView=this.$t("session.label_edit"))},periodsHandler:function(){this.currentView=this.$t("session.label_periods"),this.dialog=!0},flagsHandler:function(){this.currentView=this.$t("session.label_selections"),this.dialog=!0},setSessionLock:function(t){const{currentSessionId:e}=this.$store.state.common;e&&this.getSessionById(e,e=>{const a=e.body;a&&(a.lock=!1,this.updateSession(a)),t&&t()})}}},G=(a(368),Object(l.a)(J,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("v-dialog",{attrs:{persistent:"","max-width":t.getMainDialogWidth},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-btn-toggle",{attrs:{tile:"",color:"deep-purple accent-3",group:""},model:{value:t.toggleOne,callback:function(e){t.toggleOne=e},expression:"toggleOne"}},[e("v-btn",{staticClass:"mb-2 mt-2 blue--text",attrs:{depressed:""},on:{click:t.reloadPage}},[e("v-icon",{attrs:{left:""}},[t._v("mdi-view-list")]),t._v(" "+t._s(t.$t("session.label_sessions"))+"\n          ")],1),t._v(" "),e("v-btn",t._g(t._b({staticClass:"mb-2 mt-2 blue--text",attrs:{depressed:""},on:{click:t.periodsHandler}},"v-btn",s,!1),a),[e("v-icon",{attrs:{left:""}},[t._v("mdi-calendar-edit")]),t._v(" "+t._s(t.$t("session.label_periods"))+"\n          ")],1),t._v(" "),t.isTimeSeries?e("v-btn",t._g(t._b({staticClass:"mb-2 mt-2 blue--text",attrs:{depressed:""},on:{click:t.flagsHandler}},"v-btn",s,!1),a),[e("v-icon",{attrs:{left:""}},[t._v(" mdi-selection-drag")]),t._v(" "+t._s(t.$t("session.label_flags"))+"\n          ")],1):t._e()],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),e("v-card",[t.isTitleVisible?e("v-card-title",{staticClass:"headline grey lighten-2 popup-header"},[t._v("\n          "+t._s(t.getCardTitle)+"\n        ")]):t._e(),t._v(" "),t.currentView===t.$t("session.label_periods")?e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n          "+t._s(t.$t("session.label_periods"))+"\n        ")]):t._e(),t._v(" "),t.isFlagView||t.isEditView?e("AerisDatavalidationFlagform",{attrs:{session:t.session,currentView:t.currentView,xaxisShortName:t.xaxisShortName,yaxisShortName:t.yaxisShortName,currentFlag:t.currentFlag,sessionFlag:t.sessionFlag,qualityFlags:t.qualityFlags,currentFlagPoints:t.currentFlagPoints,setDialogState:t.setDialogState}}):t._e(),t._v(" "),t.isPeriodView?e("AerisDatavalidationPeriodsDialog",{attrs:{session:t.session,maxWidth:t.getMainDialogWidth,periodsView:{state:t.isPeriodView&&this.dialog},webcomponent:t.webcomponent,updateCurrentPeriod:t.updateCurrentPeriod,setDialogState:t.setDialogState}}):t._e(),t._v(" "),t.isFlagsView?e("AerisDatavalidationFlagsTable",{attrs:{session:t.session,setDialogState:t.setDialogState}}):t._e(),t._v(" "),e("v-divider")],1)],1)],1)}),[],!1,null,null,null).exports),K={name:"aeris-datavalidation-tabhandler",components:{AerisDatavalidationDeleteDialog:M.a},props:{session:{type:Object,default:null},charts:{type:Object},currentView:{type:String,default:()=>""},menuModelState:{type:Boolean,default:()=>null},chartTabsHandler:{type:Function,default:()=>{}},setIsOpen:{type:Function,default:()=>{}},genNewTabName:{type:Function,default:()=>{}},addNewChart:{type:Function,default:()=>{}},deleteParameter:{type:Function,default:()=>{}}},mixins:[d.a],data:()=>({tabName:"",newName:"",dialog:!1,tabNames:[],dialogTitle:"",tabAlertMess:"",dialogMessage:"",isEmptyName:!1,dialogOkCallBack:null,currentChartName:null,deleteChartDialog:!1,renameChartDialog:!1}),watch:{charts:function(){this.setTabName()},menuModelState:function(){!1===this.menuModelState&&this.setTabName()}},computed:{getCurrentChartName:function(){return this.currentChartName?this.currentChartName:""},getCurrentChartsNames:function(){return[...Object.keys(this.charts),this.$t("session.label_mainChart").toString(),this.$t("session.label_secondaryChart").toString()]},disabledAddButton:function(){const t=this.getCurrentChartsNames;return""===this.tabName||t.some(t=>t.trim().toUpperCase()===this.tabName.trim().toUpperCase())},disabledRenameButton:function(){const t=this.getCurrentChartsNames;return""===this.newName||t.some(t=>t.trim().toUpperCase()===this.newName.trim().toUpperCase())},disabledRemoveButton:function(){return null===this.currentChartName||!this.getCharts.includes(this.currentChartName)},getCharts:function(){let t=[];return this.charts&&(t=Object.keys(this.charts).slice(2)),t}},mounted(){this.setTabName()},methods:{setTabName:function(){this.genNewTabName(t=>{t&&(this.tabName=t)})},createChart:function(){this.addNewChart(this.tabName,[]),this.setIsOpen(!1)},enabledRenameChartDialog:function(){this.renameChartDialog=!0},renameChart:function(){let t;this.currentChartName&&this.newName&&this.currentChartName!==this.newName&&this.session&&this.session.charts.forEach(e=>{e.enName===this.currentChartName&&this.chartTabsHandler(e,"rename",this.newName,e=>{this.setIsOpen(!1),t=Object.assign({},this.session),t.charts=e,this.updateSession(t)})})},cancelRenameChartDialog:function(){this.renameChartDialog=!1,this.setIsOpen(!1)},enabledDeleteChartDialog:function(){this.deleteChartDialog=!0},deleteChart:function(){let t;this.session&&this.currentChartName&&(t=this.session.charts.find(t=>t.enName.toUpperCase()===this.currentChartName.toUpperCase()),t&&(t.parameters.forEach(t=>{this.session.auxParameters=this.session.auxParameters.filter(e=>e.name!==t.name),this.deleteParameter(t,!1,!1)}),this.session.charts=this.session.charts.filter(t=>t.enName.toUpperCase()!==this.currentChartName.toUpperCase()),this.updateSession(this.session,t=>{t&&(this.setIsOpen(!1),this.deleteChartDialog=!1,this.chartTabsHandler(this.currentChartName,"remove"))})))},cancelChartDialog:function(){this.deleteChartDialog=!1,this.setIsOpen(!1)}}},Q={name:"aeris-datavalidation-chartmenu",components:{AerisDatavalidationTabHandler:Object(l.a)(K,(function(){var t=this,e=t._self._c;return e("div",[e("v-card",[t.currentView===t.$t("session.label_addChart")?e("div",{staticClass:"pa-4"},[t.isEmptyName?e("v-alert",{attrs:{dense:"",outlined:"",type:"error","data-cy":"createChart-alert"}},[t._v("\n          "+t._s(t.tabAlertMess)+"\n        ")]):t._e(),t._v(" "),e("v-text-field",{attrs:{label:t.$t("session.label_chartName"),"data-cy":"createChart-textfield","hide-details":"auto"},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}}),t._v(" "),e("v-btn",{staticClass:"mb-2 mt-2 mr-2",attrs:{color:"blue",depressed:"",disabled:t.disabledAddButton,"data-cy":"workSpaceAddChart-button"},on:{click:t.createChart}},[t._v("\n          "+t._s(t.$t("session.label_add"))+"\n        ")]),t._v(" "),e("v-btn",{on:{click:function(e){return t.setIsOpen(!1)}}},[t._v("\n          "+t._s(t.$t("common.close"))+"\n        ")])],1):t.currentView===t.$t("session.label_renameChart")?e("div",{staticClass:"pa-4"},[e("v-select",{attrs:{items:t.getCharts,label:t.$t("session.label_chartName"),"return-object":""},model:{value:t.currentChartName,callback:function(e){t.currentChartName=e},expression:"currentChartName"}}),t._v(" "),e("v-text-field",{staticClass:"mb-1",attrs:{label:t.$t("session.label_newName"),"data-cy":"createChart-textfield","hide-details":"auto"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),t._v(" "),e("v-btn",{staticClass:"mb-2 mt-2 mr-2",attrs:{color:"red",depressed:"",disabled:t.disabledRenameButton},on:{click:t.enabledRenameChartDialog}},[t._v("\n          "+t._s(t.$t("session.label_save"))+"\n        ")]),t._v(" "),e("v-btn",{on:{click:function(e){return t.setIsOpen(!1)}}},[t._v("\n          "+t._s(t.$t("common.close"))+"\n        ")])],1):t.currentView===t.$t("session.label_removeChart")?e("div",{staticClass:"pa-4"},[e("v-select",{attrs:{items:t.getCharts,label:t.$t("session.label_chartName"),"return-object":""},model:{value:t.currentChartName,callback:function(e){t.currentChartName=e},expression:"currentChartName"}}),t._v(" "),e("v-btn",{staticClass:"mb-2 mt-2 mr-2",attrs:{color:"red",depressed:"",disabled:t.disabledRemoveButton},on:{click:t.enabledDeleteChartDialog}},[t._v("\n          "+t._s(t.$t("session.label_remove"))+"\n        ")]),t._v(" "),e("v-btn",{on:{click:function(e){return t.setIsOpen(!1)}}},[t._v("\n          "+t._s(t.$t("common.close"))+"\n        ")])],1):e("div")]),t._v(" "),e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.renameChartDialog,hideOkButton:!1,ok:t.$t("session.label_yes"),okCallBack:t.renameChart,cancelCallBack:t.cancelRenameChartDialog,cancel:t.$t("session.label_no"),title:t.$t("session.label_renameChart"),message:t.$t("session.message_renameChart")+" "+t.getCurrentChartName+" ?"}}),t._v(" "),e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.deleteChartDialog,hideOkButton:!1,ok:t.$t("session.label_yes"),okCallBack:t.deleteChart,cancelCallBack:t.cancelChartDialog,cancel:t.$t("session.label_no"),title:t.$t("session.label_deletion"),message:t.$t("session.message_deleteChart")+" "+t.getCurrentChartName+" ?"}})],1)}),[],!1,null,"b4b2dfc0",null).exports},props:{session:{type:Object,default:null},charts:{type:Object},menuModelState:{type:Boolean,default:()=>null},chartTabsHandler:{type:Function,default:()=>{}},genNewTabName:{type:Function,default:()=>{}},addNewChart:{type:Function,default:()=>{}},deleteParameter:{type:Function,default:()=>{}}},data(){return{isOpen:!1,addChart:!1,removeChart:!1,renameChart:!1,currentView:this.$t("session.label_addChart")}},watch:{addChart:function(){this.addChart&&(this.currentView=this.$t("session.label_addChart"))},renameChart:function(){this.renameChart&&(this.currentView=this.$t("session.label_renameChart"))},removeChart:function(){this.removeChart&&(this.currentView=this.$t("session.label_removeChart"))}},methods:{setIsOpen:function(t){void 0!==t&&(this.isOpen=t)}}},tt=Object(l.a)(Q,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-btn-toggle",{attrs:{tile:"",group:""}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},model:{value:t.addChart,callback:function(e){t.addChart=e},expression:"addChart"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-tab-plus")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_addChart")))])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},model:{value:t.renameChart,callback:function(e){t.renameChart=e},expression:"renameChart"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-pencil")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_renameChart")))])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},model:{value:t.removeChart,callback:function(e){t.removeChart=e},expression:"removeChart"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-tab-minus")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_removeChart")))])])],1)]}}]),model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[t._v(" "),e("AerisDatavalidationTabHandler",{attrs:{charts:t.charts,session:t.session,addNewChart:t.addNewChart,currentView:t.currentView,genNewTabName:t.genNewTabName,deleteParameter:t.deleteParameter,chartTabsHandler:t.chartTabsHandler,setIsOpen:t.setIsOpen}})],1)],1)}),[],!1,null,null,null).exports,et={name:"aeris-datavalidation-colorscaleselect",props:{getChart:{type:Function,default:()=>{}},disabled:{type:Boolean,default:()=>!1},parameter:{type:Object,default:()=>null},currentColorScale:{type:Object,default:()=>null},parameterColorScale:{type:Boolean,default:()=>!1},form:{type:Boolean,default:()=>!1},colors:{type:Array,default:()=>[]},setSelectedColorScale:{type:Function,default:()=>{}}},watch:{colors:{handler:function(){this.initColors()},immediate:!0},color:{handler:function(t){this.is1DParameter||this.parameterColorScale||!this.color?t&&this.parameter&&this.setParameterColor(this.color):this.setSelectedColorScale(this.color)},immediate:!0},currentColorScale:{handler:function(){null===this.currentColorScale&&this.form&&(this.color=null)},immediate:!0}},data:()=>({color:null,colorScale:null,currentColors:[],disabledSelect:!1,currentColorScales:[]}),computed:{is1DParameter:function(){let t=!1;return this.parameter&&(t=null===this.parameter.color.colorScale),t}},methods:{initColors:function(){let t;this.colors&&(this.currentColors=this.colors.filter(t=>this.parameter&&null===this.parameter.color.colorScale&&null===t.colorScale||(null===this.parameter||this.parameter.color.colorScale)&&t.colorScale),this.parameter&&(t=this.currentColors.find(t=>t.name===this.parameter.color.name),this.color=t||this.currentColors[0]))},setParameterColor:function(t){let e,a=this.getChart(this.parameter);t&&a&&a.parameters.some(t=>t.name===this.parameter.name)?(e=a.parameters.find(t=>t.name===this.parameter.name&&t.instrumentId===this.parameter.instrumentId),e&&(e.color=t,this.$store.commit("updateColorScaleData",{chart:a,parameter:e,isColorScale:!this.is1DParameter}))):this.parameter&&t&&(this.parameter.color=t)}}},at=Object(l.a)(et,(function(){var t=this,e=t._self._c;return e("div",[e("v-autocomplete",{attrs:{items:t.currentColors,"item-value":"name",label:t.is1DParameter?t.$t("session.label_color"):t.$t("session.label_colorScale"),"hide-details":!0,"return-object":""},scopedSlots:t._u([t.is1DParameter?{key:"selection",fn:function(t){return[e("v-card",{staticClass:"rounded-0",attrs:{"min-height":"30","min-width":"30",color:t.item.name}})]}}:{key:"selection",fn:function(a){return[e("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"150px"}},[t._v("\n          "+t._s(a.item.name)+"\n        ")])]}},t.is1DParameter?{key:"item",fn:function(a){return[e("v-card",{staticClass:"rounded-0",attrs:{"min-height":"30","min-width":"30",color:a.item.name}}),t._v(" "),e("div",{staticClass:"text-h6 pa-1"},[t._v(t._s(a.item.name))])]}}:{key:"item",fn:function(a){return[t._l(a.item.colorScale,(function(t,a){return e("v-card",{key:a,staticClass:"rounded-0",attrs:{"min-height":"30","min-width":"30",color:t.color}})})),e("div",{staticClass:"text-h6 pa-1"},[t._v(t._s(a.item.name))])]}}],null,!0),model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)}),[],!1,null,null,null).exports,st=a(369),it={name:"aeris-datavalidation-createcolorscalemenu",props:{selectedColorScale:{type:Object,default:()=>null},setColorScale:{type:Function,default:()=>{}},currentColorScale:{type:Object,default:()=>null},form:{type:Boolean,default:()=>!1},editMode:{type:Boolean,default:()=>!1}},components:{draggable:a.n(st).a},computed:{colorScaleNull:function(){return null===this.currentColorScale&&this.form}},data:()=>({scales:[],scaleIndex:-1,currentColor:null,showCurrentMenu:!1,pickerColor:"rgba(13, 8, 135, 1)",colorpickerMode:"rgba",colorScale:null,defaultColor:null}),watch:{scales:function(t,e){t.length===e.length&&t.some((t,a)=>t.color!==e[a].color)&&this.setCurrentColorScale()},pickerColor:function(){this.pickerColor&&-1!==this.scaleIndex&&this.setScaleColor()},colorScale:{handler:function(){this.colorScale&&(this.setColorScale(this.colorScale),this.scales=this.colorScale.scales)},immediate:!0},selectedColorScale:{handler:function(){const{id:t,name:e,colorScale:a,description:s}=this.selectedColorScale?this.selectedColorScale:{},i=Object.assign({},this.colorScale);e&&a&&null!==this.currentColorScale&&(i.id=t,i.description=s,i.name=this.selectedColorScale.name,i.scales=this.selectedColorScale.colorScale,this.colorScale=Object.assign({},i))},immediate:!0},currentColorScale:{handler:function(){null===this.currentColorScale&&this.form&&(this.colorScale=null,this.scales=[])},immediate:!0}},methods:{setCurrentColorScale:function(){this.colorScale&&(this.colorScale.scales=this.scales,this.setColorScale(this.colorScale))},closeMenu:function(){this.scaleIndex=-1,this.showCurrentMenu=!1},rgbaToStr:function(t){let e="";const{r:a,g:s,b:i,a:n}=t;return a&&s&&i&&n?e="rgba("+a+","+s+","+i+","+n+")":a&&s&&i&&(e="rgba("+a+","+s+","+i+")"),e},hexToRgbA:function(t){if("object"==typeof t)return t;{let e=(t=(t=t.substring(1,t.length)).split(""))[0]+t[0],a=t[1]+t[1],s=t[2]+t[2],i=t[3]+t[3];t.length>=6&&(e=t[0]+t[1],a=t[2]+t[3],s=t[4]+t[5],i=t[6]+(t[7]?t[7]:t[6]));let n=parseInt(e,16),r=parseInt(a,16),o=parseInt(s,16),l=parseInt(i,16);return l/=255,l<1&&l>0&&(l=l.toFixed(2)),l||0===l?{r:n,g:r,b:o,a:l}:{r:n,g:r,b:o}}},strToRgbaArray:function(t){let e=[];return t&&(e=t.match(/[\d]{0,3}\.?[\d]*/g).filter(t=>""!==t)),e},setScaleIndex:function(t){const e=this.strToRgbaArray(this.scales[t].color);e&&4===e.length&&(this.scaleIndex=t,this.pickerColor={r:e[0],g:e[1],b:e[2],a:e[3]},this.currentColor=this.scales[t].color)},addColor:function(){let t;const e=this.colorScale&&this.colorScale.scales?this.colorScale.scales.length:-1;-1!==e&&-1===this.scaleIndex?(this.scaleIndex=e,t={value:0,color:this.rgbaToStr(this.hexToRgbA(this.pickerColor))},this.scales.splice(e,0,t),this.setCurrentColorScale()):this.editMode&&-1!==this.scaleIndex&&(this.scales[this.scaleIndex].color=this.rgbaToStr(this.hexToRgbA(this.pickerColor)),this.setCurrentColorScale()),this.closeMenu()},removeScale:function(){-1!==this.scaleIndex&&(this.scales.splice(this.scaleIndex,1),this.setCurrentColorScale(),this.scaleIndex=-1),this.closeMenu()},setScaleColor:function(){const t=("object"==typeof this.pickerColor?[]:this.pickerColor.match(/^#([A-Fa-f0-9]{3,4}){1,2}$/g)).length>0?this.hexToRgbA(this.pickerColor):this.pickerColor;-1!==this.scaleIndex&&this.pickerColor&&(this.scales[this.scaleIndex].color=this.rgbaToStr(t),this.setCurrentColorScale())},resetColorScale:function(){0<this.scales.length&&-1!==this.scaleIndex&&(this.scales[this.scaleIndex].color=this.currentColor,this.setCurrentColorScale()),this.closeMenu()}}},nt=Object(l.a)(it,(function(){var t=this,e=t._self._c;return e("v-menu",{staticStyle:{"max-width":"600px"},attrs:{top:"",absolute:"","offset-y":!0,"close-on-click":!1,"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("div",{staticClass:"d-inline-flex"},[e("v-card",{staticClass:"d-flex flex-row",staticStyle:{"overflow-x":"auto"},attrs:{flat:"",tile:"","max-width":"340"}},[e("draggable",{staticClass:"d-flex flex-row",attrs:{group:"people"},model:{value:t.scales,callback:function(e){t.scales=e},expression:"scales"}},t._l(t.scales,(function(s,i){return e("v-card",t._g({key:"colorScale"+i,staticClass:"rounded-0",staticStyle:{"border-color":"black"},attrs:{outlined:"",color:s.color,"min-height":"40","min-width":"40",tile:""},on:{click:function(e){return t.setScaleIndex(i)}}},a))})),1)],1),t._v(" "),t.colorScaleNull?t._e():e("div",{staticClass:"mt-2"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("v-icon",t._g({},{...a,...s}),[t._v("mdi-plus")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_addNewColor")))])])],1)],1)]}}]),model:{value:t.showCurrentMenu,callback:function(e){t.showCurrentMenu=e},expression:"showCurrentMenu"}},[t._v(" "),e("v-card",{staticClass:"d-flex flex-column justify-center"},[e("div",[e("v-color-picker",{attrs:{mode:t.colorpickerMode,flat:""},model:{value:t.pickerColor,callback:function(e){t.pickerColor=e},expression:"pickerColor"}}),t._v(" "),e("v-card-actions",[e("v-btn",{on:{click:t.addColor}},[t._v("\n            "+t._s(t.$t("session.label_ok"))+"\n          ")]),t._v(" "),-1!==this.scaleIndex?e("v-btn",{on:{click:t.removeScale}},[t._v("\n            "+t._s(t.$t("session.label_remove"))+"\n          ")]):t._e(),t._v(" "),e("v-btn",{on:{click:t.resetColorScale}},[t._v("\n            "+t._s(t.$t("session.label_cancel"))+"\n          ")])],1)],1)])],1)}),[],!1,null,null,null).exports,rt={name:"aeris-datavalidation-colorscaleform",props:{setIsOpen:{type:Function,default:()=>{}},currentView:{type:String,default:()=>""},getChart:{type:Function,default:()=>{}},flushColorScale:{type:Function,default:()=>{}},flushDeleteColorScale:{type:Function,default:()=>{}},colors:{type:Array,default:()=>[]},updateCurrentColorScale:{type:Function,default:()=>{}}},components:{AerisDatavalidationDeleteDialog:M.a,AerisDatavalidationColorScaleSelect:at,AerisDatavalidationCreatecolorscalemenu:nt},watch:{selectedColorScale:{handler:function(){this.editMode&&this.selectedColorScale&&(this.colorScaleName=this.selectedColorScale.name)},immediate:!0}},computed:{exist:function(){let t=[],e=!1;return this.colors&&this.colorScaleName&&this.selectedColorScale&&(t=this.colors.filter(t=>!this.editMode||t.name.toUpperCase()!==this.selectedColorScale.name.toUpperCase()),e=t.some(t=>t.name.toUpperCase()===this.colorScaleName.toUpperCase())),e},getDefaultName:function(){let t="";return this.colorScale&&this.currentView&&(t=this.colorScale.name),t},getColorScales:function(){let t=[];return this.colors&&(t=this.colors.filter(t=>!t.default||this.currentView===this.$t("session.label_addColorScale")),this.currentView===this.$t("session.label_addColorScale")&&t.unshift(this.emptyColorScale)),t},editMode:function(){return this.currentView&&this.currentView===this.$t("session.label_editColorScale")},deleteMode:function(){return this.currentView&&this.currentView===this.$t("session.label_removeColorScale")}},data:()=>({dialog:!1,emptyColorScale:{name:"empty",colorScale:[{color:"rgba(253, 253, 253, 1)",value:0}],description:"reset",default:!0},colorScale:{},pickerColor:null,colorScaleName:"",nameAlert:!1,defaultColorScale:null,currentColorScale:null,selectedColorScale:null,colorScaleDescription:""}),mounted(){this.resetForm()},methods:{setColorScale:function(t){t&&(this.colorScale={id:t.id,name:t.name,description:t.description,colorScale:t.scales.map(t=>({color:t.color,value:t.value}))})},setSelectedColorScale:function(t){t&&t.colorScale&&(this.selectedColorScale={id:t.id,name:t.name,description:t.description,colorScale:t.colorScale.map(t=>({color:t.color,value:t.value}))},this.currentColorScale=Object.assign({},this.selectedColorScale))},setColorScaleValues:function(t,e){let a={};if(t&&(a=t.colorScale.map((e,a)=>{let s=Object.assign({},e);return s.value=a/(t.colorScale.length-1),s})),!e)return a;e(a)},resetForm:function(){this.dialog=!1,this.colorScaleName="",this.currentColorScale=null,this.defaultColorScale=Object.assign({},this.emptyColorScale),this.colorScale=this.selectedColorScale?this.selectedColorScale:this.colors[0],this.selectedColorScale=this.selectedColorScale?this.selectedColorScale:this.colors[0]},closeMenu:function(){this.resetForm(),this.setIsOpen(!1)},setColorScaleProperties:function(t){this.colorScale&&this.setColorScaleValues(this.colorScale,e=>{e&&(this.colorScale.colorScale=e,this.colorScale.name=this.colorScaleName,this.colorScale.description=this.colorScaleName,t&&t())})},createColorScale:function(){this.exist?this.enableAlertName():this.setColorScaleProperties(()=>{this.colorScale.id=null,this.flushColorScale(this.colorScale,()=>{this.closeMenu()})})},updateColorScale:function(){this.exist?this.enableAlertName():this.setColorScaleProperties(()=>{this.updateCurrentColorScale(this.colorScale,()=>{this.closeMenu()})})},removeColorScale:function(){this.dialog=!0},validateDelete:function(){this.flushDeleteColorScale(this.selectedColorScale,()=>{this.closeMenu()})},cancelDelete:function(){this.dialog=!1},enableAlertName:function(){this.nameAlert=!0,setTimeout(()=>{this.nameAlert=!1},2e3)}}},ot={name:"aeris-datavalidation-colorscalehandler",components:{AerisDatavalidationColorScaleForm:Object(l.a)(rt,(function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"pa-2",attrs:{width:"400"}},[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.dialog,"data-cy":"deletesession-dialog",ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validateDelete,cancelCallBack:t.cancelDelete,title:t.$t("session.label_deletion"),message:t.$t("session.message_deleteColorScale")}}),t._v(" "),e("v-form",[e("v-container",[t.nameAlert?e("v-alert",{attrs:{type:"warning"}},[t._v("\n          "+t._s(t.$t("session.message_existName"))+"\n        ")]):t._e(),t._v(" "),e("v-row",[t.deleteMode||t.editMode?t._e():e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:t.$t("session.label_name"),"data-cy":"createChart-textfield",placeholder:t.getDefaultName,"hide-details":!0},model:{value:t.colorScaleName,callback:function(e){t.colorScaleName=e},expression:"colorScaleName"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationColorScaleSelect",{attrs:{getChart:t.getChart,form:!0,colors:t.getColorScales,currentColorScale:t.currentColorScale,defaultColorScale:t.defaultColorScale,setSelectedColorScale:t.setSelectedColorScale}})],1),t._v(" "),t.deleteMode?t._e():e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationCreatecolorscalemenu",{attrs:{form:!0,editMode:t.editMode,setColorScale:t.setColorScale,currentColorScale:t.currentColorScale,selectedColorScale:t.selectedColorScale}})],1),t._v(" "),t.editMode?e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:t.$t("session.label_name"),"data-cy":"createChart-textfield",placeholder:t.getDefaultName,"hide-details":!0},model:{value:t.colorScaleName,callback:function(e){t.colorScaleName=e},expression:"colorScaleName"}})],1):t._e(),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("v-card-actions",[t.deleteMode||t.editMode?t.editMode?e("v-btn",{attrs:{disabled:""===this.colorScaleName},on:{click:t.updateColorScale}},[t._v("\n                "+t._s(t.$t("session.label_save"))+"\n              ")]):e("v-btn",{on:{click:t.removeColorScale}},[t._v("\n                "+t._s(t.$t("session.label_remove"))+"\n              ")]):e("v-btn",{attrs:{disabled:""===this.colorScaleName},on:{click:t.createColorScale}},[t._v("\n                "+t._s(t.$t("session.label_save"))+"\n              ")]),t._v(" "),e("v-btn",{on:{click:t.closeMenu}},[t._v("\n                "+t._s(t.$t("common.close"))+"\n              ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"369a6a33",null).exports},props:{session:{type:Object,default:null},charts:{type:Object},getChart:{type:Function,default:()=>{}},flushColorScale:{type:Function,default:()=>{}},updateCurrentColorScale:{type:Function,default:()=>{}},flushDeleteColorScale:{type:Function,default:()=>{}},currentView:{type:String,default:()=>""},setIsOpen:{type:Function,default:()=>{}},colors:{type:Array,default:()=>[]}},data:()=>({})},lt={name:"aeris-datavalidation-chartmenu",components:{AerisDatavalidationColorscalehandler:Object(l.a)(ot,(function(){var t=this,e=t._self._c;return e("div",[e("v-card",[t.currentView===t.$t("session.label_addColorScale")||t.currentView===t.$t("session.label_editColorScale")||t.currentView===t.$t("session.label_removeColorScale")?e("div",[e("AerisDatavalidationColorScaleForm",{attrs:{getChart:t.getChart,setIsOpen:t.setIsOpen,currentView:t.currentView,colors:t.colors,flushColorScale:t.flushColorScale,flushDeleteColorScale:t.flushDeleteColorScale,updateCurrentColorScale:t.updateCurrentColorScale}})],1):e("div")])],1)}),[],!1,null,"584096ca",null).exports},props:{session:{type:Object,default:null},charts:{type:Object},getChart:{type:Function,default:()=>{}},flushColorScale:{type:Function,default:()=>{}},updateCurrentColorScale:{type:Function,default:()=>{}},flushDeleteColorScale:{type:Function,default:()=>{}},colors:{type:Array,default:()=>[]},menuModelState:{type:Boolean,default:()=>null},chartTabsHandler:{type:Function,default:()=>{}}},data(){return{isOpen:!1,addColorScale:!1,removeColorScale:!1,editColorScale:!1,currentView:this.$t("session.label_addColorScale")}},watch:{addColorScale:function(){this.addColorScale&&(this.currentView=this.$t("session.label_addColorScale"))},editColorScale:function(){this.editColorScale&&(this.currentView=this.$t("session.label_editColorScale"))},removeColorScale:function(){this.removeColorScale&&(this.currentView=this.$t("session.label_removeColorScale"))}},methods:{setIsOpen:function(t){void 0!==t&&(this.isOpen=t)}}},ct=Object(l.a)(lt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-btn-toggle",{attrs:{tile:"",group:""}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},model:{value:t.addColorScale,callback:function(e){t.addColorScale=e},expression:"addColorScale"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-plus")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_addColorScale")))])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},model:{value:t.editColorScale,callback:function(e){t.editColorScale=e},expression:"editColorScale"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-pencil")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_editColorScale")))])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},model:{value:t.removeColorScale,callback:function(e){t.removeColorScale=e},expression:"removeColorScale"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-minus")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_removeColorScale")))])])],1)]}}]),model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[t._v(" "),e("AerisDatavalidationColorscalehandler",{attrs:{charts:t.charts,session:t.session,getChart:t.getChart,colors:t.colors,flushColorScale:t.flushColorScale,chartTabsHandler:t.chartTabsHandler,currentView:t.currentView,setIsOpen:t.setIsOpen,flushDeleteColorScale:t.flushDeleteColorScale,updateCurrentColorScale:t.updateCurrentColorScale}})],1)],1)}),[],!1,null,null,null).exports,dt={name:"aeris-datavalidation-parametermenu",components:{AerisDatavalidationInstrumentInput:A},props:{charts:{type:Object,default:()=>({})},session:{type:Object,default:null},addParameters:{type:Function,default:()=>{}},parametersLabel:{type:Array,default:()=>[]}},data:()=>({isOpen:!1,addParameter:!1}),methods:{setIsOpen:function(t){void 0!==t&&(this.isOpen=t)}}},ht=Object(l.a)(dt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-btn-toggle",{attrs:{tile:"",group:""}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},model:{value:t.addParameter,callback:function(e){t.addParameter=e},expression:"addParameter"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-plus")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("session.label_addParameter")))])])],1)]}}]),model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[t._v(" "),e("AerisDatavalidationInstrumentInput",{attrs:{charts:t.charts,session:t.session,setIsOpen:t.setIsOpen,parametersLabel:t.parametersLabel,addParameters:t.addParameters}})],1)],1)}),[],!1,null,null,null).exports,ut={name:"aeris-datavalidation-chartsselect",props:{disabledSelect:{type:Boolean},charts:{type:Array},parameter:{type:Object},notifySwitchChart:{type:Function},disableParameter:{type:Function,default:()=>{}},getChart:{type:Function,default:()=>{}},instruments:{type:Array,default:()=>[]},parameterChartToDisable:{type:Object,default:()=>{}}},data:()=>({select:null,parameterDisable:!1}),watch:{select:function(t,e){const a=t?t.enName:void 0,s=e?e.enName:void 0;(a||s)&&this.notifySwitchChart(this.parameter,a,s)},charts:{immediate:!0,handler(){this.parameter&&this.getChart(this.parameter,t=>{this.select=t,this.disableParameter(this.parameter)})}},parameterChartToDisable:{immediate:!0,handler(){let t=this.parameterChartToDisable;t&&this.parameter&&t.parameter.name===this.parameter.name&&t.parameter.instrumentId===this.parameter.instrumentId&&t.disable&&(this.select=null)}}},computed:{getCharts:function(){let t,e=[];return this.charts&&this.instruments&&this.parameter&&(t=this.instruments.find(t=>t.id===this.parameter.instrumentId),t&&(e=this.charts.filter(e=>this.chartParameter(e,t)||this.heatmapParameter(e,t)||this.pointSeriesParameter(e,t)))),e}},methods:{heatmapParameter:function(t,e){let a=!1;return t&&e&&(a="Heatmap"===e.type&&0===t.parameters.length),a},chartParameter:function(t,e){let a=!1;return t&&e&&(a=t.parameters.some(t=>t.instrumentId===this.parameter.instrumentId&&t.name===this.parameter.name)),a},pointSeriesParameter:function(t,e){let a=!1;return t&&e&&(a="PointSeries"===e.type&&(0===t.parameters.length||t.parameters.some(t=>{let e=!1;const a=this.instruments.find(e=>e.id===t.instrumentId);return a&&(e="PointSeries"===a.type),e}))),a}}},mt=Object(l.a)(ut,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"max-height":"40px",width:"500px"}},[e("v-select",{attrs:{items:t.getCharts,name:"chart","item-text":"fr"===t.$i18n.locale?"frName":"enName",disabled:t.disabledSelect,"single-line":"","return-object":""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1)}),[],!1,null,"c93eb632",null).exports,pt={name:"aeris-datavalidation-chartsselects",components:{AerisDatavalidationChartsSelect:mt},props:{charts:{type:Object,default:()=>null},session:{type:Object,default:()=>{}},parameterChartToDisable:{type:Object,default:()=>{}},notifySwitchChart:{type:Function},parameters:{type:Array,default:()=>[]},disableParameter:{type:Function},chartTabsHandler:{type:Function,default:()=>{}},getChart:{type:Function,default:()=>{}},instruments:{type:Array,default:()=>[]}},computed:{getCharts:function(){return Object.values(this.charts)},getParametersToValidate:function(){let t=[];return this.session&&(t=this.session.parametersToValidate),t}}},gt=Object(l.a)(pt,(function(){var t=this,e=t._self._c;return e("v-col",{staticClass:"pt-2 pb-0",attrs:{cols:"4"}},[e("v-list",t._l(t.parameters,(function(a,s){return e("v-list-item",{key:a.name+s},[e("v-list-item-action",[e("AerisDatavalidationChartsSelect",{attrs:{getChart:t.getChart,charts:t.getCharts,parameter:a,instruments:t.instruments,disabledSelect:t.getParametersToValidate.some(e=>e.name===t.parameters[s].name),notifySwitchChart:t.notifySwitchChart,disableParameter:t.disableParameter,parameterChartToDisable:t.parameterChartToDisable}})],1)],1)})),1)],1)}),[],!1,null,"f6397b82",null).exports,ft={name:"aeris-datavalidation-chartsselects",components:{AerisDatavalidationColorScaleSelect:at},props:{charts:{type:Object,default:()=>({})},session:{type:Object,default:()=>{}},parametersLabel:{type:Array,default:()=>[]},colors:{type:Array,default:()=>[]},getChart:{type:Function,default:()=>{}}},data:()=>({})},vt=Object(l.a)(ft,(function(){var t=this,e=t._self._c;return e("v-col",{staticClass:"pt-2 pb-0",attrs:{cols:"4"}},[e("v-list",t._l(t.parametersLabel,(function(a,s){return e("v-list-item",{key:a.name+s,staticClass:"mb-2"},[e("v-list-item-action",[e("AerisDatavalidationColorScaleSelect",{attrs:{getChart:t.getChart,parameter:a,colors:t.colors,parameterColorScale:!0}})],1)],1)})),1)],1)}),[],!1,null,null,null).exports,bt={name:"aeris-datavalidation-parameterscheckbox",components:{AerisDatavalidationDeleteDialog:M.a},props:{instruments:{type:Array},parameters:{type:Array},session:{type:Object,default:()=>{}},parametersLabel:{type:Array},parametersCharts:{type:Object,default:()=>{}},charts:{type:Object,default:()=>{}},updateSession:{type:Function,default:()=>{}},addParameter:{type:Function,default:()=>{}},disableChart:{type:Function,default:()=>{}},setCheckedParameters:{type:Function,default:()=>{}},parametersToValidate:{type:Array,default:()=>[]},removeParameter:{type:Function,default:()=>{}},setParametersLabel:{type:Function,default:()=>{}},deleteParameter:{type:Function,default:()=>{}},setParameters:{type:Function,default:()=>{}},setDisplayManagerAlert:{type:Function,default:()=>{}}},data:()=>({dialog:!1,parameter:null,langs:["en","fr"],checkedParameters:[],currentParametersLabel:[]}),watch:{checkedParameters:function(t,e){this.setCheckedParameters(this.checkedParameters),t&&e&&(e.length<t.length?this.flushAddParameter(t):t.length<e.length&&this.flushRemoveParameter(t,e),this.updateSession(this.session))},charts:{handler:function(t,e){this.charts&&void 0===e?this.initParameters():this.activateNewChartsParameters(t,e)},deep:!0,immediate:!0},instruments:{handler:function(){this.currentParametersLabel&&0!==this.instruments.length&&(this.initInstrumentsNames(this.currentParametersLabel),this.setParametersLabel(this.currentParametersLabel))},deep:!0,immediate:!0},parameters:function(){let t=this.checkedParameters;this.parameters.some((e,a)=>e.instrumentName!==t[a].instrumentName&&e.instrumentId!==t[a].instrumentId)&&(this.checkedParameters=this.parameters)},parametersLabel:{handler:function(){let t=this.currentParametersLabel;this.parametersLabel.some((e,a)=>e.instrumentName!==t[a].instrumentName&&e.instrumentId!==t[a].instrumentId)&&(this.currentParametersLabel=this.parametersLabel),this.setEditable(this.currentParametersLabel)},deep:!0,immediate:!0}},computed:{getAuxParameters:function(){let t=[];return this.session&&(t=[...this.session.auxParameters]),t}},methods:{disabledParameter:function(t){let e=!1;return this.session&&(e=this.session.parametersToValidate.some(e=>e.name===t.name&&e.instrumentId===t.instrumentId)),e},setEditable:function(t){t&&this.session&&t.forEach(t=>{t.editable=!this.session.parametersToValidate.some(e=>e.name===t.name&&e.instrumentId===t.instrumentId)})},registreParametersColors:function(t){t&&t.forEach(({color:t})=>{t&&this.addColor(t)})},initInstrumentsNames:function(t){t&&(this.currentParametersLabel=t.map(t=>{let e,a=t;return void 0===a.instrumentName&&(e=this.instruments.find(e=>e.id===t.instrumentId),a.instrumentName=e.name),a}),this.setEditable(this.currentParametersLabel))},getChart:function(t){let e;return t&&this.charts&&(e=Object.values(this.charts).find(e=>e.parameters.some(e=>e.name===t.name&&e.instrumentName===t.instrumentName))),e},initParameters:function(){let t;Object.values(this.charts)[0]&&(Object.keys(this.charts).forEach(e=>{t=this.charts[e].parameters,this.checkedParameters=[...this.checkedParameters,...t],this.currentParametersLabel=[...this.currentParametersLabel,...t],this.setEditable(this.currentParametersLabel),this.setParameters(this.checkedParameters),this.setParametersLabel(this.currentParametersLabel)}),this.addOffParameters())},activateNewChartsParameters:function(){this.charts&&Object.keys(this.charts).forEach(t=>{this.charts[t].parameters.forEach(t=>{this.checkedParameters.some(e=>e.instrumentId===t.instrumentId&&e.name===t.name)||(this.checkedParameters=[...this.checkedParameters,t])})})},addOffParameters:function(){const t=this.getAuxParameters;t&&(t.forEach(t=>{this.currentParametersLabel.some(e=>e.name===t.name)||(this.currentParametersLabel=[...this.currentParametersLabel,t],this.setParametersLabel(this.currentParametersLabel))}),this.setEditable(this.currentParametersLabel))},flushAddParameter:function(t){let e=t[t.length-1],a=this.parametersCharts[e.name+e.instrumentId];a&&e&&(this.disableChart(e,a,!1),this.addParameter(e,a))},flushRemoveParameter:function(t,e){let a=e.filter(e=>!t.some(t=>t.name===e.name))[0],s=this.getChart(a);a&&s&&(this.removeParameter(a,s.enName),this.disableChart(a,s.enName,!0))},deleteTargetParameter:function(t){t&&(this.parameter=t,this.dialog=!0)},validateDelete:function(){let t;this.closeDialg(),this.parameter&&(t=this.checkedParameters.some(t=>t.name===this.parameter.name&&t.instrumentId===this.parameter.instrumentId),this.deleteParameter(this.parameter,t,!0))},closeDialg:function(){this.dialog=!1}}},yt={name:"aeris-datavalidation-displayManagement",components:{AerisDatavalidationChartMenu:tt,AerisDatavalidationChartsSelects:gt,AerisDatavalidationParameterMenu:ht,AerisDatavalidationColorScaleMenu:ct,AerisDatavalidationColorScaleSelects:vt,AerisDatavalidationParametersCheckBox:Object(l.a)(bt,(function(){var t=this,e=t._self._c;return e("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"4"}},[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.dialog,"data-cy":"deletesession-dialog",ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validateDelete,cancelCallBack:t.closeDialg,title:t.$t("session.label_deletion"),message:t.$t("session.message_deleteParameter")}}),t._v(" "),e("v-list",t._l(t.currentParametersLabel,(function(a,s){return e("v-list-item",{key:a.name.replace(" ","")+a.instrumentId+s,staticClass:"ma-4 pl-0"},[e("v-list-item-action",[a.editable?e("span",[e("v-checkbox",{attrs:{"hide-details":"",value:a,color:a.color.name?a.color.name:""},scopedSlots:t._u([{key:"label",fn:function(){return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("span",t._g(t._b({staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"190px"}},"span",i,!1),s),[t._v("\n                       "+t._s(a.name+"("+a.instrumentName+")")+"\n                     ")])]}}],null,!0)},[t._v(" "),e("span",[t._v(" "+t._s(t.$t("session.label_parameter")+" : "+a.name+", "+t.$t("session.label_instrument")+" : "+a.instrumentName))])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("span",{on:{click:function(t){t.stopPropagation()}}},[a.editable?e("v-icon",t._g(t._b({on:{click:function(e){return t.deleteTargetParameter(a)}}},"v-icon",i,!1),s),[t._v("\n                         mdi-delete\n                      ")]):t._e()],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(" "+t._s(t.$t("session.label_remove")))])])]},proxy:!0}],null,!0),model:{value:t.checkedParameters,callback:function(e){t.checkedParameters=e},expression:"checkedParameters"}})],1):e("span",{staticClass:"font-weight-black text-decoration-underline"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("span",t._g(t._b({staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"190px"}},"span",i,!1),s),[t._v("\n                       "+t._s(a.name+"("+a.instrumentName+")")+"\n                     ")])]}}],null,!0)},[t._v(" "),e("span",[t._v(" "+t._s(t.$t("session.label_parameter")+" : "+a.name+", "+t.$t("session.label_instrument")+" : "+a.instrumentName))])])],1)])],1)})),1)],1)}),[],!1,null,"7de5adee",null).exports},props:{session:{type:Object,default:()=>{}},chartTabsHandler:{type:Function,default:()=>{}},removeParameter:{type:Function},addParameter:{type:Function},removeChart:{type:Function},charts:{type:Object,default:()=>{}},switchParameterChart:{type:Function,default:()=>{}}},computed:{getParametersToValidate:function(){let t=[];return this.session&&(t=this.session.parametersToValidate),t}},mixins:[d.a],data:()=>({value:1,colors:[],theme:null,active:!0,offset:!0,dialog:!1,menuModel:!1,parameters:[],tabs:"general",instruments:[],closeMenu:!1,chartsSelects:[],toggleOne:void 0,parametersLabel:[],parametersColors:[],checkedParameters:[],parametersCharts:{},oldAuxInstrument:null,currentAuxInstrument:null,displayManagerAlert:!1,parameterChartToDisable:null}),watch:{session:function(){const{theme:t}=this.session;t&&(this.theme="light"!==t)},theme:function(){this.$vuetify.theme.dark=this.theme,this.$store.commit("updateCurrentTheme",{name:this.theme?"dark":"light"})},dialog:function(){this.session&&this.dialog&&this.getInstruments(t=>{t&&(this.instruments=t.sort((t,e)=>t.name.localeCompare(e.name)))})}},mounted(){this.initColors()},methods:{initColors:function(){this.getColors(t=>{t&&(this.colors=t)})},addColor:function(t){t&&this.parametersColors.push(t)},setParameters:function(t){t&&(this.parameters=t)},setParametersLabel:function(t){t&&(this.parametersLabel=t)},getChart:function(t,e){let a=void 0;if(this.session&&this.session.charts&&t&&(a=this.session.charts.find(e=>e.parameters.some(e=>e.name===t.name&&e.instrumentId===t.instrumentId))),!e)return a;e(a)},getChartByName:function(t){let e=null;return this.session&&this.session.charts&&t&&(e=this.session.charts.find(e=>e.enName===t)),e},getInstrument:function(t){let e=null;return t&&(e=this.instruments.find(e=>e.id===t.instrumentId)),e},disableParameter:function(t){this.parameters=this.parameters.filter(e=>e.name!==t.name)},setParameterColor:function(t,e){let a;const s=[...this.parametersLabel],i=this.colors.filter(e=>"Heatmap"===t.type&&e.colorScale||"PointSeries"===t.type&&null===e.colorScale);t&&e&&i&&("Heatmap"===t.type?e.color=i[0]:(a=i.find(t=>!s.some(e=>e.color.name===t.name)),e.color=a||i[i.length-1],this.parametersColors.push(e.color)))},addParam:function(t,e){t&&!this.parametersLabel.some(t=>t.name===e.name)&&(this.setParameterColor(t,e),this.session.auxParameters.some(t=>t.name===e.name)||(this.session.auxParameters=[...this.session.auxParameters,e]),this.parametersLabel.push(e))},addParameters:function(t,e,a){t&&e&&(e.forEach(e=>{this.addParam(t,e,a)}),this.createCharts(t,e,0,()=>{this.updateSession(this.session)}))},deleteParameter:function(t,e,a){let s=this.getChart(t);const i=this.parametersLabel.findIndex(e=>e.name===t.name&&e.instrumentId===t.instrumentId);-1!==i&&t&&(this.session.auxParameters=this.session.auxParameters.filter(e=>e.name!==t.name),e&&s&&this.removeParameter(t,s.enName),this.parametersLabel.splice(i,1),a&&this.updateSession(this.session))},setCheckedParameters:function(t){t&&(this.checkedParameters=t)},disableChart:function(t,e,a){t&&e&&(delete this.parametersCharts[t.name+t.instrumentId],this.parameterChartToDisable={parameter:t,chart:e,disable:a})},checkChartConf:function(t,e){let a;const s=this.getChartByName(t),i=s&&s.parameters[0]?s.parameters[0]:e;s&&(a=this.getInstrument(i),a&&s.title!==a.name&&(s.title=a.name))},notifySwitchChart:function(t,e,a){t&&e&&this.parametersLabel.some(e=>e.name===t.name)&&(this.parametersCharts[t.name+t.instrumentId]=e),t&&this.checkedParameters.some(e=>e.name===t.name)&&(this.checkChartConf(e,t),this.switchParameterChart(t,e,a))},flushColorScale:function(t,e){t&&this.createColor(t,t=>{t&&(this.colors=[...this.colors,t]),e&&e()})},updateCurrentColorScale:function(t,e){t&&this.updateColor(t,a=>{this.colors=this.colors.map(e=>e.name!==t.name?e:a),e&&e()})},flushDeleteColorScale:function(t,e){t&&this.deleteColor(t.id,()=>{this.colors=this.colors.filter(e=>e.id!==t.id),e&&e()})},genNewTabName:function(t){let e,a=[1];const s=/[0-9]*$/,i=this.$t("session.label_secondaryChart");if(this.session&&this.session.charts){if(this.session.charts.forEach(t=>{t.enName.includes(i)&&a.push(Number(t.enName.match(s)[0]))}),e=i+" "+(Math.max(...a)+1),!t)return e;t(e)}},getNewChart:function(t,e){const{workPeriod:a}=this.session,s=t&&""!==t?t:this.genNewTabName(),i=this.getInstrument(e[0]);return{endXaxis:a.endDate,startXaxis:a.startDate,startYaxis:null,endYaxis:null,selections:[],frName:s,enName:s,title:i?i.name:"title",parameters:e||[]}},addNewChart:function(t,e,a){let s;this.session&&(s=this.getNewChart(t,e),this.session.charts=[...this.session.charts,s],this.updateSession(this.session,t=>{t&&(this.chartTabsHandler(s,"add"),a&&a(s))}))},createCharts:function(t,e,a,s){let i;t&&e&&a<e.length?(i=this.session.charts.find(t=>0===t.parameters.length),i?(i.parameters=[e[a]],i.title=t.name,this.createCharts(t,e,a+1)):this.addNewChart("",[e[a]],()=>{this.createCharts(t,e,a+1)})):s&&s()},setDisplayManagerAlert:function(t){t&&(this.displayManagerAlert=!0,setTimeout(()=>{this.displayManagerAlert=!1},2e3))},cancelDialog:function(){this.toggleOne=void 0,this.dialog=!1}}},Dt=(a(371),Object(l.a)(yt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center ml-4"},[e("v-dialog",{attrs:{persistent:"",width:1e3},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-btn-toggle",{attrs:{tile:"",color:"deep-purple accent-3",borderless:"",group:""},model:{value:t.toggleOne,callback:function(e){t.toggleOne=e},expression:"toggleOne"}},[e("v-btn",t._g(t._b({staticClass:"mb-3 mt-3 blue--text",attrs:{depressed:""}},"v-btn",s,!1),a),[e("v-icon",{attrs:{left:""}},[t._v("mdi-chart-line-variant")]),t._v(" "+t._s(t.$t("session.label_displayManagement"))+"\n          ")],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n          "+t._s(t.$t("session.label_displayManagement"))+"\n        ")]),t._v(" "),t.displayManagerAlert?e("v-alert",{attrs:{type:"warning"}},[t._v("\n          "+t._s(t.$t("session.message_existName"))+"\n        ")]):t._e(),t._v(" "),e("v-container",{staticClass:"pt-0 pb-0"},[e("v-row",[e("v-col",{attrs:{cols:"4"}},[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(t.$t("session.label_parameter")))])],1),t._v(" "),e("AerisDatavalidationParameterMenu",{attrs:{charts:t.charts,session:t.session,parametersLabel:t.parametersLabel,addParameters:t.addParameters}})],1),t._v(" "),e("v-divider",{staticClass:"mt-2"})],1),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(t.$t("session.label_chart")))])],1),t._v(" "),e("AerisDatavalidationChartMenu",{attrs:{charts:t.charts,session:t.session,addNewChart:t.addNewChart,genNewTabName:t.genNewTabName,deleteParameter:t.deleteParameter,chartTabsHandler:t.chartTabsHandler}})],1),t._v(" "),e("v-divider",{staticClass:"mt-2"})],1),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(t.$t("session.label_color")))])],1),t._v(" "),e("AerisDatavalidationColorScaleMenu",{attrs:{charts:t.charts,session:t.session,colors:t.colors,chartTabsHandler:t.chartTabsHandler,getChart:t.getChart,flushColorScale:t.flushColorScale,flushDeleteColorScale:t.flushDeleteColorScale,updateCurrentColorScale:t.updateCurrentColorScale}})],1),t._v(" "),e("v-divider",{staticClass:"mt-2"})],1)],1),t._v(" "),e("v-row",{staticStyle:{overflow:"auto","max-height":"500px"}},[e("AerisDatavalidationParametersCheckBox",{attrs:{charts:t.charts,session:t.session,parameters:t.parameters,instruments:t.instruments,addParameter:t.addParameter,removeParameter:t.removeParameter,parametersLabel:t.parametersLabel,parametersCharts:t.parametersCharts,getChart:t.getChart,disableChart:t.disableChart,updateSession:t.updateSession,setParameters:t.setParameters,deleteParameter:t.deleteParameter,setParametersLabel:t.setParametersLabel,setCheckedParameters:t.setCheckedParameters,setDisplayManagerAlert:t.setDisplayManagerAlert}}),t._v(" "),e("AerisDatavalidationChartsSelects",{attrs:{charts:t.charts,session:t.session,getChart:t.getChart,instruments:t.instruments,parameters:t.parametersLabel,chartTabsHandler:t.chartTabsHandler,parameterChartToDisable:t.parameterChartToDisable,disableParameter:t.disableParameter,notifySwitchChart:t.notifySwitchChart}}),t._v(" "),e("AerisDatavalidationColorScaleSelects",{attrs:{charts:t.charts,session:t.session,colors:t.colors,parametersLabel:t.parametersLabel,getChart:t.getChart}})],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{on:{click:t.cancelDialog}},[t._v("\n            "+t._s(t.$t("common.close"))+"\n          ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-switch",{attrs:{color:"gray","prepend-icon":"mdi-brightness-6"},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports),xt={name:"aeris-datavalidation-toolbar",props:{session:{type:Object,default:()=>{}},webcomponent:{type:Boolean,default:!0},qualityFlags:{type:Array,default:()=>[]},chartTabsHandler:{type:Function},addParameter:{type:Function},removeParameter:{type:Function},removeChart:{type:Function},charts:{type:Object,default:()=>null},switchParameterChart:{type:Function,default:()=>{}},xaxisShortName:{type:String,default:"Time"},yaxisShortName:{type:String,default:"Value"},updateCurrentPeriod:{type:Function},coverageFlags:{type:Array},notifyDeleteTargetFlag:{type:Function}},components:{AerisDatavalidationWorksFlowDialog:G,AerisDatavalidationDisplayManagement:Dt},computed:{getDenseState:function(){switch(this.$vuetify.breakpoint.name){case"xs":case"sm":return!1;default:return!0}},getProminentState:function(){switch(this.$vuetify.breakpoint.name){case"xs":case"sm":return!0;default:return!1}},getClassState:function(){switch(console.log("Test screen : ",this.$vuetify.breakpoint.name),this.$vuetify.breakpoint.name){case"xs":case"sm":return"ml-3 mt-2 mb-0";default:return"d-flex justify-center mt-2 mb-0 ml-4 mr-4"}}},methods:{updateSessionTheme:function(t){this.session&&t&&(this.session.theme=t,this.updateSession(this.session))}}},Ct=Object(l.a)(xt,(function(){var t=this,e=t._self._c;return t.webcomponent?t._e():e("v-card",{staticClass:"ml-4 mr-4 mt-2",attrs:{color:"grey lighten-4",flat:"",tile:""}},[e("v-toolbar",{attrs:{dense:""}},[e("v-spacer"),t._v(" "),e("AerisDatavalidationWorksFlowDialog",{attrs:{session:t.session,webcomponent:t.webcomponent,xaxisShortName:t.xaxisShortName,yaxisShortName:t.yaxisShortName,qualityFlags:t.qualityFlags,coverageFlags:t.coverageFlags,updateCurrentPeriod:t.updateCurrentPeriod}}),t._v(" "),e("v-divider",{attrs:{vertical:""}}),t._v(" "),e("AerisDatavalidationDisplayManagement",{attrs:{charts:t.charts,session:t.session,removeChart:t.removeChart,addParameter:t.addParameter,removeParameter:t.removeParameter,chartTabsHandler:t.chartTabsHandler,switchParameterChart:t.switchParameterChart}}),t._v(" "),e("v-spacer")],1)],1)}),[],!1,null,"70891278",null).exports,_t={name:"aeris-datavalidation-loginmenu",props:{login:{type:Function,default:()=>{}}},data:function(){return{authenticated:!1}}},St=(Object(l.a)(_t,(function(){var t=this._self._c;return t("v-list-item",[t("v-tab",{attrs:{"data-cy":"login-tab"},on:{click:this.login}},[t("v-list-item-content",[t("v-list-item-title",[this._v("\n          "+this._s(this.$t("appbar.login"))+"\n        ")])],1),this._v(" "),t("v-list-item-action",[t("v-icon",[this._v("mdi-login")])],1)],1)],1)}),[],!1,null,"0078fed2",null).exports,a(300),{name:"aeris-datavalidation-landscapelayout",props:{nbrChildElement:{type:Number,default:1},justify:{type:String,default:"center"},padding:{type:String,default:"pa-8"},cols:{type:Array,default:()=>[12]}},data:()=>({gridMaxPoint:12})}),Pt=Object(l.a)(St,(function(){var t=this,e=t._self._c;return e("div",[e("v-row",{attrs:{justify:t.justify}},t._l(t.nbrChildElement,(function(a){return e("v-col",{key:a,class:t.padding,attrs:{cols:t.cols[a-1]}},[t._t("portrait"+a)],2)})),1)],1)}),[],!1,null,"fbdf38aa",null).exports;var Ft={name:"aeris-datavalition-sessionform",components:{AerisDatavalidationPortraitLayaout:Pt},props:{sessions:{type:Array,default:()=>[]},initNewSession:{type:Function,defaut:()=>{}},setCurrentView:{type:Function,defaut:()=>{}},createNewSession:{type:Function,defaut:()=>{}},getInstruments:{type:Function,defaut:()=>{}},getColors:{type:Function,defaut:()=>{}},existSession:{type:Function,defaut:()=>{}},updateInstrument:{type:Function,defaut:()=>{}},getProductAvailablePeriods:{type:Function,defaut:()=>{}}},mixins:[p.a],data:()=>({colorCount:0,parameters:[],instruments:[],is2dTest:!1,numberOfPeriodDay:1,currentInstrument:null,newSessionAlertMessage:"",parametersToValidate:[],newSessionAlertError:!1,currentPeriod:{startDate:null,endDate:null}}),watch:{currentInstrument:function(){const{rootUrl:t}=this.currentInstrument;this.currentInstrument&&(t.includes("localhost")?(this.parameters=this.currentInstrument.parameters,this.parametersToValidate=[]):this.getProductAvailablePeriods(this.currentInstrument,null,null,t=>{t&&t.start_date&&t.end_date&&(this.currentInstrument.start_date=this.dateToUtc(new Date(t.start_date+"T00:00:00")),this.currentInstrument.end_date=this.dateToUtc(new Date(t.end_date+"T23:59:59")),this.updateInstrument(this.currentInstrument)),this.parameters=this.currentInstrument.parameters,this.parametersToValidate=[]}))}},computed:{disabledCreateButton:function(){return!this.is2dTest&&0===this.parametersToValidate.length},disabledParameterToValidate:function(){return 0===this.parameters.length}},mounted(){this.initForm()},methods:{dateToUtc:c.e,getDateTime:c.j,addDayToDate:c.a,initForm:function(){this.getInstruments(t=>{t&&(this.instruments=t)})},getLocalDefaultPeriod:function(){let t,e,a={};const{start_date:s,end_date:i}=this.currentInstrument;return s&&i&&(t=this.getDateTime(s,!0),e=this.getDateTime(i,!0),a.startDate=this.dateToUtc(new Date(t+"T00:00:00")),a.endDate=this.dateToUtc(new Date(e+"T23:59:59"))),a},getDefaultPeriod:function(){let t,e,a={};const{rootUrl:s,start_date:i,end_date:n}=this.currentInstrument;return s.includes("localhost")?a=this.getLocalDefaultPeriod():this.currentInstrument&&("PointSeries"===this.currentInstrument.type?(t=this.getDateTime(i,!0),e=this.getDateTime(this.dateToUtc(this.addDayToDate(i,this.numberOfPeriodDay)),!0),a.startDate=this.dateToUtc(new Date(t+"T00:00:00")),a.endDate=this.dateToUtc(new Date(e+"T23:59:59"))):(t=this.getDateTime(this.dateToUtc(this.addDayToDate(n,this.numberOfPeriodDay,!1,!0)),!0),e=this.getDateTime(n,!0),a.startDate=this.dateToUtc(new Date(t+"T00:00:00")),a.endDate=this.dateToUtc(new Date(e+"T23:59:59")))),a},startNewSessionn:function(){let t;const{user:e}=this.$store.state.common;this.getChart(!0,[this.parametersToValidate],[],a=>{this.getChart(!1,this.currentInstrument.auxParameters,[this.parametersToValidate],s=>{a&&s&&e&&(t={lock:!0,theme:"light",auxParameters:this.currentInstrument.auxParameters,charts:[a,s],creationDate:this.dateToUtc(new Date),scatterMode:!1,synchronization:!1,piEmail:e.email,instrument:this.currentInstrument,currentSecondChartName:"Secondary chart",parametersToValidate:[this.parametersToValidate],workPeriod:this.getDefaultPeriod()},this.createNewSession(t))})})},create:function(){this.currentInstrument&&this.parametersToValidate&&this.existSession(this.currentInstrument.id,this.parametersToValidate.name,t=>{t?this.enableAlert(this.$t("configuration.message_existSession")):this.startNewSessionn()})},getChart:function(t,e,a,s){this.setParametersColors(e,a,e=>{const a={title:this.currentInstrument.name,frName:t?"Graphique principal":"Graphique secondaire",enName:t?"Main chart":"Secondary chart",parameters:e};s&&s(a)})},setParametersColors:function(t,e,a){let s,i,n=t?t.slice():[],r=[...e];this.currentInstrument&&n&&e&&(i=this.currentInstrument.type,this.getColors(t=>{t&&(s=t.filter(t=>"Heatmap"===i&&t.colorScale||"PointSeries"===i&&null===t.colorScale),n.forEach(t=>{this.setParameterColor(t,i,s,r),r.push(t)}),a&&a(n))}))},setParameterColor:function(t,e,a,s){let i;t&&s&&(t.instrumentId=this.currentInstrument.id,"Heatmap"===e?t.color=a[0]:"PointSeries"===e&&(i=a.find(t=>!s.some(e=>e.color.name===t.name)),t.color=i||a[a.length-1]))},enableAlert:function(t){this.newSessionAlertMessage=t,this.newSessionAlertError=!0,this.disableAlert(2e3)},disableAlert:function(t){setTimeout(()=>{this.newSessionAlertError=!1},t)}}},Tt=Object(l.a)(Ft,(function(){var t=this,e=t._self._c;return e("div",[t.newSessionAlertError?e("v-alert",{attrs:{type:"error","data-cy":"sessionform-alert"}},[t._v("\n      "+t._s(t.newSessionAlertMessage)+"\n    ")]):t._e(),t._v(" "),e("v-container",[e("AerisDatavalidationPortraitLayaout",{attrs:{justify:"center",padding:"pa-6",cols:[12,12,12,6,6,6,6],nbrChildElement:7},scopedSlots:t._u([{key:"portrait1",fn:function(){return[e("v-select",{attrs:{items:t.instruments,name:"name","item-text":"name","item-value":"name","data-cy":"sessionFormInstrumentName-select",label:t.$t("configuration.label_instrumentName"),required:"","return-object":""},model:{value:t.currentInstrument,callback:function(e){t.currentInstrument=e},expression:"currentInstrument"}})]},proxy:!0},{key:"portrait2",fn:function(){return[e("v-autocomplete",{attrs:{items:t.parameters,name:"name","item-text":"name","item-value":"name","data-cy":"sessionformparameterstovalid-autocomplete",label:t.$t("configuration.label_parameterToValidate"),disabled:t.disabledParameterToValidate,"return-object":""},model:{value:t.parametersToValidate,callback:function(e){t.parametersToValidate=e},expression:"parametersToValidate"}})]},proxy:!0}])})],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{type:"submit",color:"blue darken-1","data-cy":"sessionformcreate-button",disabled:t.disabledCreateButton,text:""},on:{click:t.create}},[t._v("\n        "+t._s(t.$t("configuration.label_create"))+"\n      ")]),t._v(" "),e("v-btn",{attrs:{type:"submit",color:"blue darken-1","data-cy":"sessionformsessions-button",text:""},on:{click:function(e){return t.setCurrentView("configuration.label_sessionsList")}}},[t._v("\n        "+t._s(t.$t("configuration.label_sessions"))+"\n      ")])],1)],1)}),[],!1,null,"009ec19b",null).exports,wt={name:"aeris-datavalidation-accountdialog",props:{logout:{type:Function,default:()=>{}}},data:()=>({user:{initials:"test",fullName:"test",email:"test"}}),mounted(){const{family_name:t,given_name:e,email:a}=s.default.$keycloak.tokenParsed;t&&e&&a&&(this.user={initials:(t.charAt(0)+e.charAt(0)).toUpperCase(),fullName:t+" "+e,email:"string"==typeof a?a:null},this.$store.commit("updateUser",this.user))}},Mt=(Object(l.a)(wt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mr-3",staticStyle:{height:"50px"}},[e("v-menu",{attrs:{"min-width":"200px",rounded:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-btn",t._g({attrs:{icon:"","x-large":"","data-cy":"account-button"}},a),[e("v-avatar",{attrs:{color:"brown"}},[e("span",{staticClass:"white--text headline"},[t._v(t._s(t.user.initials))])])],1)]}}])},[t._v(" "),e("v-card",[e("v-list-item-content",{staticClass:"justify-center"},[e("div",{staticClass:"mx-auto text-center"},[e("v-avatar",{attrs:{color:"brown"}},[e("span",{staticClass:"white--text headline"},[t._v(t._s(t.user.initials))])]),t._v(" "),e("h3",[t._v(t._s(t.user.fullName))]),t._v(" "),e("p",{staticClass:"caption mt-1"},[t._v("\n              "+t._s(t.user.email)+"\n            ")]),t._v(" "),e("v-divider",{staticClass:"my-3"}),t._v(" "),e("v-btn",{attrs:{depressed:"",rounded:"",text:""},on:{click:t.logout}},[t._v("\n              "+t._s(t.$t("appbar.logout"))+"\n            ")])],1)])],1)],1)],1)}),[],!1,null,null,null).exports,a(286)),kt={name:"aeris-datavalidation-chartstabwrapper",props:{hidetab:{type:Boolean,default:!1},tabId:{type:String,default:"main-tab"},charttabcolor:{type:String,default:"light-blue"},tabCentered:{type:Boolean,default:!0},tabClass:{type:String,default:""},tabName:{type:String,default:""}}},It={name:"aeris-datavalidation-chartstabs",components:{AerisDatavalidationChart:U,AerisDataValidationChartsWrapper:Object(l.a)(kt,(function(){var t=this,e=t._self._c;return t.hidetab?e("div",[t._t("default")],2):e("div",{class:t.tabClass},[e("v-tabs",{class:"elevation-2 "+t.tabId,attrs:{dark:"","background-color":t.charttabcolor,centered:t.tabCentered}},[e("v-tab",{staticClass:"white--text"},[t._v("\n        "+t._s(t.tabName)+"\n      ")]),t._v(" "),e("v-tab-item",[t._t("default")],2)],1)],1)}),[],!1,null,null,null).exports,AerisDataValidationWebcomponentWrapper:Mt.a},props:{webcomponent:{type:Boolean,default:!0},charts:{type:Object,default:()=>({})},chartdata:{type:Array,default:()=>[]},themes:{type:Array,default:()=>[]},chartname:{type:String,default:"mainChart"},charttitle:{type:String,default:"Default title"},slidervisible:{type:Boolean,default:!1},currentSession:{type:Object,default:()=>null},secondChartsParameters:{type:Array,default:()=>[]},setAxisShortsNames:{type:Function,default:()=>{}}},computed:{getMainChartName:function(){let t=""===this.chartname?"Default chart":this.chartname,e=Object.values(this.charts);return this.charts&&0<e.length&&(t="fr"===this.$i18n.locale?e[0].frName:e[0].enName),t},getMainChartTitle:function(){let t="",e=Object.values(this.charts);return this.charts&&0<e.length&&(t=e[0].enName),t},getMainChartParameters:function(){let t=[],e=Object.values(this.charts);return this.charts&&0<e.length&&(t=e[0].parameters),t},getTabClass:function(){return this.$vuetify.breakpoint.name,"ml-4"}},data:()=>({tabs:1,grow:!1,icons:!1,right:!1,centered:!0,tab:"main-tab",vertical:!1,prevIcon:!1,nextIcon:!1,isMainChart:!0}),mounted(){let t=f()("."+this.tab).find(".v-tabs-slider-wrapper");t&&t.remove()}},$t=Object(l.a)(It,(function(){var t=this,e=t._self._c;return e("AerisDataValidationWebcomponentWrapper",{attrs:{webcomponent:t.webcomponent}},[e("AerisDataValidationChartsWrapper",{attrs:{tabId:t.tab,tabClass:t.getTabClass,tabCentered:t.centered,isMainChart:t.isMainChart,tabName:t.getMainChartName}},[e("v-card",{attrs:{flat:"",tile:""}},[e("AerisDatavalidationChart",{attrs:{charts:t.charts,defaultthemes:t.themes,isMainChart:t.isMainChart,webcomponent:t.webcomponent,chartName:t.getMainChartTitle,currentSession:t.currentSession,parameters:t.getMainChartParameters,setAxisShortsNames:t.setAxisShortsNames,secondChartsParameters:t.secondChartsParameters}})],1)],1)],1)}),[],!1,null,"041f29b9",null).exports,At={name:"aeris-datavalidation-periodstable",props:{session:{type:Object,default:()=>null},periodsData:{type:Array,default:()=>[]},setDialogState:{type:Function,default:()=>{}},addFlags:{type:Function,default:()=>{}},addFlagsByPeriod:{type:Function,default:()=>{}},flagsData:{type:Object,default:()=>({})},importDialog:{type:Boolean,default:()=>!1}},watch:{session:{handler:function(){const t=this.session.charts[0].flags;t&&!this.importDialog?this.periods=this.sortFlagsByDate(t):this.periods=[]},immediate:!0},periodsData:{handler:function(){this.periods&&(this.periods=this.periodsData)},immediate:!0},selected:{handler:function(t,e){this.importDialog&&this.addFlagsByPeriod(t,e)},immediate:!0}},mixins:[p.a],data:()=>({page:1,periods:[],pageCount:0,selected:[],dialog:!1,itemsPerPage:100,singleSelect:!1}),computed:{tableHeaders:function(){return[{text:this.$t("session.label_startDate"),align:"start",sortable:!1,value:"startDate"},{text:this.$t("session.label_endDate"),align:"start",sortable:!1,value:"endDate"},{text:this.$t("session.label_state"),align:"start",sortable:!1,value:"state"},{text:"PI email",align:"start",sortable:!1,value:"piEmail"}]},getPeriodsLen:function(){return this.periods.length}},methods:{isSameFlag:_.k,getDateTime:c.j,getDatePikerDateFormat:c.i}},Nt=(Object(l.a)(At,(function(){var t=this,e=t._self._c;return e("div",[[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.periods,"item-key":"id","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage,height:"400","single-select":!0,"show-select":t.importDialog,disabled:0===t.getPeriodsLen},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.startDate",fn:function({item:a}){return[e("div",[t._v(t._s(t.getDateTime(a.startDate)))])]}},{key:"item.endDate",fn:function({item:a}){return[null===a.endDate?e("div",{staticClass:"pa-4"},[t._v("/")]):e("div",[t._v(t._s(t.getDateTime(a.endDate)))])]}},{key:"item.state",fn:function({item:a}){return[e("div",[t._v(t._s(t.statesNames[a.state.replace(" ","").toLowerCase()]))])]}},{key:"item.piEmail",fn:function({item:a}){return[e("div",[t._v(t._s(a.piEmail))])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],t._v(" "),e("div",{staticClass:"text-center pt-2",attrs:{disabled:0===t.getPeriodsLen}},[e("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),e("v-card-actions",[e("v-btn",{on:{click:function(e){return t.setDialogState(!1)}}},[t._v("\n        "+t._s(t.$t("common.close"))+"\n      ")])],1)],2)}),[],!1,null,"cedac9fc",null).exports,a(299),{name:"aeris-datavalidation-sessionsable",props:{pageCount:{type:Number},sessions:{type:Array},initNewSession:{type:Function},setCurrentView:{type:Function},continueSession:{type:Function},notifyDeleteSession:{type:Function},getInstrumentByName:{type:Function},updateSessionState:{type:Function},updateInstrument:{type:Function,defaut:()=>{}},switchCurrentPage:{type:Function},getProductAvailablePeriods:{type:Function,defaut:()=>{}},getSessionById:{type:Function,defaut:()=>{}}},components:{AerisDatavalidationDeleteDialog:M.a},data:()=>({clicks:0,dialog:!1,currentPage:1,itemsPerPage:5,sessionMessage:"",singleSelect:!0,targetSession:null,currentSession:null,currentSessions:[],currentPageCount:0,sessionOpen:!1,parametersToValidate:[],instrumentParameters:[]}),watch:{sessions:function(){this.sessions&&(this.currentSessions=this.sessions)},currentPage:function(){this.switchCurrentPage(this.currentPage,this.itemsPerPage)},pageCount:function(){this.currentPageCount=this.pageCount}},computed:{disabledCancelButton:function(){return 0===this.currentSessions.length},tableHeaders:function(){return[{text:this.$t("configuration.label_creationDate"),align:"start",sortable:!1,value:"creationDate"},{text:this.$t("configuration.label_instrumentName"),align:"start",sortable:!1,value:"instrument.name"},{text:this.$t("configuration.label_parameterToValidate"),align:"start",sortable:!1,value:"parametersToValidate"},{text:this.$t("session.label_actions"),value:"actions",sortable:!1}]}},mounted(){this.switchCurrentPage(this.currentPage,this.itemsPerPage)},methods:{dateToUtc:c.e,getDateTimeByFormat:c.k,startSession(t){const{rootUrl:e}=t.instrument;this.getSessionById(t.id,a=>{const s=a.body;s&&t&&e?s.lock?this.enableAlert(this.$t("configuration.message_openSession")):e.includes("localhost")?this.continueSession(t):this.getProductAvailablePeriods(t.instrument.uuid,null,null,e=>{e&&e.start_date&&e.end_date&&(t.instrument.start_date=this.dateToUtc(new Date(e.start_date+"T00:00:00")),t.instrument.end_date=this.dateToUtc(new Date(e.end_date+"T23:59:59")),this.updateInstrument(t.instrument)),this.continueSession(t)}):this.enableAlert(this.$t("configuration.message_sessionHasBeenDeleted"))}),this.clicks=0},deleteSession(t){this.dialog=!0,this.targetSession=t},cancelDelete:function(){this.dialog=!1,this.clicks=0},validateDelete:function(){this.clicks=0,this.notifyDeleteSession(this.targetSession,()=>{const t=this.sessions.indexOf(this.targetSession);this.sessions.splice(t,1),this.switchCurrentPage(this.currentPage,this.itemsPerPage)}),this.dialog=!1},continueLatSession:function(){let t=this.currentSessions;t&&this.startSession(t[0])},addParameters:function(t,e){t&&e&&t.forEach(t=>{e.some(e=>e.name===t.name)||this.currentSession.charts[0].parameters.some(e=>e.name===t.name)||this.currentSession.charts[0].parameters.push(t)})},removeParameters:function(t,e){t&&e&&e.forEach(e=>{t.some(t=>t.name===e.name)||this.currentSession.charts.forEach(t=>{t&&t.parameters.some(t=>t.name===e.name)&&(t.parameters=t.parameters.filter(t=>t.name!==e.name))})})},handleClick(t){this.clicks++,2===this.clicks&&(t&&this.startSession(t),this.clicks=0)},enableAlert:function(t){this.sessionMessage=t,this.sessionOpen=!0,this.disableAlert(2e3)},disableAlert:function(t){setTimeout(()=>{this.sessionOpen=!1},t)}}}),Bt=Object(l.a)(Nt,(function(){var t=this,e=t._self._c;return e("div",[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.dialog,"data-cy":"deletesession-dialog",ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validateDelete,cancelCallBack:t.cancelDelete,title:t.$t("session.label_deletion"),message:t.$t("session.message_deleteSession")}}),t._v(" "),[t.sessionOpen?e("v-alert",{attrs:{type:"error","data-cy":"sessionform-alert"}},[t._v("\n        "+t._s(t.$t("configuration.message_openSession"))+"\n      ")]):t._e(),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{"item-key":"id",items:t.currentSessions,headers:t.tableHeaders,"hide-default-footer":"","data-cy":"session-table"},on:{"click:row":t.handleClick},scopedSlots:t._u([{key:"item.creationDate",fn:function({item:a}){return[e("div",[t._v("\n            "+t._s(t.getDateTimeByFormat(a.creationDate,"fr",null,!0))+"\n          ")])]}},{key:"item.parametersToValidate",fn:function({item:a}){return t._l(a.parametersToValidate,(function(s){return e("div",{key:a.parametersToValidate.indexOf(s)},[e("div",[t._v(t._s(s.name))])])}))}},{key:"item.actions",fn:function({item:a}){return[e("v-btn",{attrs:{icon:""},on:{click:function(e){return t.startSession(a)}}},[e("v-icon",[t._v("mdi-open-in-app")])],1),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(e){return t.deleteSession(a)}}},[e("v-icon",[t._v(" mdi-delete ")])],1)]}}])})],t._v(" "),e("div",{staticClass:"text-center pt-2"},[e("v-pagination",{attrs:{length:t.currentPageCount},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),e("v-card-actions",{staticClass:"align-end"},[e("v-btn",{attrs:{type:"submit",color:"blue darken-1",text:"","data-cy":"newsession-button"},on:{click:function(e){return t.setCurrentView("configuration.label_newSession")}}},[t._v("\n        "+t._s(t.$t("configuration.label_newSession"))+"\n      ")]),t._v(" "),e("v-btn",{attrs:{type:"submit",color:"blue darken-1",text:"",disabled:t.disabledCancelButton,"data-cy":"newsession-button"},on:{click:t.continueLatSession}},[t._v("\n        "+t._s(t.$t("common.close"))+"\n      ")])],1)],2)}),[],!1,null,"aaffbc72",null).exports,Ot={name:"aeris-datavalidation-parametersmenu",props:{item:{type:Object},startSession:{type:Function},deleteSession:{type:Function}},data(){return{isOpen:!1,editSession:!1,removeSession:!1,continueSession:!1,currentView:this.$t("session.label_addChart")}},watch:{continueSession:function(){console.log("test continue session"),this.item&&this.continueSession&&this.startSession(this.item)},editSession:function(){console.log("Test editSession")},removeSession:function(){this.item&&this.removeSession&&this.deleteSession(this.item)}}},jt=(Object(l.a)(Ot,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:""},model:{value:t.continueSession,callback:function(e){t.continueSession=e},expression:"continueSession"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-open-in-app")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("configuration.label_continueTheSession")))])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:""},model:{value:t.removeSession,callback:function(e){t.removeSession=e},expression:"removeSession"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-delete")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("configuration.label_removeSession")))])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{icon:""},model:{value:t.editSession,callback:function(e){t.editSession=e},expression:"editSession"}},"v-btn",s,!1),{...i,...a}),[e("v-icon",[t._v("mdi-pencil")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.$t("configuration.label_editSession")))])])]}}])},[t._v(" "),e("v-card")],1)],1)}),[],!1,null,null,null).exports,a(287)),Et=(a(294),a(292),{name:"aeris-datavalidation-chartstabsliderwrapper",props:{hidetab:{type:Boolean,default:!1},hideChart:{type:Boolean,default:!1},currenttab:{type:String,default:"main-tab"},charttabcolor:{type:String,default:"light-blue"},tabClass:{type:String,default:""},tabs:{type:Array,default:()=>[]},secondChartsParameters:{type:Array,default:()=>[]},setCurrentTab:{type:Function,default:()=>{}}},data:()=>({tab:"",tabsNames:[],parameters:[]}),watch:{currenttab:{handler:function(){this.tab!==this.currenttab&&(this.tab=this.currenttab)},immediate:!0},tab:{handler:function(){this.tab&&""!==this.tab&&this.setCurrentTab(this.tab)},immediate:!0},tabs:{handler:function(){this.tabsNames=this.tabs},immediate:!0},secondChartsParameters:{handler:function(){this.parameters=this.secondChartsParameters},immediate:!0}},computed:{emptyParameters:function(){return 0===this.parameters.length}}}),Vt=Object(l.a)(Et,(function(){var t=this,e=t._self._c;return t.hidetab?e("div",[t._t("default")],2):t.emptyParameters?t._e():e("div",[t.hideChart?t._e():e("div",{class:t.tabClass},[e("v-tabs",{staticClass:"elevation-2",attrs:{"background-color":t.charttabcolor,dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("v-tabs-slider"),t._v(" "),t._l(t.tabsNames,(function({enName:a,frName:s},i){return e("v-tab",{key:"chart"+i,staticClass:"white--text",attrs:{href:"#"+a}},[t._v("\n          "+t._s("fr"===t.$i18n.locale?s:a)+"\n        ")])})),t._v(" "),t._l(t.tabsNames,(function({enName:a,parameters:s,slidervisible:i}){return e("v-tab-item",{key:a.replace(" ",""),attrs:{value:a}},[t._t("default",null,{enName:a,parameters:s,slidervisible:i})],2)}))],2)],1)])}),[],!1,null,null,null).exports,Ht={name:"aeris-datavalidation-secondchartstabs",components:{AerisDatavalidationChart:U,AerisDataValidationWebcomponentWrapper:Mt.a,AerisDataValidationChartsTabsliderWrapper:Vt},props:{webcomponent:{type:Boolean,default:!0},charts:{type:Object,default:()=>({"Default chart":{id:null,frName:"Graphique par défaut",enName:"Default chart",startXaxis:"1970-01-01T00:00:00.000+00:00",endXaxis:"1970-01-01T00:00:00.000+00:00",startYaxis:null,endYaxis:null,parameters:[],flags:[]}})},themes:{type:Array,default:()=>[]},chartsdata:{type:Object,default:()=>({})},chartdata:{type:Array,dafault:()=>[]},chartname:{type:String,default:"secondChart"},charttitle:{type:String,default:"Default title"},slidervisible:{type:Boolean,default:!1},currentSession:{type:Object,default:()=>null},currentSecondChart:{type:String,default:()=>""},setCurrentSecondChart:{type:Function,default:()=>{}},secondChartsParameters:{type:Array,default:()=>[]}},mixins:[d.a],data:()=>({tab:"",icons:!1,hideChart:!1,isMainChart:!1,currentCharts:{}}),computed:{getCharts(){return Object.values(this.currentCharts).filter(t=>"Main chart"!==t.enName)},getTabClass:function(){switch(this.$vuetify.breakpoint.name){case"xs":case"sm":return"ml-6 rounded-pill";default:return"mr-4 rounded-pill"}}},watch:{tab:function(t){let e=Object.assign({},this.currentSession);e.currentSecondChartName=this.tab,this.updateSession(e,()=>{this.setCurrentSecondChart(t)})},"$store.state.chartstore.chartsBreackPoint":{handler:function(){const{chartsBreackPoint:t}=this.$store.state.chartstore;t&&t.parameters&&(this.hideChart=0===t.parameters.length)},immediate:!0},charts:{handler:function(){this.currentCharts=this.charts},immediate:!0},chartsdata:{handler:function(){this.webcomponent&&(this.currentCharts=this.strToJson(this.chartsdata))},immediate:!0},currentSecondChart:function(){""===this.tab&&(this.tab=this.currentSecondChart)}},methods:{strToJson(t){let e=t;if(t)try{e=JSON.parse(t)}catch(t){console.error("Parsing error:",t)}return e},setCurrentTab:function(t){t&&(this.tab=t,this.currentSession.currentSecondChartName=t,this.updateSession(this.currentSession))}}},Lt=Object(l.a)(Ht,(function(){var t=this,e=t._self._c;return e("AerisDataValidationWebcomponentWrapper",{attrs:{webcomponent:t.webcomponent}},[e("AerisDataValidationChartsTabsliderWrapper",{attrs:{currenttab:t.tab,tabs:t.getCharts,tabClass:t.getTabClass,setCurrentTab:t.setCurrentTab,secondChartsParameters:t.secondChartsParameters},scopedSlots:t._u([{key:"default",fn:function(a){return[e("v-card",{attrs:{flat:"",tile:""}},[e("AerisDatavalidationChart",{attrs:{defaultthemes:t.themes,charts:t.currentCharts,chartName:a.enName,parameters:a.parameters,isMainChart:t.isMainChart,currentSession:t.currentSession,currentSecondChart:t.currentSecondChart}})],1)]}}])})],1)}),[],!1,null,null,null).exports,Yt={name:"aeris-datavalidation-landscapelayout",props:{nbrChildElement:{type:Number,default:1},justify:{type:String,default:"center"},padding:{type:String,default:"pa-8"},cols:{type:Array,default:()=>[12]},chartsBreakPoint:{type:Array,default:()=>[]}},watch:{cols:function(){this.cols&&(this.currentCols=this.cols)},chartsBreakPoint:{handler:function(t){this.setChartsCols(t)},immediate:!0}},beforeMount(){this.colSize=this.getNumberOfCol()},data:()=>({colSize:1,gridMaxPoint:12,currentCols:[12,0]}),methods:{getNumberOfCol:function(){return this.gridMaxPoint/this.nbrChildElement},setChartsCols(t){let e=[];const a=0===t.length;switch(this.$vuetify.breakpoint.name){case"xs":case"sm":e=[12,12];break;case"lg":default:e=a?[12,0]:[7,5]}e.some((t,e)=>t!==this.currentCols[e])&&(this.$store.commit("updateBreackPointChange",{cols:e,parameters:t}),this.currentCols=e)}}},zt=Object(l.a)(Yt,(function(){var t=this,e=t._self._c;return e("div",{class:12===t.currentCols[0]&&"mr-4 rounded-pill"},[e("div",{staticClass:"d-flex flex-row"},t._l(t.nbrChildElement,(function(a){return e("v-col",{key:a,class:t.padding,attrs:{cols:t.currentCols[a-1]}},[t._t("land"+a)],2)})),1)])}),[],!1,null,"0ec494e5",null).exports,Xt=(a(297),a(295),{name:"aeris-datavalidation-closingperiodmenu",components:{AerisDatavalidationSelect:H.a,AerisDatavalidationTimePicker:W,AerisDatavalidationDeleteDialog:M.a,AerisDatavalidationDateMounthPicker:q.a},props:{session:{type:Object,default:null},notifyCancelPopUp:{type:Function,default:()=>{}},notifyCloseCurrentPeriod:{type:Function}},mixins:[d.a],data:()=>({dialog:!1,selectedFlags:null}),computed:{disabledClosePeriodButton:function(){let t=!1,e=this.getDefaultFlags;return e&&(t=0<e.length),t},getDefaultStartDate:function(){const{startDate:t}=this.session.currentPeriod;return this.getDatePikerDateFormat(t)},getDefaultStartTime:function(){const{startDate:t}=this.session.currentPeriod;return this.getTimePickerTimeFormat(t)},getDefaultEndDate:function(){const{endDate:t}=this.session.currentPeriod;return this.getDatePikerDateFormat(t)},getDefaultEndTime:function(){const{endDate:t}=this.session.currentPeriod;return this.getTimePickerTimeFormat(t)},getQualityFlags:function(){let t=[];return this.session&&(t=this.session.flags),this.concatFlagCodeLabel(t)}},methods:{getDatePikerDateFormat:c.i,getTimePickerTimeFormat:c.l,concatFlagCodeLabel:function(t){return t&&t.forEach(t=>{t&&(t.concatName=t.code+", "+t.label)}),t},setFlagsSelected:function(t){const e=t[0];e&&(this.selectedFlags=e)},validate:function(){this.dialog=!1,this.flushPeriod(),this.notifyCancelPopUp()},cancel:function(){this.dialog=!1},closePeriod:function(){this.dialog=!0},flushPeriod:function(){const{currentPeriod:t}=this.session;t.state="Already validated",this.updatePeriod(t,t=>{this.getParameterValidatedPeriods(this.session.id,e=>{this.session.currentPeriod=t,this.session.validatedPeriods=e,this.session.otherDataFlag=this.selectedFlags,this.notifyCloseCurrentPeriod()})})}}}),Ut=(Object(l.a)(Xt,(function(){var t=this,e=t._self._c;return e("div",[e("AerisDatavalidationDeleteDialog",{attrs:{dialog:t.dialog,ok:t.$t("session.label_yes"),cancel:t.$t("session.label_no"),okCallBack:t.validate,cancelCallBack:t.cancel,title:t.$t("session.label_closing"),message:t.$t("session.message_closeCurrentPeriod")}}),t._v(" "),e("v-form",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:12,sm:12,md:12}},[e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_startDate"),currentDate:t.getDefaultStartDate,setCurrentDate:()=>{},disabled:!0}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:t.$t("session.label_endDate"),currentDate:t.getDefaultEndDate,setCurrentDate:()=>{},disabled:!0}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationTimePicker",{attrs:{time_label:t.$t("session.label_startTime"),currentTime:t.getDefaultStartTime,setCurrentTime:()=>{},disabled:!0}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("AerisDatavalidationTimePicker",{attrs:{time_label:t.$t("session.label_endTime"),currentTime:t.getDefaultEndTime,setCurrentTime:()=>{},disabled:!0}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("AerisDatavalidationSelect",{attrs:{name:"flags",itemText:"concatName",qualityFlags:t.getQualityFlags,flag_message:t.$t("session.message_novalidateddataflag"),setFlagsSelected:t.setFlagsSelected}})],1),t._v(" "),e("v-col",{attrs:{cols:"12"}},[e("v-card-actions",[e("v-btn",{attrs:{disabled:t.disabledClosePeriodButton},on:{click:t.closePeriod}},[t._v("\n                    "+t._s(t.$t("session.label_windUp"))+"\n                  ")]),t._v(" "),e("v-btn",{on:{click:t.notifyCancelPopUp}},[t._v("\n                    "+t._s(t.$t("common.cancel"))+"\n                  ")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"0452cd1c",null).exports,{name:"aeris-datavalidation-chartstabsdialog"}),Rt=(Object(l.a)(Ut,(function(){return(0,this._self._c)("div",[this._v("Charts tabs")])}),[],!1,null,"5fff5e10",null).exports,{name:"aeris-datavalidation-parametersdialog",components:{AerisDatavalidationChartsSelect:mt},props:{linkedParameters:{type:Array,default:()=>[]},auxParameters:{type:Array,default:()=>[]},addNewChart:{type:Function,default:()=>{}},removeParameter:{type:Function},addParameter:{type:Function},removeChart:{type:Function},charts:{type:Object,default:()=>null},switchParameterChart:{type:Function,default:()=>{}},parametersLabel:{type:Array,default:()=>{}},setParameters:{type:Function,default:()=>{}}},data:()=>({parameters:[]}),watch:{parameters:function(t){this.setParameters(t)}}}),Wt=(Object(l.a)(Rt,(function(){var t=this,e=t._self._c;return e("div",[e("v-row",{attrs:{justify:"center"}},[e("v-col",{attrs:{cols:"6"}},[e("v-list",[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(t.$t("session.label_parameter")))])],1)],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-list",t._l(t.parametersLabel,(function(a){return e("v-list-item",{key:a.name,staticClass:"ma-3"},[e("v-list-item-action",[e("v-checkbox",{attrs:{label:a.name,color:a.color,value:a,"hide-details":""},model:{value:t.parameters,callback:function(e){t.parameters=e},expression:"parameters"}})],1)],1)})),1)],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-list",[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("Chart")])],1)],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-list",t._l(t.parametersLabel,(function(a,s){return e("v-list-item",{key:a.name},[e("v-list-item-action",[e("AerisDatavalidationChartsSelect",{attrs:{selectIndex:s,charts:t.getCharts,currentParameter:t.parametersLabel[s],switchParameterChart:t.switchParameterChart}})],1)],1)})),1)],1)],1)],1)}),[],!1,null,"3bf5d625",null).exports,{name:"aeris-datavalidation-deletedialog",props:{dialog:{type:Boolean,default:()=>!1},title:{type:String,default:()=>"Dialog title"},message:{type:String,default:()=>"Dialog message"},ok:{type:String,default:()=>"OK"},cancel:{type:String,default:()=>"cancel"},okCallBack:{type:Function,default:()=>{}},cancelCallBack:{type:Function,default:()=>{}}},components:{AerisDatavalidationTypography:jt.a}}),qt=(Object(l.a)(Wt,(function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{persistent:"","max-width":"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-alert",{attrs:{type:"warning"}},[t._v("\n           "+t._s(t.title)+"\n         ")]),t._v(" "),e("v-card-text",{staticClass:"d-flex justify-center"},[e("AerisDatavalidationTypography",{attrs:{text:t.message,type:"h6"}})],1),t._v(" "),e("v-card-actions",{staticClass:"d-flex justify-center"},[e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.okCallBack}},[t._v("\n            "+t._s(t.ok)+"\n          ")]),t._v(" "),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.cancelCallBack}},[t._v("\n            "+t._s(t.cancel)+"\n          ")])],1)],1)],1)],1)}),[],!1,null,"ff79ff88",null).exports,{name:"aeris-datavalidation-configuration",props:{webcomponent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},newSession:{type:Function,default:()=>{}},sessionsdialog:{type:Object,default:()=>({state:!1})}},components:{AerisDatavalidationTypography:jt.a,AerisDatavalidationSessionForm:Tt,AerisDatavalidationSessionsTable:Bt,AerisDataValidationWebcomponentWrapper:Mt.a},watch:{sessionsdialog:{handler:function(){this.dialog=this.sessionsdialog.state},immediate:!0}},mixins:[d.a,p.a],data:()=>({page:1,pageCount:0,dialog:!1,products:[],sessions:[],productsData:null,instrumentData:null,currentView:"configuration.label_sessionsList"}),computed:{getTitle:function(){return this.$t(this.currentView)},isCreationMode:function(){return"configuration.label_newSession"===this.currentView}},mounted(){this.movableDialogHandler()},methods:{switchCurrentPage:function(t,e){const{user:a}=this.$store.state.common;this.switchTablecurrentPage(t,e,a,t=>{t&&(this.sessions=t.content,this.pageCount=0<this.sessions.length?t.totalPages:0)})},setCurrentView:function(t){this.currentView=t},bindDialogMousedownEvent:function(t){document.addEventListener("mousedown",e=>{const a=e.target.closest(".v-dialog.v-dialog--active");0===e.button&&null!=a&&e.target.classList.contains("v-card__title")&&(t.el=a,t.mouseStartX=e.clientX,t.mouseStartY=e.clientY,t.elStartX=t.el.getBoundingClientRect().left,t.elStartY=t.el.getBoundingClientRect().top,t.el.style.position="fixed",t.el.style.margin=0,t.oldTransition=t.el.style.transition,t.el.style.transition="none")})},bindDialogMousemoveEvent:function(t){document.addEventListener("mousemove",e=>{void 0!==t.el&&(t.el.style.left=Math.min(Math.max(t.elStartX+e.clientX-t.mouseStartX,0),window.innerWidth-t.el.getBoundingClientRect().width)+"px",t.el.style.top=Math.min(Math.max(t.elStartY+e.clientY-t.mouseStartY,0),window.innerHeight-t.el.getBoundingClientRect().height)+"px")})},movableDialogHandler:function(){const t={};this.bindDialogMousedownEvent(t),this.bindDialogMousemoveEvent(t),document.addEventListener("mouseup",()=>{void 0!==t.el&&(t.el.style.transition=t.oldTransition,t.el=void 0)}),setInterval(()=>{const t=document.querySelector(".v-dialog.v-dialog--active");null!==t&&(t.style.left=Math.min(parseInt(t.style.left),window.innerWidth-t.getBoundingClientRect().width)+"px",t.style.top=Math.min(parseInt(t.style.top),window.innerHeight-t.getBoundingClientRect().height)+"px")},100)}}}),Zt=(a(372),Object(l.a)(qt,(function(){var t=this,e=t._self._c;return e("AerisDataValidationWebcomponentWrapper",{attrs:{webcomponent:t.webcomponent}},[t.webcomponent?t._e():e("div",[e("v-dialog",{attrs:{persistent:t.persistent,"max-width":"1000px","retain-focus":!1},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",{attrs:{"min-height":"500","max-height":"900"}},[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n            "+t._s(t.$t("session.label_sessions"))+"\n          ")]),t._v(" "),e("div",{staticClass:"d-flex justify-center"},[e("v-card-title",[e("AerisDatavalidationTypography",{attrs:{text:t.getTitle,"data-cy":"configuration-title",type:"h5"}})],1)],1),t._v(" "),t.isCreationMode?t._e():e("AerisDatavalidationSessionsTable",{attrs:{sessions:t.sessions,pageCount:t.pageCount,getSessionById:t.getSessionById,setCurrentView:t.setCurrentView,continueSession:t.continueSession,switchCurrentPage:t.switchCurrentPage,updateSessionState:t.updateSession,updateInstrument:t.updateInstrument,getInstrumentByName:t.getInstrumentByName,notifyDeleteSession:t.notifyDeleteSession,getProductAvailablePeriods:t.getProductAvailablePeriods}}),t._v(" "),t.isCreationMode?e("AerisDatavalidationSessionForm",{attrs:{sessions:t.sessions,existSession:t.existSession,getColors:t.getColors,getInstruments:t.getInstruments,setCurrentView:t.setCurrentView,createNewSession:t.createNewSession,updateInstrument:t.updateInstrument,getProductAvailablePeriods:t.getProductAvailablePeriods}}):t._e()],1)],1)],1)])}),[],!1,null,"71542475",null).exports),Jt=(a(296),a(301),{name:"aeris-datavalidation-editsessiondialog",components:{},props:{dialog:{type:Boolean},instrumentParameters:{type:Array},parametersToValidate:{type:Array},updateCurrentSession:{type:Function},closeEditDialog:{type:Function}},watch:{parametersToValidate:function(){this.parametersToValidate&&(this.currentParametersToValidate=this.parametersToValidate)}},data:()=>({currentParametersToValidate:[]}),computed:{disabledSaveButton:function(){return 0===this.currentParametersToValidate.length||this.isSameParametersToValidate},isSameParametersToValidate:function(){const t=this.currentParametersToValidate.length===this.parametersToValidate.length,e=!this.parametersToValidate.some(t=>!this.currentParametersToValidate.some(e=>t.name===e.name));return t&&e}},methods:{updateSession:function(){this.currentParametersToValidate&&this.updateCurrentSession(this.currentParametersToValidate)}}}),Gt=(Object(l.a)(Jt,(function(){var t=this,e=t._self._c;return e("div",[e("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline"},[t._v(t._s(t.$t("configuration.label_editSession")))])]),t._v(" "),e("v-card-text",[e("v-container",[e("v-autocomplete",{attrs:{items:t.instrumentParameters,name:"name","item-text":"name","item-value":"name","data-cy":"sessionformparameterstovalid-autocomplete",label:t.$t("configuration.label_parameterToValidate"),multiple:"","return-object":""},model:{value:t.currentParametersToValidate,callback:function(e){t.currentParametersToValidate=e},expression:"currentParametersToValidate"}})],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.disabledSaveButton},on:{click:t.updateSession}},[t._v("\n            "+t._s(t.$t("common.save"))+"\n          ")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeEditDialog}},[t._v("\n            "+t._s(t.$t("configuration.label_cancel"))+"\n          ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,a(298),{name:"aeris-datavalidation-langswitcher",data:()=>({langs:["en","fr"]})}),Kt=(Object(l.a)(Gt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-4",staticStyle:{"max-height":"70px","max-width":"90px"}},[e("v-select",{attrs:{items:t.langs,"prepend-icon":"mdi-translate","data-cy":"langswitcher-select"},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}})],1)}),[],!1,null,"618d507e",null).exports,a(302)),Qt={name:"aeris-datavalidation-charts",props:{webcomponent:{type:Boolean,default:!0},charts:{type:String,default:()=>"[]"},sessionsdialog:{type:Object,default:()=>({state:!1})},hidetab:{type:Boolean,default:!1}},components:{AerisDatavalidationToolbar:Ct,AerisDatavalidationMainChartTab:$t,AerisDatavalidationConfiguration:Zt,AerisDatavalidationSecondChartsTab:Lt,AerisDatavalidationLandScapeLayaout:zt,AerisDataValidationWebcomponentWrapper:Mt.a},data:()=>({flag:null,themes:[],currentCharts:{},closePeriod:1,innerFlags:[],qualityFlags:[],xaxisShortName:"",yaxisShortName:"",currentPeriod:null,currentSession:null,currentSecondChart:""}),mixins:[Kt.a],computed:{secondChartsParameters:function(){let t=[];return this.currentCharts&&Object.keys(this.currentCharts).forEach(e=>{"Main chart"!==e&&(t=[...t,...this.currentCharts[e].parameters])}),t}},beforeMount(){this.webcomponent&&this.initChartsWC()},methods:{newSession:function(t,e){t&&(this.themes=e,this.initCharts(t),this.currentSession={...t},this.qualityFlags=this.currentSession.instrument.availableFlags,this.currentSecondChart=t.currentSecondChartName,this.$store.commit("updateCurrentSessionId",t.id))},initCharts:function({charts:t,parametersToValidate:e,synchronization:a}){let s={};t&&e&&(t.forEach(t=>{s[t.enName]=t}),this.currentCharts={...s},this.$store.commit("updateSynchronization",a))},addParameter:function(t,e){let a=this.currentCharts[e];t&&e&&(a.parameters.includes(t)||(a.parameters=[...a.parameters,t]))},removeParameter:function(t,e){let a=this.currentCharts[e];t&&e&&a&&(a.parameters=a.parameters.filter((function(e){return e.name!==t.name})))},switchParameterChart:function(t,e,a){let s=this.currentCharts[a],i=this.currentCharts[e];t&&(s&&(s.parameters=s.parameters.filter((function(e){return e.name!==t.name}))),i&&!i.parameters.includes(t)&&(i.parameters=[...i.parameters,t]))},renameChartTab:function(t,e,a,s){let i;t&&e&&(i=e.enName,t[i].enName=a,t[i].frName=a,delete Object.assign(t,{[a]:t[i]})[i],s(Object.values(t)))},chartTabsHandler:function(t,e,a,s){let i=Object.assign({},this.currentCharts);"add"===e?i[t.enName]=t:"remove"===e?delete i[t]:"rename"===e&&this.renameChartTab(i,t,a,s),this.currentCharts=i},setCurrentSecondChart:function(t){this.currentSecondChart=t},removeChart:function(){let t=Object.values(this.currentCharts);const e=this.currentSecondChart;let a=JSON.parse(JSON.stringify(this.currentCharts)),s=t[0].name,i=t[1].name;""!==e&&e!==s&&e!==i&&(delete a[e],this.currentCharts=a,this.currentSecondChart="")},setAxisShortsNames:function(t,e){t&&e&&(this.xaxisShortName=t,this.yaxisShortName=e)},strToJson(t){let e=t;if(t)try{e=JSON.parse(t)}catch(t){console.error("Parsing error:",t)}return e}}},te=Object(l.a)(Qt,(function(){var t=this,e=t._self._c;return e("AerisDataValidationWebcomponentWrapper",{attrs:{webcomponent:t.webcomponent}},[e("div",[e("AerisDatavalidationConfiguration",{attrs:{webcomponent:t.webcomponent,sessionsdialog:t.sessionsdialog,newSession:t.newSession}}),t._v(" "),e("div",[e("AerisDatavalidationToolbar",{attrs:{charts:t.currentCharts,session:t.currentSession,xaxisShortName:t.xaxisShortName,yaxisShortName:t.yaxisShortName,qualityFlags:t.qualityFlags,webcomponent:t.webcomponent,removeChart:t.removeChart,addParameter:t.addParameter,removeParameter:t.removeParameter,chartTabsHandler:t.chartTabsHandler,switchParameterChart:t.switchParameterChart}}),t._v(" "),e("AerisDatavalidationLandScapeLayaout",{key:"mainLandScape",attrs:{padding:"pa-0",justify:"center",nbrChildElement:2,chartsBreakPoint:t.secondChartsParameters},scopedSlots:t._u([{key:"land1",fn:function(){return[e("AerisDatavalidationMainChartTab",{attrs:{themes:t.themes,charts:t.currentCharts,webcomponent:t.webcomponent,currentSession:t.currentSession,secondChartsParameters:t.secondChartsParameters,setAxisShortsNames:t.setAxisShortsNames}})]},proxy:!0},{key:"land2",fn:function(){return[e("AerisDatavalidationSecondChartsTab",{attrs:{themes:t.themes,charts:t.currentCharts,webcomponent:!1,currentSession:t.currentSession,currentSecondChart:t.currentSecondChart,secondChartsParameters:t.secondChartsParameters,setCurrentSecondChart:t.setCurrentSecondChart}})]},proxy:!0}])})],1)],1)])}),[],!1,null,null,null).exports;s.default.use(n.a),s.default.prototype.$Plotly=n.a;var ee={name:"aeris-datavalidation-charts-test",components:{AerisDatavalidationChartscontroller:te},data:()=>({datavalidation:{messageWithDrawnDataSet:!1,messageExempleSuccess:!1},charts:[{title:"OPE_NEPHE",frName:"Graphique principal",enName:"Main chart",parameters:[{name:"scat_coef_635",type:"PointSeries",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/OPE_NEPHE_RAW",color:{name:"rgb(255, 0, 0)"}}]},{title:"OPE_NEPHE",frName:"Graphique secondaire",enName:"Secondary chart",parameters:[{name:"UWE",type:"Profiles",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/LZA_RADAR_VHF_L2A_DAILY",color:{name:"reset"}}]}]}),methods:{}},ae=(a(373),Object(l.a)(ee,(function(){var t=this,e=t._self._c;return e("client-only",[e("v-app",{attrs:{"app-data":""}},[e("v-main",[e("data-component",{attrs:{datavalidation:t.datavalidation},scopedSlots:t._u([{key:"view",fn:function(){return[e("AerisDatavalidationChartscontroller")]},proxy:!0},{key:"code",fn:function(){return[t._t("code")]},proxy:!0},{key:"json",fn:function(e){return[t._t("json")]}}],null,!0)})],1)],1)],1)}),[],!1,null,null,null));e.default=ae.exports}}]);