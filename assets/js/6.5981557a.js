(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{279:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return b})),a.d(t,"p",(function(){return g})),a.d(t,"j",(function(){return r})),a.d(t,"q",(function(){return s})),a.d(t,"h",(function(){return y})),a.d(t,"n",(function(){return p})),a.d(t,"a",(function(){return _})),a.d(t,"d",(function(){return v})),a.d(t,"m",(function(){return f})),a.d(t,"g",(function(){return d})),a.d(t,"o",(function(){return m})),a.d(t,"c",(function(){return P})),a.d(t,"k",(function(){return c})),a.d(t,"l",(function(){return h})),a.d(t,"i",(function(){return u}));a(113);function s(e,t){return Math.round((t-e)/864e5)}function i(e){return Math.floor(e/10)<=0?"0"+e:e}function n(e,t){const a="string"==typeof e?new Date(r(e)):e;return a.setTime(a.getTime()+60*t*60*1e3),b(a)}function o(e){let t=e,a=e.toString();return a&&a.includes(".")&&(t=a.split(".")[0]),t}function l(e,t){let a,s,i=isNaN(e)?e:new Date(e);return i&&(a=i.toString().trim(),s=a.includes(":")&&!a.includes("T")&&!a.includes("Z"),i=a.includes("GMT")||s?i:r(i)),t?new Date(i):new Date(o(i))}function r(e,t,a){let s,i,n,l,r;return e&&e.includes("T")||e.includes("Z")?(s=new Date(e).toISOString(),l=s.split("T"),i=l[0],n=o(l[1].replace("Z"," ")),r=t?i:a?{datePart:i,timePart:n}:i+" "+n):(s=e.split(" "),2===s.length?(i=s[0],n=s[1],r=t?i:a?{datePart:i,timePart:n}:o(e)):r=e),r}function d(e,t){let a=e;const[s,i,n]=e?e.split("-"):[];return"fr"===t&&(a=`${n}/${i}/${s}`),a}function c(e,t,a,s){let i,n=e;return e&&(i=r(e,a,s),n=s?d(i.datePart,t)+" "+i.timePart:d(i,t)),n}function u(e){return r(e,null,!0).datePart}function h(e){return r(e,null,!0).timePart}function m(e,t){let a=!1;return e&&t&&(a=l(e).getTime()===l(t).getTime()),a}function g(e,t){let a=!1,s=new Date,i=new Date,n=e.split(":"),o=t.split(":");return s&&i&&n&&o&&(i.setHours(n[0],n[1],n[2]),s.setHours(o[0],o[1],o[2]),a=i.getTime()===s.getTime()),a}function p(e,t,a){let s,i,n=!1;return e&&t&&(s=isNaN(e)?l(e).getTime():e,i=isNaN(t)?l(t).getTime():t,n=a?i<s:i<=s),n}function f(e,t,a){let s,i,n,o=!1;return e&&t&&a&&(s=l(e).getTime(),i=l(t).getTime(),n=l(a).getTime(),o=i<=s&&s<=n),o}function b(e){let t,a,s,n,o,r,d,c=e;return e&&(t=l(e),a=i(t.getDate()),s=i(t.getMonth()+1),n=t.getFullYear(),o=i(t.getHours()),r=i(t.getMinutes()),d=i(t.getSeconds()),c=n+"-"+s+"-"+a+"T"+o+":"+r+":"+d+"Z"),c}function D(e){let t,a,s,n="";return e&&(t=i(e.getHours()),a=i(e.getMinutes()),s=i(e.getSeconds()),n=t+":"+a+":"+s),n}function v(e,t,a){let s=null;const n=new Date(e);let o,l,r;return n&&(o=i(n.getDate()),l=i(n.getMonth()+1),r=n.getFullYear(),"en"===t?s=r+"-"+l+"-"+o+(a?", "+D(n):""):"fr"===t&&(s=o+"/"+l+"/"+r+(a?", "+D(n):""))),s}function y(e,t){let a={day:null,month:null,year:null,firstDay:null,lastDay:null,firstDate:null,lastDate:null};const s=new Date(e);let n,o;return s&&(n=new Date(s.getFullYear(),s.getMonth(),1),o=new Date(s.getFullYear(),s.getMonth()+1,0),a.day=i(s.getDate()),a.month=i(s.getMonth()+1),a.year=s.getFullYear(),a.firstDate=t?r(n.toString(),t):n.toString(),a.lastDate=t?r(o.toString(),t):o.toString(),a.firstDay=i(n.getDate()),a.lastDay=i(o.getDate())),a}function _(e,t,a,s){let i,n;return a?(n=s?new Date(e).getTime()-864e5*t:new Date(e).getTime()+864e5*t,new Date(n).toDateString()):(i="string"==typeof e?new Date(r(e)):e,n=s?i.getDate()-t:i.getDate()+t,i.setDate(n),i)}function P(e,t,a){let s,i=e;return e&&void 0!==t&&(s=new Date(o(e)),s.setSeconds(a?s.getSeconds()+t:s.getSeconds()-t),i=b(s)),i}},280:function(e,t,a){"use strict";var s=a(279);t.a={data:()=>({dbPeriods:[],periodsModel:{},noDataColor:"#B0BEC5",periodsModelHistory:[],notValidatedColor:"#FF5252",workPeriodColor:"#1976D2",alreadyValidatedColor:"#4CAF50",partiallyControlledColor:"#FFC107",states:{"#1976D2":"Work period","#FF5252":"Not validated","#4CAF50":"Already validated","#FFC107":"Partially controlled","#B0BEC5":"Data not available"},statesValues:{workperiod:"Work period",notvalidated:"Not validated",datanotavailable:"Data not available",alreadyvalidated:"Already validated",partiallycontrolled:"Partially controlled"},stateColor:{workperiodcolor:"#1976D2",notvalidatedcolor:"#FF5252",datanotavailablecolor:"#B0BEC5",alreadyvalidatedcolor:"#4CAF50",partiallycontrolledcolor:"#FFC107"},statesColors:[{text:"session.label_alreadyValidated",color:"success"},{text:"session.label_notValidated",color:"error"},{text:"session.label_workPeriod",color:"primary"},{text:"session.label_partiallyControlled",color:"warning"},{text:"session.label_dataNotAvailable",color:"#B0BEC5"}],statesNames:{alreadyvalidated:"session.label_alreadyValidated",partiallycontrolled:"session.label_partiallyControlled",notvalidated:"session.label_notValidated",datanotavailable:"session.label_dataNotAvailable",workperiod:"session.label_workPeriod"}}),methods:{getDate:s.f,dateToUtc:s.e,getDateTime:s.j,dateToFormat:s.d,numberOfDay:s.q,getDateFrag:s.h,isHigherThan:s.n,addDayToDate:s.a,isDateBetWeen:s.m,isSameDateTime:s.o,getDatePikerDateFormat:s.i,getTimePickerTimeFormat:s.l,getStateNameByColor:function(e){let t=this.states.error;return e&&(t=this.states[e]),t},indexOfStateName:function(e,t){let a,s=-1;return e&&(a=Object.keys(this.statesNames).map(e=>t(e)),s=a.indexOf(e.replace(" ","").trim().toLowerCase())),s},translateTagName:function(e,t){let a="default";const s=e.replace(" ","").toLowerCase();return s&&(a=t(this.statesNames[s])),a},getStateColor:function(e){let t=this.notValidatedColor;return e&&(t=this.stateColor[e.trim().replace(" ","").toLowerCase()+"color"]),t},isPreappendPeriod:function(e,t){let a,s=!1;return e&&t&&(a=!this.isSameDateTime(t.startDate,e.startDate),s=a&&this.isHigherThan(t.startDate,e.startDate)),s},isAppendPeriod:function(e,t){let a,s=!1;return e&&t&&(a=!this.isSameDateTime(e.endDate,t.endDate),s=a&&this.isHigherThan(e.endDate,t.endDate)),s},periodToDate:function(e){let t,a,s=Object.assign({},e);return e&&(t=e.startDate?e.startDate:e.startXaxis?e.startXaxis:e.x0?e.x0:e.start,a=e.endDate?e.endDate:e.endXaxis?e.endXaxis:e.x1?e.x1:e.end,s={start:t,end:a}),s},isSamePeriod:function(e,t){let a,s,i=!1;return e&&t&&(a=this.periodToDate(Object.assign({},e)),s=this.periodToDate(Object.assign({},t)),i=this.isSameDateTime(a.start,s.start)&&this.isSameDateTime(a.end,s.end)),i},isTagExist:function(e,t,a){let s=!1;return e&&t&&a&&(s=e.some(e=>this.isSamePeriod(e,{startDate:t,endDate:a}))),s},getCalendarTag:function(e,t,a,s,i){let n=null;return!this.isTagExist(e,t,a)&&s&&i&&(n={name:s,color:i,start:new Date(this.getDateTime(t,!0)+"T00:00:00"),end:new Date(this.getDateTime(a,!0)+"T23:59:59")}),n},periodToTag:function(e,t,a){let s,i,n=null;return e&&t&&(i=this.getStateColor(t.state),s=this.translateTagName(t.state,a),n=this.getCalendarTag(e,t.startDate,t.endDate,s,i)),n},getTag:function(e,t,a,s,i,n){let o,l,r;return t?r=this.periodToTag(e,t,n):this.isDateBetWeen(a,s,i)?(o=this.notValidatedColor,l=this.$t("session.label_notValidated"),r=this.getCalendarTag(e,a,a,l,o)):(o=this.noDataColor,l=this.$t("session.label_noData"),r=this.getCalendarTag(e,a,a,l,o)),r},getWokPeriod:function(e){let t=null;const{workPeriod:a}=e;return e&&(t={state:"Work period",startDate:a.startDate,endDate:a.endDate}),t},getTargetPeriod(e,t,a){let s=null;return t&&a&&e&&(s=e.find(e=>this.isSamePeriod(e,{startDate:t,endDate:a}))),s},getTargetFlag:function(e,t){let a=null;return e&&t&&(a=e.find(e=>this.isSamePeriod(e,t))),a},dateBetweenPeriod:function(e,t){let a,s=!1;return e&&t&&(a=this.periodToDate(t),s=this.isDateBetWeen(e,a.start,a.end)),s},isEmptyInter:function(e,t){return!(this.dateBetweenPeriod(e.startDate,t)||this.dateBetweenPeriod(e.endDate,t)||this.dateBetweenPeriod(t.startDate,e)||this.dateBetweenPeriod(t.endDate,e))},isPeriodInclude:function(e,t){return this.dateBetweenPeriod(e.startDate,t)&&this.dateBetweenPeriod(e.endDate,t)},isCurrentPeriodChange:function(e,t,a){let s,i,n=!1;return e&&t&&a&&(i=this.stateColor.workperiodcolor,s=this.stateColor.notvalidatedcolor||this.stateColor.partiallycontrolledcolor,n=t.color===s&&a.color===i),n},isNewPeriod:function(e,t,a,s){let i=!1;return e&&t&&a&&s&&(i=!e.some(e=>this.isEmptyInter(t,e))||this.isCurrentPeriodChange(t,a,s)),i},flushNewPeriod:function(e,t,a,s){const i=e.parametersToValidate[0],n={parameterName:i.name,instrumentId:i.instrumentId,state:this.getStateNameByColor(a),startDate:this.dateToUtc(t.startDate),endDate:this.dateToUtc(t.endDate)};this.createPeriod(n,e=>{s&&s(e)})},isLftInter:function(e,t){let a=!1;return e&&t&&(a=!this.isDateBetWeen(e.startDate,t.startDate,t.endDate)&&this.isDateBetWeen(e.endDate,t.startDate,t.endDate)),a},isRgtInter:function(e,t){let a=!1;return e&&t&&(a=!this.isDateBetWeen(e.endDate,t.startDate,t.endDate)&&this.isDateBetWeen(e.startDate,t.startDate,t.endDate)),a},isFlagInPeriod:function(e,t){let a=!1;return e&&t&&(a=this.dateBetweenPeriod(e.start_date,t)&&this.dateBetweenPeriod(e.end_date,t)),a},checkPeriodInters:function(e,t,a){let i,n,o,l,r=[],d=[],c={periods:[],periodsToDelete:[]};const u=t.map(e=>Object.assign({},e)).sort((e,t)=>new Date(e.startDate)-new Date(t.startDate));return u&&(u.forEach(t=>{this.isPeriodInclude(e,t)&&e.state===t.state&&console.log("test includes : ",t,e),this.isPeriodInclude(t,e)?r.push(t):this.isLftInter(t,e)?(i=this.addDayToDate(new Date(this.getDateTime(e.startDate,!0)),-1,!0),i=this.getDateTime(this.dateToFormat(i,"en"),!0),t.endDate=this.dateToUtc(new Date(i+"T23:59:59")),d.push(Object.assign({},t))):this.isRgtInter(t,e)&&(n=this.addDayToDate(new Date(this.getDateTime(e.endDate,!0)),1,!0),n=this.getDateTime(this.dateToFormat(n,"en"),!0),t.startDate=Object(s.e)(new Date(n+"T00:00:00")),d.push(Object.assign({},t)))}),c={periods:[...d],periodsToDelete:r},u.some(t=>this.isPeriodInclude(e,t)&&e.state===t.state)||(o=new Date(e.startDate).getMonth()+1,l=new Date(e.startDate).getFullYear(),a[l]&&a[l][o.toString()]&&a[l][o.toString()].some(t=>this.isDateBetWeen(t.start_date,e.startDate,e.endDate)&&this.isDateBetWeen(t.end_date,e.startDate,e.endDate))&&c.periods.push(e))),c},dbPeriodsHandler:function(e,t,a){let s=[],i={},n=this.periodsModelToTags(!0,this.session);const o=n.filter(e=>!this.dbPeriods.some(t=>this.isSamePeriod(e,t))&&e.state!==this.statesValues.notvalidated).find(t=>this.isSamePeriod(t,e));o&&n&&this.dbPeriods&&(i=this.checkPeriodInters(o,this.dbPeriods,t),i&&(i.periodsToDelete.forEach(e=>s.push(e.id)),this.deletePeriods(s,()=>{this.dbPeriods=this.dbPeriods.filter(e=>!s.some(t=>t===e.id)),this.postPeriods({periods:i.periods},e=>{e&&(this.dbPeriods=[...this.dbPeriods,...e])})}))),a&&a()},isPeriodInPeriod:function(e,t,a){let s,i=!1;return e&&t&&(s=this.periodToDate(e),i=this.dateBetweenPeriod(s.start,t)&&this.dateBetweenPeriod(s.end,t)&&(!this.isSameDateTime(s.start,t.startXaxis)&&!this.isSameDateTime(s.end,t.endXaxis)||a)),i},dateToPeriod:function(e,t,a,s){let i,n,o,l,r={};return e&&s&&t&&(r={startDate:e,endDate:e},i=this.getDateTime(this.dateToFormat(e,"en"),!0),n=s.find(e=>this.isDateBetWeen(i,e.startDate,e.endDate,!0)),this.isDateBetWeen(i,a.startDate,a.endDate)?r.state="workperiod":n?r.state=n.state.replace(" ","").trim():(l=new Date(i).getMonth()+1,o=new Date(i).getFullYear(),t&&t[o]&&t[o][l]&&t[o][l].some(e=>this.isDateBetWeen(i,e.startDate,e.endDate))?r.state="notvalidated":r.state="datanotavailable")),r},getTagByPeriods:function(e,t,a){let s,i=null;return e&&t&&(s=e.state.replace(" ","").toLowerCase(),i={name:this.translateTagName(s,a),color:this.getStateColor(s),start:new Date(this.getDateTime(e.date,!0)+"T00:00:00"),end:new Date(this.getDateTime(t.date,!0)+"T23:59:59")}),i},groupingFlags:function(e){let t,a,s,i,n={};return e&&e.forEach(e=>{t=new Date(e.start_date).getMonth()+1,a=new Date(e.end_date).getMonth()+1,s=new Date(e.start_date).getFullYear(),i=new Date(e.end_date).getFullYear(),void 0===n[s]&&(n[s]={}),void 0===n[i]&&(n[i]={}),void 0===n[s][t]&&(n[s][t]=[]),void 0===n[i][a]&&(n[i][a]=[]),s!==i?(n[s][t].push(e),n[i][a].push(e)):n[s][t].push(e)}),n},isDateInclude(e,t){let a=!1;return t&&(a=this.isDateBetWeen(this.getDateTime(this.dateToFormat(e,"en"),!0),this.getDateTime(t.startDate,!0),this.getDateTime(t.endDate,!0))),a},isLastDay:function(e,t,a,s,i,n,o,l){return t===e.length-1&&s===a.length-1&&n===i.length-1&&o&&null===l},isValidatedDay:function(e,t){let a=!1;return e&&t&&(a=t.state===this.statesValues.alreadyvalidated&&this.isDateBetWeen(e,t.startDate,t.endDate)),a},isWorkDay:function(e){let t=!1;return this.session&&this.session.workPeriod&&e&&(t=this.isDateBetWeen(e,this.session.workPeriod.startDate,this.session.workPeriod.endDate)),t},isNotValidatedDay:function(e,t){let a=!1;const{month:s,year:i}=this.getDateFrag(e);return e&&s&&i&&t&&(a=t[i]&&t[i][Number(s)]&&t[i][Number(s)].some(t=>this.isDateBetWeen(e,t.startDate,t.endDate))),a},isPartiallycontrolled:function(e,t,a){let s=!1;const{month:i,year:n}=this.getDateFrag(e),o=Number(i);return void 0!==o&&n&&t&&t[n]&&t[n][o]&&(s=t[n][o].some(t=>{let s,i;const n=this.getDateTime(t.start_date,!0),o=this.getDateTime(t.end_date,!0);return a&&(s=this.getDateTime(a.startDate,!0),i=this.getDateTime(a.endDate,!0)),this.isDateBetWeen(e,n,o)||this.isDateBetWeen(e,s,i)})),s},getDayState:function(e,t,a,s,i){let n={value:e<9?"0"+(e+1):e+1,label:this.dateToFormat(t,"en")};const o=this.getDateTime(this.dateToFormat(t,"en"),!0),l=a.find(e=>this.isDateBetWeen(o,e.startDate,e.endDate));return this.isValidatedDay(o,l)?n.state=this.stateColor.alreadyvalidatedcolor:this.isWorkDay(o)?n.state=this.stateColor.workperiodcolor:this.isPartiallycontrolled(o,i,l)?n.state=this.stateColor.partiallycontrolledcolor:this.isNotValidatedDay(o,s)?n.state=this.stateColor.notvalidatedcolor:n.state=this.stateColor.datanotavailablecolor,n},getMothDays:function({start:e,end:t},a,s,i,n){let o,l=[];const r=new Date(e+"T00:00:00"),d=new Date(t+"T23:59:59");let c=this.numberOfDay(r,d);if(c&&a){n&&(c+=1);for(let e=0;e<c;e++)o=this.addDayToDate(r,e,!0),l.push(this.getDayState(e,o,a,s,i))}return l},setPeriodsModel:function(e,t,a,s,i,n){const o=this.getDateTime(this.dateToFormat(e,"en"),!0),l=this.getDateTime(this.dateToFormat(t,"en"),!0),r=this.getMothDays({start:o,end:l},i,a.years,this.groupingFlags(n),!0);this.periodsModel={},r&&r.forEach(e=>{const{month:t,year:a}=this.getDateFrag(e.label);void 0===this.periodsModel[a]&&(this.periodsModel[a]={}),void 0===this.periodsModel[a][Number(t)]&&(this.periodsModel[a][Number(t)]=[]),this.periodsModel[a][Number(t)].push({state:this.states[e.state],date:e.label})})},getdbPeriodByPeriods:function(e,t,a){let s=null;const i=a.parametersToValidate[0],n=i.instrumentId;let o=e.state.replace(" ","").toLowerCase();return o="workperiod"===o?"partiallycontrolled":o,e&&t&&i&&o&&"datanotavailable"!==o&&(s={parameterName:i.name,instrumentId:n,state:this.statesValues[o],startDate:this.dateToUtc(new Date(this.getDateTime(e.date,!0)+"T00:00:00")),endDate:this.dateToUtc(new Date(this.getDateTime(t.date,!0)+"T23:59:59"))}),s},periodsModelToTags:function(e,t,a){let s,i,n,o=[],l=[],r=null,d=null;const c=Object.keys(this.periodsModel);return c.forEach((u,h)=>{i=Object.keys(this.periodsModel[u]),i.forEach((m,g)=>{n=this.periodsModel[u][m],n.forEach((u,m)=>{null===r&&(r=u),l.push(u),r.state!==u.state?(l.splice(-1),d=0<l.length?l[l.length-1]:r,s=e?this.getdbPeriodByPeriods(r,d,t):this.getTagByPeriods(r,d,a),s&&o.push(s),r=u,d=null,l=[]):this.isLastDay(c,h,i,g,n,m,r,d)&&(d=l[l.length-1],s=e?this.getdbPeriodByPeriods(r,d,t):this.getTagByPeriods(r,d,a),s&&o.push(s))})})}),o}}}},282:function(e,t,a){"use strict";a(281),a(113);var s=a(54),i=a.n(s),n=a(291);i.a.interceptors.request.use(async e=>{const t=await Object(n.a)();return t&&(e.headers.common.Accept="application/json",e.headers.common.Authorization="Bearer "+t),e});var o=(e,t)=>i.a.post(e,t),l=e=>i.a.get(e,{responseType:e.includes("format")?"blob":"application/json",transformResponse:[function(e,t){const a=t["content-type"];return"application/json"===a?JSON.parse(e):{type:a,data:e}}]}),r=(e,t)=>i.a.put(e,t),d=e=>i.a.delete(e);t.a={data:()=>({callBack:null,callBacks:[],currentUrl:"",requestData:{},typeOfRequest:""}),methods:{getData:async function(e,t,a){const s=a||"https://aeris-recette.ipsl.fr/actris-validation/api"+e;s&&await l(s).then(e=>{e&&t&&t(e.data)}).catch(e=>{t&&t(e)}).finally(()=>this.loading=!1)},postData:async function(e,t,a){const s="https://aeris-recette.ipsl.fr/actris-validation/api"+e;await o(s,t).then(e=>{a&&a(e.data)}).catch(e=>{a&&a(e)}).finally(()=>this.loading=!1)},putData:async function(e,t,a){const s="https://aeris-recette.ipsl.fr/actris-validation/api"+e;await r(s,t).then(e=>{a&&a(e.data)}).catch(e=>{a&&a(e)}).finally(()=>this.loading=!1)},deleteData:async function(e,t){const a="https://aeris-recette.ipsl.fr/actris-validation/api"+e;await d(a).then(e=>{t&&t(e.data)}).catch(e=>{t&&t(e)}).finally(()=>this.loading=!1)},getInstrumentByName:function(e,t){const a="/instrument?name="+e;this.getData(a,e=>{t(e)})},getInstrumentById:function(e,t){const a="/instrument?id="+e;this.getData(a,e=>{t(e)})},getInstruments:function(e){this.getData("/instruments",t=>{e(t)})},updateInstrument:function(e,t){this.putData("/instruments",e,t)},getExternalRessources:function(e,t){e?this.getData("/instruments?url="+e,e=>{t(e)}):t([])},createPeriod:function(e,t){e&&this.postData("/periods",e,e=>{t&&t(e)})},deletePeriods:function(e,t){e&&0<e.length?this.deleteData("/periods?ids="+e,e=>{t&&t(e)}):t&&t()},postPeriods:function(e,t){e&&0<e.periods.length?this.postData("/periods/list",e,e=>{t&&t(e)}):t&&t()},updatePeriod:function(e,t){e&&this.putData("/periods/"+e.id,e,e=>{t&&t(e)})},deletePeriod:function(e,t){this.deleteData("/periods?id="+e.id,e=>{t&&t(e)})},getParameterPeriods:function(e,t,a,s,i){let n="/periods?instrumentId="+e+"&parameterName="+t;n+="&start_time="+this.dateToUtc(a)+"&end_time="+this.dateToUtc(s),this.getData(n,e=>{i(e)})},isAvailabilityResponse:function(e){const t=["product_sid","start_date","end_date","availability"],a=Object.keys(e);return a&&!a.some(e=>!t.some(t=>e===t))},getProductAvailablePeriods:function(e,t,a,s){const{rootUrl:i,uuid:n}=e,o=i+"/availability/"+n+"?"+(t&&a?"start_time="+this.dateToUtc(t)+"&end_time="+this.dateToUtc(a):""),l={product_sid:n,start_date:this.dateToUtc(t),end_date:this.dateToUtc(a),availability:{date:[],value:[]}};i&&n?this.getData(null,e=>{let t=this.isAvailabilityResponse(e)?e:l;s&&s(t)},o):s&&s(l)},donwloadFile:function(e,t){let a="/periods?format="+e;this.getData(a,e=>{let a,s;const i=""+ +new Date;e.type&&e.data&&(a=new Blob([e.data],{type:e.type}),s=document.createElement("a"),s.href=URL.createObjectURL(a),s.download=i,s.click(),URL.revokeObjectURL(s.href)),t(e)})},getSessionFlagsByPeriod:function(e,t,a,s){const i=a.parametersToValidate[0],n=i.instrumentId,o=i.name;this.getInstrumentById(n,i=>{"Heatmap"===i.type?this.getChartModelByPeriod(e,t,a,e=>{s&&s({instrument:i,chartModel:e})}):this.getFlags(n,o,null,e,t,e=>{s&&s({instrument:i,flags:e})},!0)})},existSession:function(e,t,a){this.getData("/sessions/exist?instrument_id="+e+"&parameter="+t,e=>{a&&a(e)})},getSessionById:function(e,t){this.getData("/sessions?id="+e,e=>{t&&t(e)})},getSessions:function(e){this.getData("/sessions",t=>{e&&e(t)})},getSessionFlags:function(e,t){const a=e.workPeriod,s=e.parametersToValidate[0],i=s.instrumentId,n=s.name;this.getInstrumentById(i,s=>{"Heatmap"===s.type?this.getChartModel(e,e=>{t&&t({instrument:s,chartModel:e})}):this.getFlags(i,n,null,a.startDate,a.endDate,e=>{t&&t({instrument:s,flags:e})},!0)})},createNewSession:function(e){let t;this.getThemes(a=>{this.postData("/sessions",e,e=>{e&&this.getSessionFlags(e,s=>{t=e.charts[0],t.flags=s.flags,this.dialog=!1,this.newSession(e,a)})})})},switchTablecurrentPage:function(e,t,a,s){let i;e&&t&&a&&(i="/sessions?page="+e+"&size="+t+"&user_email="+a.email,this.getData(i,e=>{s&&s(e)}))},continueSession:function(e){let t=e.charts[0];e.lock=!0,this.updateSession(e,()=>{this.getThemes(a=>{"Heatmap"===e.instrument.type?this.getChartModel(e,s=>{t.chartModel=s,this.dialog=!1,this.newSession(e,a)}):this.getSessionFlags(e,s=>{t.flags=s.flags,this.$store.commit("updateSessionFlags",s.flags),this.dialog=!1,this.newSession(e,a)})})})},getProducts:function(e){this.getData("/products",t=>{e(t)})},getProductData:function(e,t,a,s){let i,n,o;const{startDate:l,endDate:r}=t,d=null!==a?"/"+a:"";l&&r&&(i=this.dateToUtc(l),n=this.dateToUtc(r),o=e+"/"+i+"/"+n+d,this.getData(o,e=>{this.productsData=e,s(e)}))},getParametersUri:function(e,t){let a="";e&&e.forEach((t,s)=>{a+="params="+t.name,s<e.length-1&&(a+="&")}),t&&t(encodeURI(a))},getLocalParametersData:function(e,t,a){this.getData("/parameters/"+e+"/"+t,e=>{a(e)})},getExternalParametersData:function(e,t,a,s,i,n,o){let l,r;t&&a&&(l="start_time="+s+"&end_time="+i,l+="PointSeries"===a.type?"&"+n:"",r=e+t+"/"+a.uuid+"?"+l,this.getData(null,o,r))},getParametersSortByInstrumentId:function(e){let t={};return e&&e.forEach(e=>{void 0===t[e.instrumentId]?t[e.instrumentId]=[e]:t[e.instrumentId].push(e)}),t},standaloneParameters:function(e,t,a,s){let i,n,o,l;t&&a&&(i=this.dateToUtc(a.startDate),n=this.dateToUtc(a.endDate),this.getParametersUri(t,e=>{o="start_time="+i+"&end_time="+n,l=t[0].url+"?"+o,l+="PointSeries"===t[0].type?"&"+e:"",this.getData(null,e=>{e&&s&&s([e])},l)}))},getDatas:function(e,t,a,s,i,n){let o,l,r,d;const{workPeriod:c,id:u}=t;a.length<=e&&n&&n(i),o=a[e],o&&"undefined"!==o?this.getInstrumentById(o,h=>{const{rootUrl:m}=h;l=s[o],u&&l&&h&&m&&c&&(r=this.dateToUtc(c.startDate),d=this.dateToUtc(c.endDate),this.getParametersUri(l,o=>{m.includes("localhost")?this.getLocalParametersData(h.id,o,o=>{this.getDatas(e+1,t,a,s,[...i,o],n)}):this.getExternalParametersData(m,l[0].path,h,r,d,o,o=>{this.getDatas(e+1,t,a,s,[...i,o],n)})}))}):t&&c&&this.standaloneParameters(t,s[o],c,n)},getParametersData:function(e,t,a){let s,i=this.getParametersSortByInstrumentId(t);i&&(s=Object.keys(i),this.getDatas(0,e,s,i,[],a))},getParameterData:function(e,t,a,s,i){const n=this.dateToUtc(a),o=this.dateToUtc(s),l=t.instrumentId?t.instrumentId:t[0].instrumentId;this.getInstrumentById(l,e=>{const{rootUrl:a}=e;a&&n&&o&&this.getParametersUri(t,s=>{s&&(a.includes("localhost")?this.getLocalParametersData(e.id,s,i,n,o):this.getExternalParametersData(a,t[0].path,e,n,o,s,i))})})},postFlags:function(e,t){this.postData("/flags/list",e,e=>{t&&t(e)})},getAvailableFlags:function(e){this.getData("/availableFlags",t=>{e(t)})},getFlags:function(e,t,a,s,i,n,o){let l,r,d;(this.isMainChart||o)&&(l=this.dateToUtc(s),r=this.dateToUtc(i),d="/flags?instrumentId="+e+"&parameterName="+t,d=a?d+"&state="+a:d,d+="&start_time="+l+"&end_time="+r,this.getData(d,e=>{n(e)}))},downloadFlagsCsv:function(e,t,a,s,i){let n,o,l;n=this.dateToUtc(a),o=this.dateToUtc(s),l="/flags/csv?instrumentId="+e+"&parameterName="+t,l+="&start_time="+n+"&end_time="+o,this.getData(l,e=>{i(e)})},postFlag:function(e,t){this.postData("/flags/single",e,e=>{t&&t(e)})},putFlag:function(e,t){this.putData("/flags/"+e.id,e,e=>{t&&t(e)})},deleteDbFlags:function(e,t){this.deleteData("/flags?ids="+e,e=>{t&&t(e)})},flushDeleteFlag:function(e,t,a){this.deleteData("/flags/"+e,e=>{t&&this.bindChartListener(),a&&a(e)})},getDefaultParametersData:function(e,t,a,s){let i,n="";a&&(a.forEach(e=>{i=e.parameters,i&&i.forEach((e,t)=>{""!==n&&(n+="&"),n+="params="+e.name,t<i.length-1&&(n+="&")})}),this.getProductData(e,t,n,e=>{s&&s(e)}))},updateSession:function(e,t){e&&this.putData("/sessions/"+e.id,e,e=>{e&&t&&t(e)})},notifyDeleteSession:function(e,t){this.deleteData("/sessions/"+e.id,e=>{t&&t(e)})},createColor:function(e,t){e&&this.postData("/color",e,e=>{t&&t(e)})},updateColor:function(e,t){e&&this.putData("/color",e,e=>{t&&t(e)})},getColors:function(e){this.getData("/color",t=>{e(t)})},deleteColor:function(e,t){this.deleteData("/color/"+e,e=>{t&&t(e)})},createColors:function(e,t){e&&this.postData("/colors",e,e=>{t&&t(e)})},getThemes:function(e){this.getData("/theme",t=>{e(t)})},addChartModel:function(e,t){e&&this.postData("/chartmodel",e,e=>{t&&t(e)})},getChartModelByPeriod:function(e,t,a,s){const i=a.parametersToValidate[0],n=i.instrumentId;let o="?parameterToValidate="+i.name+"&instrumentId="+n;o+="&start_time="+e+"&end_time="+t,this.getData("/chartmodel"+o,e=>{s(e)})},getChartModel:function(e,t){const a=e.workPeriod;let s=this.dateToUtc(a.startDate),i=this.dateToUtc(a.endDate);this.getChartModelByPeriod(s,i,e,t)},getModelByPeriod:function(e,t,a,s,i){let n=this.dateToUtc(a),o=this.dateToUtc(s),l="?parameterToValidate="+e.name+"&instrumentId="+t;l+="&start_time="+n+"&end_time="+o,this.getData("/chartmodel"+l,e=>{i(e)})},updateChartModel:function(e,t){e&&this.putData("/chartmodel",e,e=>{e&&t&&t(e)})},deleteModelProfiles:function(e,t,a){this.deleteData("/chartmodel?ids="+e+"&flagId="+t,e=>{a&&a(e)})}}}},283:function(e,t,a){"use strict";var s=a(287),i={name:"aeris-datavalidation-deletedialog",props:{dialog:{type:Boolean,default:()=>!1},title:{type:String,default:()=>"Dialog title"},message:{type:String,default:()=>"Dialog message"},ok:{type:String,default:()=>"OK"},hideOkButton:{type:Boolean,default:()=>!1},cancel:{type:String,default:()=>"cancel"},okCallBack:{type:Function,default:()=>{}},cancelCallBack:{type:Function,default:()=>{}}},watch:{dialog:function(){this.dialogState=this.dialog}},components:{AerisDatavalidationTypography:s.a},data:()=>({theme:null,dialogState:!1})},n=a(18),o=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialogState,callback:function(t){e.dialogState=t},expression:"dialogState"}},[t("v-card",[t("v-alert",{attrs:{type:"warning","data-cy":"deletedialog-title"}},[e._v("\n        "+e._s(e.title)+"\n      ")]),e._v(" "),t("v-card-text",{staticClass:"d-flex justify-center"},[t("AerisDatavalidationTypography",{attrs:{text:e.message,"data-cy":"deletedialog-message",type:"h6"}})],1),e._v(" "),t("v-card-actions",{staticClass:"d-flex justify-center"},[e.hideOkButton?e._e():t("v-btn",{attrs:{color:"green darken-1",text:"","data-cy":"deletedialogok-button"},on:{click:e.okCallBack}},[e._v("\n          "+e._s(e.ok)+"\n        ")]),e._v(" "),t("v-btn",{attrs:{color:"green darken-1",text:"","data-cy":"deletedialogcancel-button"},on:{click:e.cancelCallBack}},[e._v("\n          "+e._s(e.cancel)+"\n        ")])],1)],1)],1)}),[],!1,null,"314adf30",null);t.a=o.exports},285:function(e,t,a){"use strict";a.d(t,"f",(function(){return h})),a.d(t,"b",(function(){return l})),a.d(t,"k",(function(){return u})),a.d(t,"l",(function(){return D})),a.d(t,"c",(function(){return i})),a.d(t,"i",(function(){return c})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return g})),a.d(t,"d",(function(){return p})),a.d(t,"m",(function(){return b})),a.d(t,"j",(function(){return r})),a.d(t,"g",(function(){return f})),a.d(t,"h",(function(){return d}));a(281);var s=a(279);function i(e,t){let a=e,s=null;return e&&(t&&(s=t.flags.find(t=>u(t,e,!0)||t.ids===e.ids)),a={startXaxis:e.x0?e.x0:e.startXaxis?e.startXaxis:e.startDate,endXaxis:e.x1?e.x1:e.endXaxis?e.endXaxis:e.endDate,startYaxis:void 0!==e.y0?e.y0:void 0!==e.startYaxis?e.startYaxis:null,endYaxis:void 0!==e.y1?e.y1:void 0!==e.endYaxis?e.endYaxis:null,id:s?s.id:e.id?e.id:null,editable:s?s.editable:e.editable?e.editable:null,instrumentId:s?s.instrumentId:e.instrumentId?e.instrumentId:null,availableFlags:s?s.availableFlags:e.availableFlags,creationDate:s?s.creationDate:e.creationDate?e.creationDate:null,description:s?s.description:e.description?e.description:null,minIndex:e.minIndex,maxIndex:e.maxIndex,minYIndex:e.minYIndex,maxYIndex:e.maxYIndex,x:e.x,y:e.y,z:e.z}),a}function n(e,t,a,i){let n={};const o=Object(s.n)(e,t)?t:e,l=Object(s.n)(e,t)?e:t;return o&&l&&void 0!==a&&void 0!==i&&(n={startXaxis:o,endXaxis:l,startYaxis:a,endYaxis:i}),n}function o(e,t){let a=!1;const n=i(e),o=i(t),l=e?e.availableFlags:null,r=t?t.availableFlags:null,d=!l||!r||l[0].color===r[0].color;return n&&o&&(a=Object(s.o)(n.startXaxis,o.startXaxis)&&Object(s.o)(n.endXaxis,o.endXaxis)&&d&&n.startYaxis===o.startYaxis&&n.endYaxis===o.endYaxis),a}function l(e,t,a){let s=!1;return e&&t&&(s=e.some(e=>o(e,t)||a&&function(e,t){let a=!1;return e&&t&&e.x&&e.y&&(a=!e.x.some((e,a)=>e!==t.x[a])&&!e.y.some((e,a)=>e!==t.y[a])),a}(e,t))),s}function r(e,t){let a=!1;return e&&t&&(a=e.some(e=>function(e,t){let a=!1;const n=i(e);return t&&n&&(a=Object(s.m)(t.startXaxis,n.startXaxis,n.endXaxis)&&Object(s.m)(t.endXaxis,n.startXaxis,n.endXaxis)&&n.startYaxis<=t.startYaxis&&t.endYaxis<=n.endYaxis),a}(e,t))||function(e,t){let a,n=!1;return t&&(n=e.some(e=>(a=i(e),Object(s.m)(t.startXaxis,a.startXaxis,a.endXaxis)))&&e.some(e=>(a=i(e),Object(s.m)(t.endXaxis,a.startXaxis,a.endXaxis)))),n}(e,t)),a}function d(e,t){let a=!1;const s=i(t);return e&&t&&(a=this.isDateBetWeen(e,s.startXaxis,s.endXaxis)),a}function c(e,t,a){let s,n,o=!1;return e&&t&&(s=i(e),n=i(t),o=this.isPeriodInPeriod(s,n,!0)&&(a||n.startYaxis<=s.startYaxis&&n.endXaxis&&n.startYaxis<=s.endYaxis&&n.endXaxis)),o}function u(e,t,a){let n=!1;const o=i(e),l=i(t),r=e?e.availableFlags:null,d=t?t.availableFlags:null,c=!r||!d||r[0].color===d[0].color;return e&&t&&(n=Object(s.o)(o.startXaxis,l.startXaxis)&&Object(s.o)(o.endXaxis,l.endXaxis)&&o.startYaxis===l.startYaxis&&o.endYaxis===l.endYaxis&&(c||a)),n}function h(e,t){let a=null;return e&&t&&(a=e.find(e=>o(e,t))),a}function m(e,t){let a=!1;const{startXaxis:i,endXaxis:n}=t;return e&&i&&n&&(a=Object(s.m)(e.x0,i,n)&&Object(s.m)(e.x1,i,n)),a}function g(e,t,a){let s=[];return e&&t&&(s=e.filter(e=>a?!m(e,t):m(e,t))),s}function p(e,t){let a=[];return e&&t&&(a=e.filter(e=>!t.some(t=>function(e,t){let a,n,o=!1;return e&&t&&(a=i(e),n=i(t),o=Object(s.o)(a.startXaxis,n.startXaxis)&&Object(s.o)(a.endXaxis,n.endXaxis)&&a.startYaxis===n.startYaxis&&a.endYaxis===n.endYaxis),o}(e,t)))),a}function f(e,t){let a=-1;return e&&t&&(a=e.findIndex(e=>o(e,t))),a}function b(e){let t,a,s=e,n=Object.assign([],e);return n&&(s=n.sort((function(e,s){return t=i(e),a=i(s),new Date(a.startXaxis)-new Date(t.startXaxis)}))),s.reverse()}function D(e){let t=null;return e&&(t={startXaxis:Object(s.i)(e.startDate),endXaxis:Object(s.i)(e.endDate),startYaxis:Object(s.l)(e.startDate),endYaxis:Object(s.l)(e.endDate)}),t}},286:function(e,t,a){"use strict";var s={name:"aeris-datavalidation-webcomponentwrapper",props:{webcomponent:{type:Boolean,default:!1}}},i=a(18),n=Object(i.a)(s,(function(){var e=this._self._c;return this.webcomponent?e("div",{attrs:{id:"app"}},[e("v-app",{attrs:{id:"inspire"}},[this._t("default")],2)],1):e("div",[this._t("default")],2)}),[],!1,null,null,null);t.a=n.exports},287:function(e,t,a){"use strict";var s={name:"aeris-datavalidation-typography",props:{margin:{type:String,default:()=>"2.125rem"},text:{type:String,default:()=>"Heading 4"},type:{type:String,default:()=>"h4"}}},i=a(18),n=Object(i.a)(s,(function(){var e=this._self._c;return e("v-item-group",{attrs:{mandatory:""}},[e("v-sheet",{attrs:{tile:""}},[e("v-item",[e("div",{staticClass:"transition-swing",class:["text-"+this.type,"mb-"+this.margin],domProps:{textContent:this._s(this.text)}})])],1)],1)}),[],!1,null,"5be77cac",null);t.a=n.exports},288:function(e,t,a){"use strict";var s=a(279),i={name:"aeris-datavalidation-datemounthpicker",props:{session:{type:Object,default:null},disabled:{type:Boolean,default:()=>!1},dateLabel:{type:String,default:"Date"},setCurrentDate:{type:Function},currentDate:{type:Object,default:()=>({})},minDate:{type:String,default:()=>""},maxDate:{type:String,default:()=>""},getProductAvailablePeriods:{type:Function,default:()=>{}}},data:()=>({date:"",menu:!1,pickerDate:null,availablePeriods:{}}),computed:{computedDateFormatted(){return this.getDateFormat(this.date,"fr")}},watch:{pickerDate:function(e){e&&this.setAvailability(e+"-01")},date(e){this.setCurrentDate(e)},currentDate:{handler:function(e){this.date=e.date},immediate:!0}},methods:{dateToUtc:s.e,getDateFrag:s.h,getDateFormat:s.g,isSameDateTime:s.o,allowedDates:function(e){let t,a,s=!1;return this.availablePeriods&&this.availablePeriods.availability&&(t=this.availablePeriods.availability.date,a=this.availablePeriods.availability.value,s=t&&a&&e&&t.some((t,s)=>t===e&&a[s])),s},setAvailability:function(e){let t,a;const{firstDate:s,lastDate:i}=this.getDateFrag(e);s&&i&&(t=this.dateToUtc(s),a=this.dateToUtc(i),this.getProductAvailablePeriods(this.session.instrument,t,a,e=>{this.availablePeriods=e}))}}},n=a(18),o=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"290px",disabled:e.disabled},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-text-field",e._g(e._b({attrs:{label:e.dateLabel,"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),t("v-date-picker",{attrs:{"no-title":"",scrollable:"",value:e.currentDate,"picker-date":e.pickerDate,"allowed-dates":e.allowedDates,max:e.maxDate,min:e.minDate},on:{input:function(t){return e.$refs.menu.save(e.date)},"update:pickerDate":function(t){e.pickerDate=t},"update:picker-date":function(t){e.pickerDate=t}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)}),[],!1,null,"4dabc00b",null);t.a=o.exports},290:function(e,t,a){"use strict";var s={name:"aeris-datavalidation-select",props:{session:{type:Object,default:null},flag_message:{type:String,default:"Flags"},defaultFlagDescription:{type:String,default:()=>""},setFlagsSelected:{type:Function},qualityFlags:{type:Array,default:()=>[]},name:{type:String,default:""},itemText:{type:String,default:"name"},defaultQualityFlags:{type:Array,default:()=>[]},disabledSelect:{type:Boolean,default:()=>!1}},watch:{value(e){e.description=this.flagDescription,this.setFlagsSelected([e])},flagDescription(e){this.value.description=e,this.setFlagsSelected([this.value])},qualityFlags:function(e){this.items=e},defaultQualityFlags:{immediate:!0,handler(e){const t=e[0];t?(this.value=this.qualityFlags.find(e=>e.concatName===t.concatName),this.flagDescription=this.defaultFlagDescription):(this.$store.commit("updateSelectedFlag",null),this.value=[])}}},data:()=>({items:[],value:[],flagDescription:""}),computed:{timeSerie:function(){return this.session&&"PointSeries"===this.session.instrument.type}}},i=a(18),n=Object(i.a)(s,(function(){var e=this,t=e._self._c;return t("div",[t("v-select",{attrs:{items:e.qualityFlags,label:e.flag_message,"item-text":e.itemText,name:e.name,"return-object":"",disabled:e.disabledSelect},scopedSlots:e._u([{key:"item",fn:function(a){return[t("v-card",{staticClass:"ma-2",attrs:{"min-height":"30","min-width":"50",color:a.item.color}}),e._v(" "+e._s(a.item.concatName)+"\n      ")]}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),e.timeSerie?t("v-text-field",{attrs:{counter:100,label:e.$t("session.label_description"),disabled:e.disabledSelect},model:{value:e.flagDescription,callback:function(t){e.flagDescription=t},expression:"flagDescription"}}):e._e()],1)}),[],!1,null,"6b14b1ad",null);t.a=n.exports},291:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(0);async function i(){return await s.default.$keycloak.updateToken(70),s.default.$keycloak.token}},292:function(e,t,a){"use strict";var s=a(280),i={name:"aeris-datavalidation-yearskeleton",props:{},data:()=>({select:null,parameterDisable:!1}),watch:{},computed:{},methods:{}},n=a(18),o=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("div",[t("v-card",{attrs:{fluid:""}},[t("v-container",e._l(5,(function(a){return t("v-row",{key:a},e._l(12,(function(e){return t("v-col",{key:e,attrs:{cols:"1"}},[t("v-skeleton-loader",{attrs:{type:"image",width:60,height:80}})],1)})),1)})),1)],1)],1)}),[],!1,null,"948efce2",null).exports,l=(a(281),a(282)),r={name:"aeris-datavalidation-yearscalendar",props:{year:{type:Object,default:()=>({})},hide:{type:Boolean,default:()=>!1},session:{type:Object,default:null},setCurrentStartDate:{type:Function,default:()=>{}},getYearsStates:{type:Function,default:()=>{}},setSkeletonLoader:{type:Function,default:()=>{}},setRenderBounds:{type:Function,default:()=>{}}},mixins:[l.a,s.a],data(){return{years:[],periods:{},currentYear:"",availablePeriods:{},monthsLabel:[this.$t("session.label_january"),this.$t("session.label_february"),this.$t("session.label_march"),this.$t("session.label_april"),this.$t("session.label_may"),this.$t("session.label_june"),this.$t("session.label_july"),this.$t("session.label_august"),this.$t("session.label_september"),this.$t("session.label_october"),this.$t("session.label_november"),this.$t("session.label_december")]}},watch:{hide:{handler:function(){this.hide||this.setYearsRender()},immediate:!0},year:{handler:function(){!this.hide&&this.year&&(this.currentYear=this.year.value,this.setYearsRender())},immediate:!0}},computed:{getCurrentYear:function(){return this.year?this.year.value:""}},methods:{getDateBounds:function(e){let t=new Date(e),a={startDate:null,endDate:null};return t&&(a={startDate:this.dateToFormat(new Date(t.getFullYear(),t.getMonth(),1).toString(),"en"),endDate:this.dateToFormat(new Date(t.getFullYear(),t.getMonth()+1,0).toString(),"en")}),a},monthCovrage:function(e,t,a,s){let i,n,o=!1;return e&&(i=this.getDateBounds(e),n=this.getMothDays({start:i.startDate,end:i.endDate},this.periods,this.availablePeriods,s,!1),n=n.filter(e=>e.state!==this.getStateColor("datanotavailable")),o=a?0!==n.length&&n.some(e=>e.state===t):0!==n.length&&!n.some(e=>e.state!==t)),o},getMonthState:function(e,t,a){let s={};return e&&s&&a&&(s={label:e,state:t,date:a}),s},getMonthsStates:function(e,t){let a,s,i={label:e,states:[]};return this.monthsLabel&&t&&this.monthsLabel.forEach((n,o)=>{a=o+1<10?"0"+(o+1):o+1,s=e+"-"+a+"-01",this.monthCovrage(s,this.stateColor.alreadyvalidatedcolor)?i.states.push(this.getMonthState(n,this.stateColor.alreadyvalidatedcolor,s)):this.monthCovrage(s,this.stateColor.workperiodcolor,!0)?i.states.push(this.getMonthState(n,this.stateColor.workperiodcolor,s)):this.monthCovrage(s,this.stateColor.partiallycontrolledcolor,!0,t)||this.monthCovrage(s,this.stateColor.alreadyvalidatedcolor,!0,t)?i.states.push(this.getMonthState(n,this.stateColor.partiallycontrolledcolor,s)):this.monthCovrage(s,this.stateColor.notvalidatedcolor,!1,t)?i.states.push(this.getMonthState(n,this.stateColor.notvalidatedcolor,s)):i.states.push(this.getMonthState(n,this.stateColor.datanotavailablecolor,s))}),i},getYearMinMax:function(e,t){let a,s,i=[],n=Number(e)-1,o=Number(e)+1;const l=Number(e),{instrument:r}=this.session,d=r?r.start_date:"1970-01-01T00:00:00Z",c=r?r.end_date:(new Date).toString();if(d&&c)for(a=Number(new Date(d).getFullYear()),s=Number(new Date(c).getFullYear()),a<=l&&l<=s&&i.push(Number(l));i.length!==t&&(o<=s||a<=n)&&(o<=s&&i.push(o),i.length!==t);)a<=n&&i.unshift(n),o++,n--;return i},setYearsRender:function(){let e,t,a,s,i=[];this.year&&(t=this.getYearMinMax(this.year.value,8),this.setSkeletonLoader(!0),0<t.length&&(a=t[0],s=t[t.length-1],this.setRenderBounds({start:a,end:s}),this.getYearsStates({startYear:a,endYear:s},(t,n)=>{const{periods:o,flags:l}=t,r=this.groupingFlags(l);if(o){this.periods=o,this.availablePeriods=n;for(let t=Number(a);t<=Number(s);t++)e=this.getMonthsStates(t,r),i.push(e);this.years=i}})),this.setSkeletonLoader(!1))}}},d=Object(n.a)(r,(function(){var e=this,t=e._self._c;return e.hide?e._e():t("v-card",{staticClass:"d-flex justify-start mb-6",attrs:{color:e.$vuetify.theme.dark?"grey darken-3":"grey lighten-4",flat:"",tile:""}},[t("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[t("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},e._l(e.years,(function(a){return t("v-col",{key:a.label,staticClass:"d-flex flex-row"},[Number(a.label)===Number(e.currentYear)?t("span",{staticClass:"pa-1 ma-1",staticStyle:{color:"red"}},[e._v("\n             "+e._s(a.label)+"\n           ")]):t("span",{staticClass:"pa-1 ma-1"},[e._v("\n             "+e._s(a.label)+"\n           ")])])})),1)],1),e._v(" "),t("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[t("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},e._l(e.years,(function(a){return t("v-col",{key:a.label,staticClass:"d-flex flex-row"},e._l(a.states,(function(a){return t("v-tooltip",{key:a.label,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("span",e._g(e._b({staticClass:"pa-1 ma-1",style:"background-color:"+a.state,on:{click:function(t){return e.setCurrentStartDate(a.date)}}},"span",i,!1),s),[e._v("\n                "+e._s(a.label)+"\n              ")])]}}],null,!0)},[e._v(" "),t("span",[e._v(e._s(a.label))])])})),1)})),1)],1)],1)}),[],!1,null,"87593296",null).exports,c={name:"aeris-datavalidation-monthscalendar",components:{},props:{year:{type:Object,default:()=>({})},session:{type:Object,default:null},hide:{type:Boolean,default:()=>!1},getMonthStates:{type:Function,default:()=>{}},setCurrentStartDate:{type:Function,default:()=>{}},setSkeletonLoader:{type:Function,default:()=>{}},setRenderBounds:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({months:[],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),watch:{hide:{handler:function(){this.hide||this.setMonthRender()},immediate:!0},year:{handler:function(){!this.hide&&this.year&&this.setMonthRender()},immediate:!0}},methods:{getCurrentDayState:function(e,t,a){let s={};return t&&(s={date:this.year.value+"-"+a+"-"+a,shortLabel:this.monthsShort[e-1],start:this.dateToFormat(new Date(t.getFullYear(),t.getMonth(),1).toString(),"en"),end:this.dateToFormat(new Date(t.getFullYear(),t.getMonth()+1,0).toString(),"en")}),s},setMonthRender:function(){let e,t,a,s=[];this.year&&(this.setSkeletonLoader(!0),this.setRenderBounds({start:this.year.value,end:this.year.value}),this.getMonthStates({startYear:this.year.value,endYear:this.year.value},(i,n)=>{const{periods:o,flags:l}=i,r=this.groupingFlags(l);if(o)for(let i=1;i<=12;i++)e=i<10?"0"+i:i,t=new Date(this.year.value+"-"+e+"-"+e),a=this.getCurrentDayState(i,t,e),a.days=this.getMothDays(a,o,n,r,!1),s.push(a)}),this.months=s,this.setSkeletonLoader(!1))}}},u={name:"aeris-datavalidation-yearcalendar",components:{AerisDatavalidationYearskeleton:o,AerisDatavalidationYearsCalendar:d,AerisDatavalidationMonthsCalendar:Object(n.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"1200px"}},[e.hide?e._e():t("div",{staticClass:"d-flex justify-start mb-6 overflow-x-auto",attrs:{color:e.$vuetify.theme.dark?"grey darken-3":"grey lighten-4",flat:"",tile:""}},[t("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[t("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},e._l(e.months,(function(a){return t("v-col",{key:a.date,staticClass:"d-flex flex-row"},[t("span",{staticClass:"pa-1 ma-1"},[e._v("\n                    "+e._s(a.shortLabel)+"\n              ")])])})),1)],1),e._v(" "),t("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[t("v-row",{staticClass:"d-flex flex-row mb-6",attrs:{"no-gutters":""}},e._l(e.months,(function(a){return t("v-col",{key:a.date,staticClass:"d-flex flex-row"},e._l(a.days,(function(a){return t("v-tooltip",{key:a.value,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("span",e._g(e._b({staticClass:"pa-1 ma-1",style:"background-color:"+a.state,on:{click:function(t){return e.setCurrentStartDate(a.label)}}},"span",i,!1),s),[e._v("\n                "+e._s(a.value)+"\n              ")])]}}],null,!0)},[e._v(" "),t("span",[e._v(e._s(a.label))])])})),1)})),1)],1)],1)])}),[],!1,null,"6a3c4b2b",null).exports},props:{calendarType:{type:String,default:()=>""},session:{type:Object,default:null},webcomponent:{type:Boolean,default:!0},year:{type:Object,default:()=>({})},getPeriodsByYear:{type:Function,default:()=>{}},setStartDate:{type:Function,default:()=>{}},setType:{type:Function,default:()=>{}},setRenderBounds:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({value:"",type:"month",loading:!0,firstLoad:!0}),computed:{hideYearRender:function(){return this.calendarType&&"year"!==this.calendarType},hideYearsRender:function(){return this.calendarType&&"years"!==this.calendarType},showSkeleton:function(){return this.firstLoad}},methods:{setSkeletonLoader:function(e){this.firstLoad=e},setCurrentStartDate:function(e){const{firstDate:t,lastDate:a}=this.getDateFrag(e,!0);t&&a&&this.setRenderBounds({start:t,end:a}),this.setStartDate(e),this.setType("month")}}},h=Object(n.a)(u,(function(){var e=this,t=e._self._c;return t("div",[e.showSkeleton?t("AerisDatavalidationYearskeleton"):e._e(),e._v(" "),t("AerisDatavalidationMonthsCalendar",{attrs:{year:e.year,session:e.session,hide:e.hideYearRender,getMonthStates:e.getPeriodsByYear,setRenderBounds:e.setRenderBounds,setSkeletonLoader:e.setSkeletonLoader,setCurrentStartDate:e.setCurrentStartDate}}),e._v(" "),t("AerisDatavalidationYearsCalendar",{attrs:{year:e.year,session:e.session,hide:e.hideYearsRender,getYearsStates:e.getPeriodsByYear,setRenderBounds:e.setRenderBounds,setSkeletonLoader:e.setSkeletonLoader,setCurrentStartDate:e.setCurrentStartDate}})],1)}),[],!1,null,"c9447ce4",null);t.a=h.exports},293:function(e,t,a){"use strict";var s=a(279),i=a(282),n=a(280),o=a(302),l=a(294),r=a(295),d=a(286),c={name:"aeris-datavalidation-calendar",components:{AerisDatavalidationPeriodsFilter:l.a,AerisDatavalidationPeriodsCalendar:r.a,AerisDataValidationWebcomponentWrapper:d.a},props:{setDialogState:{type:Function,default:()=>{}},session:{type:Object,default:()=>({})},workperiod:{type:Object,default:()=>({startDate:"2012-09-11T00:00:00.000+00:00",endDate:"2012-09-13T23:59:59.000+00:00"})},webcomponent:{type:Boolean,default:!0},title:{type:String,default:()=>""},uuid:{type:String,default:()=>""},startdate:{type:String,default:()=>""},enddate:{type:String,default:()=>""},availabilityurl:{type:String,default:()=>""},periodsView:{type:Object,default:null}},mixins:[i.a,n.a,o.a],data:()=>({startDate:"",calDefaultView:null,currentSession:{},periodsFilter:null,currentEndDate:null,availablePeriods:null,currentStartDate:null,periodMenuState:!1,defaultDate:new Date,currentWorkPeriod:{startDate:"",endDate:""}}),beforeMount(){this.webcomponent&&this.initCalendarWcProps()},watch:{session:{handler:function(){this.initConf(this.session)},immediate:!0}},computed:{getCurrentDate:function(){return this.getDateTime(Date.now(),!0)}},methods:{dateToUtc:s.e,getDateTime:s.j,dateToFormat:s.d,translate(e){return this.$t(e)},initConf:function(e){let t,a=new Date;e&&e.workPeriod&&(t=e.workPeriod.startDate,""!==this.startDate?a=new Date(this.startDate+"T00:00:00Z"):t&&(a=new Date(t)),this.defaultDate=a,this.currentSession=Object.assign({},e))},setPeriodsFilter:function(e,t){this.periodsFilter={state:e,color:t}},setStartDate:function(e,t){e&&(this.startDate=this.getDateTime(e,!0),t&&(this.calDefaultView={value:"month"}))},closeDialog:function(){this.periodMenuState||this.setDialogState(!1),this.currentSession&&this.currentSession.workPeriod&&(this.defaultDate=new Date(this.currentSession.workPeriod.startDate))},notifyPeriodMenuState:function(e){void 0!==e&&(this.periodMenuState=e)},groupingDatesToPeriods:function(e){let t,a,s,i,n=[],o={};return e&&(n=e.map(e=>({startDate:e[0],endDate:e[e.length-1]})),n.forEach(e=>{t=new Date(e.startDate).getMonth()+1,a=new Date(e.endDate).getMonth()+1,s=new Date(e.startDate).getFullYear(),i=new Date(e.endDate).getFullYear(),void 0===o[s]&&(o[s]={}),void 0===o[i]&&(o[i]={}),void 0===o[s][t]&&(o[s][t]=[]),void 0===o[i][a]&&(o[i][a]=[]),s!==i?(o[s][t].push(e),o[i][a].push(e)):o[s][t].push(e)})),o},groupingDates:function(e){let t,a,s,i,n,o=[],l=[];return e&&e.availability&&(t=e.availability.date,a=e.availability.value,s=t[0],t.forEach((e,r)=>{i=new Date(e).getMonth()+1,n=new Date(s).getMonth()+1,i===n&&r!==t.length-1||(r===t.length-1&&a[r]&&o.push(e),0<o.length&&l.push(o),o=[]),a[r]&&o.push(e),s=e})),this.groupingDatesToPeriods(l)},getPeriodsProperties:function(e,t,a){const{parametersToValidate:s}=this.currentSession;let i,n,o,l;e&&t&&s&&(i=new Date(this.dateToFormat(e.date,"en")+"T00:00:00"),n=new Date(this.dateToFormat(t.date,"en")+"T23:59:59"),s[0]&&(o=s[0].instrumentId,l=s[0].name),this.currentStartDate=e,this.currentEndDate=t,a&&a(o,l,i,n))},getWCAvailablePeriods:function(e,t,a,s){let i,n;e&&t&&(i="month"===a?new Date(this.dateToFormat(e.date,"en")+"T00:00:00"):new Date(e+"T00:00:00"),n="month"===a?new Date(this.dateToFormat(t.date,"en")+"T23:59:59"):new Date(t+"-12-31"+"T23:59:59"),this.getProductAvailablePeriods(this.currentSession.instrument,this.dateToUtc(i),this.dateToUtc(n),e=>{this.availablePeriods=e,this.availablePeriods.years=this.groupingDates(e),s&&("month"===a?s(i,n,{periods:[],flags:[]},this.availablePeriods):s({periods:[],flags:[]},this.availablePeriods.years))}))},getPeriods({start:e,end:t},a){this.webcomponent?a&&this.getWCAvailablePeriods(e,t,"month",a):this.getPeriodsProperties(e,t,(e,t,s,i)=>{this.currentSession&&this.currentSession.instrument&&this.getProductAvailablePeriods(this.currentSession.instrument,this.dateToUtc(s),this.dateToUtc(i),n=>{this.getParameterPeriods(e,t,this.dateToUtc(s),this.dateToUtc(i),e=>{this.availablePeriods=n,this.availablePeriods.years=this.groupingDates(n),a&&a(s,i,e,this.availablePeriods)})})})},getYearProperties:function(e,t,a){let s,i,n,o;const{parametersToValidate:l}=this.currentSession;e&&t&&l&&(n=l[0].instrumentId,o=l[0].name,s=new Date(e+"T00:00:00"),i=new Date(t+"-12-31"+"T23:59:59"),a&&a(n,o,s,i))},getPeriodsByYear({startYear:e,endYear:t},a){!this.webcomponent&&e&&t?this.getYearProperties(e,t,(e,t,s,i)=>{this.getProductAvailablePeriods(this.currentSession.instrument,s,i,n=>{this.getParameterPeriods(e,t,s,i,e=>{this.availablePeriods=n,this.availablePeriods.years=this.groupingDates(n),a&&a(e,this.availablePeriods.years)})})}):a&&this.getWCAvailablePeriods(e,t,"years",a)}}},u=a(18),h=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("AerisDataValidationWebcomponentWrapper",{attrs:{webcomponent:e.webcomponent}},[t("v-card",{staticClass:"d-flex flex-row"},[t("AerisDatavalidationPeriodsFilter",{attrs:{session:e.currentSession,defaultDate:e.defaultDate,webcomponent:e.webcomponent,getFlags:e.getFlags,setStartDate:e.setStartDate,notifyCancelPopUp:e.closeDialog,downloadFlagsCsv:e.downloadFlagsCsv,getModelByPeriod:e.getModelByPeriod,setPeriodsFilter:e.setPeriodsFilter,getProductAvailablePeriods:e.getProductAvailablePeriods}}),e._v(" "),t("AerisDatavalidationPeriodsCalendar",{attrs:{title:e.title,model:e.periodsModel,startDate:e.startDate,session:e.currentSession,webcomponent:e.webcomponent,defaultDate:e.defaultDate,periodsFilter:e.periodsFilter,calDefaultView:e.calDefaultView,getPeriods:e.getPeriods,postPeriods:e.postPeriods,setStartDate:e.setStartDate,updatePeriod:e.updatePeriod,createPeriod:e.createPeriod,updateSession:e.updateSession,deletePeriods:e.deletePeriods,getPeriodsByYear:e.getPeriodsByYear,notifyPeriodMenuState:e.notifyPeriodMenuState,getProductAvailablePeriods:e.getProductAvailablePeriods}})],1)],1)}),[],!1,null,"996fbd40",null);t.a=h.exports},294:function(e,t,a){"use strict";var s=a(280),i=a(296),n={name:"aeris-datavalidation-periodsfilter",components:{AerisDatavalidationPeriodsPicker:a(298).a,AerisDatavalidationPeriodsFilterToolbar:i.a},props:{session:{type:Object,default:null},webcomponent:{type:Boolean,default:!0},setPeriodsFilter:{type:Function,default:()=>{}},notifyCancelPopUp:{type:Function,default:()=>{}},setStartDate:{type:Function,default:()=>{}},defaultDate:{type:Date,default:()=>{}},getFlags:{type:Function,default:()=>{}},downloadFlagsCsv:{type:Function,default:()=>{}},getModelByPeriod:{type:Function,default:()=>{}},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[s.a],data(){return{workPeriod:!0,notValidated:!0,alreadyValidated:!0,dataNotAvailable:!0,partiallyControlled:!0,checkboxStates:[{label:this.$t("session.label_alreadyValidated"),icon:"mdi-eye-check-outline",color:"#4CAF50"},{label:this.$t("session.label_partiallyControlled"),icon:"mdi-eye-outline",color:"#FFC107"},{label:this.$t("session.label_notValidated"),icon:"mdi-eye-remove",color:"#FF5252"},{label:this.$t("session.label_dataNotAvailable"),icon:"mdi-eye-remove",color:"#B0BEC5"},{label:this.$t("session.label_workPeriod"),icon:"mdi-timeline-clock",color:"#1976D2"}]}},watch:{alreadyValidated:function(){this.setPeriodsFilter(this.alreadyValidated,this.alreadyValidatedColor)},notValidated:function(){this.setPeriodsFilter(this.notValidated,this.notValidatedColor)},partiallyControlled:function(){this.setPeriodsFilter(this.partiallyControlled,this.partiallyControlledColor)},workPeriod:function(){this.setPeriodsFilter(this.workPeriod,this.workPeriodColor)}},methods:{}},o=a(18),l=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("div",[t("v-col",{staticClass:"pl-8 pr-8",attrs:{cols:"12"}},[t("div",{staticClass:"overline"},[e._v("\n          "+e._s(e.$t("session.label_periods"))+"\n        ")]),e._v(" "),t("v-checkbox",{attrs:{label:e.checkboxStates[0].label,color:e.checkboxStates[0].color,"append-icon":e.checkboxStates[0].icon,"hide-details":""},model:{value:e.alreadyValidated,callback:function(t){e.alreadyValidated=t},expression:"alreadyValidated"}}),e._v(" "),t("v-checkbox",{attrs:{label:e.checkboxStates[1].label,color:e.checkboxStates[1].color,"append-icon":e.checkboxStates[1].icon,"hide-details":""},model:{value:e.partiallyControlled,callback:function(t){e.partiallyControlled=t},expression:"partiallyControlled"}}),e._v(" "),t("v-checkbox",{attrs:{label:e.checkboxStates[2].label,color:e.checkboxStates[2].color,"append-icon":e.checkboxStates[2].icon,"hide-details":""},model:{value:e.notValidated,callback:function(t){e.notValidated=t},expression:"notValidated"}}),e._v(" "),t("v-checkbox",{attrs:{"input-value":e.dataNotAvailable,label:e.checkboxStates[3].label,color:e.checkboxStates[3].color,"append-icon":e.checkboxStates[3].icon,readonly:e.dataNotAvailable,"hide-details":""}}),e._v(" "),t("v-checkbox",{attrs:{label:e.checkboxStates[4].label,color:e.checkboxStates[4].color,"append-icon":e.checkboxStates[4].icon,"hide-details":""},model:{value:e.workPeriod,callback:function(t){e.workPeriod=t},expression:"workPeriod"}})],1)],1),e._v(" "),t("v-divider",{staticClass:"mt-4"}),e._v(" "),t("AerisDatavalidationPeriodsPicker",{attrs:{session:e.session,defaultDate:e.defaultDate,setStartDate:e.setStartDate,getProductAvailablePeriods:e.getProductAvailablePeriods}}),e._v(" "),t("v-divider"),e._v(" "),t("AerisDatavalidationPeriodsFilterToolbar",{attrs:{session:e.session,getFlags:e.getFlags,webcomponent:e.webcomponent,downloadFlagsCsv:e.downloadFlagsCsv,getModelByPeriod:e.getModelByPeriod,notifyCancelPopUp:e.notifyCancelPopUp}})],1)}),[],!1,null,"6b4dbeef",null);t.a=l.exports},295:function(e,t,a){"use strict";a(281);var s=a(280),i=a(299),n=a(292),o=a(301),l={name:"aeris-datavalidation-periodscalendar",components:{AerisDatavalidationPeriodDialog:i.a,AerisDatavalidationYearCalendar:n.a,AerisDatavalidationPeriodsCalendarToolbar:o.a},props:{session:{type:Object,default:null},title:{type:String,default:""},calDefaultView:{type:Object,default:()=>null},periodsFilter:{type:Object,default:()=>({})},webcomponent:{type:Boolean,default:!0},model:{type:Object,default:()=>{}},startDate:{type:String},getPeriods:{type:Function,default:()=>{}},createPeriod:{type:Function},defaultDate:{type:Date,default:()=>{}},notifyPeriodMenuState:{type:Function,default:()=>{}},setStartDate:{type:Function,default:()=>{}},updateSession:{type:Function,default:()=>{}},updatePeriod:{type:Function,default:()=>{}},postPeriods:{type:Function,default:()=>{}},getPeriodsByYear:{type:Function,default:()=>{}},deletePeriods:{type:Function,default:()=>{}},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[s.a],data(){return{focus:"",value:"",year:{value:(new Date).getFullYear().toString()},periods:[],allPeriods:[],type:"month",currentBound:{},yearPeriods:[],renderBounds:null,calendarRef:null,selectedPeriod:{},toolbarTitle:"test",selectedOpen:!1,selectedElement:null,types:[{value:"month",translate:this.$t("session.label_month")},{value:"year",translate:this.$t("session.label_year")},{value:"years",translate:this.$t("session.label_year")+"s"}]}},watch:{calDefaultView:{handler:function(){this.calDefaultView&&this.setType(this.calDefaultView.value)},immediate:!0},periodsFilter:{handler:function(){this.periodsFilter&&this.applyFilter()},immediate:!0},startDate:{handler:function(){this.startDate&&(this.focus=this.startDate,this.year={value:new Date(this.startDate).getFullYear().toString()})},immediate:!0},type:{handler:function(){this.$refs.calendar?this.type!==this.types[1].value&&this.type!==this.types[2].value||(this.year={value:this.$refs.calendar.title.split(" ")[1]}):this.year={value:this.year.value}},immediate:!0},defaultDate:{handler:function(){this.defaultDate&&(this.focus=this.defaultDate)},immediate:!0}},methods:{translate(e){return this.$t(e)},setSelectedPeriod:function(e){let t,a,s;e&&(a=e.start,s=e.end,t=this.getTargetPeriod(this.dbPeriods,a,s),this.selectedPeriod=e,this.selectedPeriod.targetPeriod=t)},applyFilter:function(){const{state:e,color:t}=this.periodsFilter;!e&&t?this.periods=this.periods.filter(e=>e.color!==t):t&&(this.periods=[...this.periods,...this.allPeriods.filter(e=>e.color===t)])},showPeriod({nativeEvent:e,event:t}){if(t.color!==this.noDataColor&&!this.webcomponent){const a=()=>{this.setSelectedPeriod(t),this.selectedElement=e.target,setTimeout(()=>{this.selectedOpen=!0},10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(a,10)):a()}e.stopPropagation()},getPeriodColor:e=>e.color,setType:function(e){e&&(this.type=e)},calendarPrev:function(){this.type===this.types[0].value?(this.$refs.calendar.prev(),this.setCurrentYear()):this.type!==this.types[1].value&&this.type!==this.types[2].value||(this.year={value:(Number(this.year.value)-1).toString()},this.setStartDate(this.year.value+"-01-01"))},calendarNext:function(){this.type===this.types[0].value?(this.$refs.calendar.next(),this.setCurrentYear()):this.type!==this.types[1].value&&this.type!==this.types[2].value||(this.year={value:(Number(this.year.value)+1).toString()},this.setStartDate(this.year.value+"-01-01"))},setSelectedOpen:function(e){void 0!==e&&(this.selectedOpen=e)},setCurrentYear:function(){let{day:e,month:t,year:a,firstDate:s,lastDate:i}=this.getDateFrag(this.focus,!0);e&&t&&a&&this.setRenderBounds({start:s,end:i})},setRenderBounds:function(e){e&&(this.renderBounds=e)},monthPeriodsHandler:function(e,t,a,s,i){const{periods:n,flags:o}=a;this.session&&this.session.workPeriod&&n&&(this.setPeriodsModel(e,t,s,this.session.workPeriod,n,o),this.periods=this.periodsModelToTags(null,null,this.translate),this.allPeriods=this.periods,this.webcomponent||(this.dbPeriods=n,this.dbPeriodsHandler(this.session.workPeriod,this.groupingFlags(o),i)))},refreshMonthRender:function({start:e,end:t},a){let s,i,n,o,l;this.session&&this.session.workPeriod&&(s=this.getDateTime(this.session.workPeriod.startDate,!0),i=this.getDateTime(this.session.workPeriod.endDate,!0),n=s&&e&&this.isHigherThan(e.date,s,!0)?{date:s}:e,o=i&&t&&this.isHigherThan(i,t.date,!0)?{date:i}:t,l={start:n,end:o},this.getPeriods(l,(e,t,s,i)=>{this.monthPeriodsHandler(e,t,s,i,a)}))},getWorkPeriodParameters:function(){let e,t={start:null,end:null};return this.session&&this.session.workPeriod&&(e=this.getDateFrag(this.session.workPeriod.startDate,!0),e&&e.firstDate&&e.lastDate&&(t={start:{date:e.firstDate},end:{date:e.lastDate}})),t},setMonthRender:function(e,t){let a;const s=new Date(e+"T00:00:00"),i=new Date(t+"T23:59:59"),n=Object.assign({},this.session.workPeriod);this.session&&this.session.workPeriod&&s&&i&&(this.session.workPeriod.startDate=this.dateToUtc(s),this.session.workPeriod.endDate=this.dateToUtc(i),this.focus=new Date(this.session.workPeriod.startDate),a=Object.assign({},this.session.workPeriod),this.updateSession(this.session,()=>{this.refreshMonthRender(this.getWorkPeriodParameters(),()=>{const e=this.periods.find(e=>this.isSamePeriod(this.selectedPeriod,e));e&&this.setSelectedPeriod(e),this.$store.commit("updateNewPeriodData",{newPeriod:a,oldPeriod:n})})}))}}},r=a(18),d=Object(r.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"1500px"}},[t("v-card",{staticClass:"overflow-x-auto"},[t("div",[t("AerisDatavalidationPeriodsCalendarToolbar",{attrs:{type:e.type,types:e.types,title:e.title,session:e.session,yearPeriods:e.yearPeriods,renderBounds:e.renderBounds,setType:e.setType,calendarPrev:e.calendarPrev,calendarNext:e.calendarNext}}),e._v(" "),this.$refs.calendar&&"month"===e.type?t("v-toolbar-title",{staticClass:"pa-1 mt-4"},[e._v("\n          "+e._s(this.$refs.calendar.title.toUpperCase())+"\n        ")]):t("v-toolbar-title",{staticClass:"pa-1"},[e._v("\n          "+e._s(this.year.value)+"\n        ")])],1),e._v(" "),t("v-sheet",{attrs:{height:"600"}},["month"===e.type?t("v-calendar",{ref:"calendar",attrs:{type:e.type,start:e.startDate,events:e.periods,locale:e.$i18n.locale,"event-overlap-threshold":30,"event-color":e.getPeriodColor,"event-more-text":e.$t("common.more")},on:{"click:event":e.showPeriod,change:e.refreshMonthRender},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}):t("AerisDatavalidationYearCalendar",{attrs:{year:e.year,session:e.session,setType:e.setType,calendarType:e.type,setStartDate:e.setStartDate,getPeriodsByYear:e.getPeriodsByYear,setRenderBounds:e.setRenderBounds}}),e._v(" "),t("AerisDatavalidationPeriodDialog",{attrs:{model:e.model,session:e.session,createPeriod:e.createPeriod,updatePeriod:e.updatePeriod,selectedOpen:e.selectedOpen,currentDbPeriods:e.dbPeriods,updateSession:e.updateSession,selectedPeriod:e.selectedPeriod,selectedElement:e.selectedElement,notifyPeriodMenuState:e.notifyPeriodMenuState,setMonthRender:e.setMonthRender,setSelectedOpen:e.setSelectedOpen,setRenderBounds:e.setRenderBounds,refreshMonthRender:e.refreshMonthRender,getProductAvailablePeriods:e.getProductAvailablePeriods}})],1)],1)],1)}),[],!1,null,"e229296e",null);t.a=d.exports},296:function(e,t,a){"use strict";var s=a(297),i={name:"aeris-datavalidation-periodsfiltertoolbar",props:{session:{type:Object,default:null},webcomponent:{type:Boolean,default:!0},notifyCancelPopUp:{type:Function,default:()=>{}},downloadFlagsCsv:{type:Function,default:()=>{}},getFlags:{type:Function,default:()=>{}},getModelByPeriod:{type:Function,default:()=>{}}},components:{AerisDatavalidationExportDataDialog:s.a},data:()=>({enableDialog:!1}),methods:{dialogHandler:function(e){this.enableDialog=e}}},n=a(18),o=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("div",[t("v-sheet",{staticClass:"d-flex justify-center mt-5",attrs:{tile:""}},[t("v-card-actions",{staticClass:"pa-1 ml-1"},[e.webcomponent?e._e():t("v-btn",{attrs:{color:"darken-1"},on:{click:function(t){return e.dialogHandler(!0)}}},[e._v("\n          "+e._s(e.$t("session.label_export"))+"\n          "),t("v-icon",{attrs:{left:""}},[e._v("\n            mdi-calendar-export\n          ")])],1),e._v(" "),e.webcomponent?e._e():t("v-btn",{attrs:{color:"darken-1"},on:{click:e.notifyCancelPopUp}},[e._v("\n          "+e._s(e.$t("common.close"))+"\n        ")])],1)],1),e._v(" "),t("AerisDatavalidationExportDataDialog",{attrs:{session:e.session,getFlags:e.getFlags,webcomponent:e.webcomponent,enableDialog:e.enableDialog,downloadFlagsCsv:e.downloadFlagsCsv,getModelByPeriod:e.getModelByPeriod,dialogHandler:e.dialogHandler}})],1)}),[],!1,null,"0719bbe6",null);t.a=o.exports},297:function(e,t,a){"use strict";var s=a(303),i=a(279),n={name:"aeris-datavalidation-exportdatadialog",components:{AerisDatavalidationDateMounthPicker:a(288).a},props:{enableDialog:{type:Boolean,default:()=>!1},dialogHandler:{type:Function,default:()=>{}},webcomponent:{type:Boolean,default:!0},session:{type:Object,default:null},getFlags:{type:Function,default:()=>{}},downloadFlagsCsv:{type:Function,default:()=>{}},getModelByPeriod:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({fileFormat:"",listAlert:!1,currentStartDate:"",exportDataDialog:!1}),watch:{enableDialog:{handler:function(){this.exportDataDialog=this.enableDialog},immediate:!0}},computed:{getTypeOfChart:function(){let e="";const{instrument:t}=this.session;return t&&(e=t.type),e},getFileFormats:function(){let e=[];const{instrument:t}=this.session;return t&&"PointSeries"===t.type?e=["CSV","JSON"]:t&&"Heatmap"===t.type&&(e=["JSON"]),e},disableExportButton:function(){return""===this.fileFormat},getCurrentStartDate:function(){let e="";const{workPeriod:t}=this.session;return t&&(e={date:this.dateToFormat(t.startDate,"en")}),e},getCurrentEndDate:function(){let e="";const{workPeriod:t}=this.session;return t&&(e={date:this.dateToFormat(t.endDate,"en")}),e},getMinDate:function(){let e,t="";const{instrument:a}=this.session;return a&&(e=a.start_date,t=new Date(this.dateToFormat(e,"en")).toISOString().slice(0,10)),t},getMaxDate:function(){let e,t="";const{instrument:a}=this.session;return a&&(e=a.end_date,t=new Date(this.dateToFormat(e,"en")).toISOString().slice(0,10)),t}},methods:{dateToFormat:i.d,isSameDateTime:i.o,closeDialog:function(){this.exportDataDialog=!1,this.dialogHandler(!1)},setCurrentStartDate:function(e){this.isSameDateTime(this.currentStartDate,e)||(this.currentStartDate=e)},setCurrentEndDate:function(e){this.isSameDateTime(this.currentEndDate,e)||(this.currentEndDate=e)},getFilterFlag:function(e){let t,a={};return e&&(t=e.availableFlags[0],a.startDate=this.dateToUtc(e.startXaxis),a.endDate=this.dateToUtc(e.endXaxis),a.parameter=e.parameterName,a.code=t.code.trim(),a.description=e.description?e.description:t.label.trim()),a},getFilterFlags:function(e){let t=[];return e&&(t=e.map(e=>this.getFilterFlag(e))),t},flagsToCsv:function(e){let t,a,s,i,n=[],o="";e&&0<e.length&&(t=e[0].instrumentName+"_"+e[0].parameterName,i=this.getFilterFlags(e),i&&(i.forEach((e,t)=>{0===t&&n.push(Object.keys(e)),n.push(Object.values(e))}),n.forEach((function(e){let t="";e.forEach((a,s)=>{t+='"'+a+'"',s<e.length-1&&(t+=",")}),o+=t+"\r\n"})),a="data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+o),s=document.createElement("a"),s.setAttribute("href",a),s.setAttribute("download",t+".csv"),document.body.appendChild(s),s.click()))},objToJsonFile:function(e,t){const a=new Blob([JSON.stringify(e)],{type:"text/json"}),s=document.createElement("a");s.download=e[0].instrumentName?e[0].instrumentName+"_"+e[0].parameterName:t,s.href=window.URL.createObjectURL(a),s.dataset.downloadurl=["text/json",s.download,s.href].join(":");const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(i),s.remove()},enableListAlert:function(){this.listAlert=!0,setTimeout(()=>{this.listAlert=!1},1e3)},exportPeriods:function(){let e;const{instrument:t}=this.session,a=new Date(this.currentStartDate+"T00:00:00"),s=new Date(this.currentEndDate+"T23:59:59"),i=this.session.parametersToValidate[0],n=i.instrumentId,o=i.name;t&&"PointSeries"===t.type?this.getFlags(n,o,null,a,s,t=>{"CSV"===this.fileFormat&&0<t.length?this.flagsToCsv(t,n+"_"+o):"JSON"===this.fileFormat&&0<t.length?(e=this.getFilterFlags(t),this.objToJsonFile(e,this.session.instrument.name+"_"+o+".json")):this.enableListAlert()},!0):t&&"Heatmap"===t.type&&this.getModelByPeriod(i,n,a,s,e=>{this.objToJsonFile(e.z,this.session.instrument.name+"_"+o+".json")})}}},o=a(18),l=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:e.exportDataDialog,callback:function(t){e.exportDataDialog=t},expression:"exportDataDialog"}},[t("v-card",[t("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("\n            "+e._s(e.$t("session.label_exportOfPeriod"))+"\n          ")]),e._v(" "),t("v-form",[t("v-container",[e.listAlert?t("v-alert",{attrs:{type:"warning"}},[e._v("\n                "+e._s(e.$t("session.label_emptyList"))+"\n              ")]):e._e(),e._v(" "),t("v-row",[t("v-col",{attrs:{cols:"6"}},[t("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:e.$t("session.label_startDate"),currentDate:e.getCurrentStartDate,setCurrentDate:e.setCurrentStartDate,minDate:e.getMinDate,maxDate:e.getMaxDate}})],1),e._v(" "),t("v-col",{attrs:{cols:"6"}},[t("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:e.$t("session.label_endDate"),currentDate:e.getCurrentEndDate,setCurrentDate:e.setCurrentEndDate,minDate:e.getMinDate,maxDate:e.getMaxDate}})],1),e._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-select",{attrs:{items:e.getFileFormats,name:"name","item-text":"name","item-value":"name","data-cy":"sessionFormInstrumentName-select",label:e.$t("session.label_fileFormat"),required:"","return-object":""},model:{value:e.fileFormat,callback:function(t){e.fileFormat=t},expression:"fileFormat"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-card-actions",[t("v-btn",{attrs:{disabled:e.disableExportButton},on:{click:e.exportPeriods}},[e._v("\n                      "+e._s(e.$t("session.label_export"))+"\n                    ")]),e._v(" "),t("v-btn",{on:{click:e.closeDialog}},[e._v("\n                      "+e._s(e.$t("common.close"))+"\n                    ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"bd5c4c18",null);t.a=l.exports},298:function(e,t,a){"use strict";var s=a(279),i={name:"aeris-datavalidation-periodspicker",props:{session:{type:Object,default:null},setStartDate:{type:Function,default:()=>{}},defaultDate:{type:Date,default:()=>{}},getProductAvailablePeriods:{type:Function,default:()=>{}}},data:()=>({picker:"",minDate:"",maxDate:"",pickerDate:null,availablePeriods:{}}),watch:{pickerDate:function(e){e&&this.setAvailability(e+"-01")},defaultDate:{handler:function(){this.defaultDate&&(this.picker=this.defaultDate.toISOString().slice(0,10),this.setAvailability(this.defaultDate))},immediate:!0}},computed:{getMinDate:function(){let e=void 0;return this.session&&this.session.instrument&&(e=this.session.instrument.start_date),e||""},getMaxDate:function(){let e=void 0;return this.session&&this.session.instrument&&(e=this.session.instrument.end_date),e||""}},methods:{dateToUtc:s.e,getDateTime:s.j,getDateFrag:s.h,allowedDates:function(e){let t,a,s=!1;return this.availablePeriods&&this.availablePeriods.availability&&(t=this.availablePeriods.availability.date,a=this.availablePeriods.availability.value,s=t&&a&&e&&t.some((t,s)=>t===e&&a[s])),s},setAvailability:function(e){let t,a;const{firstDate:s,lastDate:i}=this.getDateFrag(e);this.session&&this.session.instrument&&s&&i&&(t=this.dateToUtc(s),a=this.dateToUtc(i),this.getProductAvailablePeriods(this.session.instrument,t,a,e=>{this.availablePeriods=e}))},onChangeHandler:function(e){e&&this.setStartDate(e,!0)}}},n=a(18),o=Object(n.a)(i,(function(){var e=this;return(0,e._self._c)("v-date-picker",{attrs:{"no-title":"",min:e.getMinDate,max:e.getMaxDate,locale:e.$i18n.locale,"picker-date":e.pickerDate,"allowed-dates":e.allowedDates},on:{"update:pickerDate":function(t){e.pickerDate=t},"update:picker-date":function(t){e.pickerDate=t},change:e.onChangeHandler},model:{value:e.picker,callback:function(t){e.picker=t},expression:"picker"}})}),[],!1,null,"c79f9e74",null);t.a=o.exports},299:function(e,t,a){"use strict";var s=a(280),i={name:"aeris-datavalidation-perioddialog",components:{AerisDatavalidationPeriodForm:a(300).a},props:{session:{type:Object,default:null},model:{type:Object},createPeriod:{type:Function},currentDbPeriods:{type:Array},selectedElement:{type:HTMLDivElement},selectedPeriod:{type:Object},selectedOpen:{type:Boolean},setSelectedOpen:{type:Function},setMonthRender:{type:Function},refreshMonthRender:{type:Function},notifyPeriodMenuState:{type:Function},updateSession:{type:Function},updatePeriod:{type:Function},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[s.a],data:()=>({open:!1}),updated(){this.notifyPeriodMenuState(this.open)},watch:{selectedOpen:{immediate:!0,handler(){this.selectedOpen&&(this.open=this.selectedOpen)}}},methods:{setOpen:function(e){void 0!==e&&(this.open=e,this.setSelectedOpen(e))}}},n=a(18),o=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("v-menu",{attrs:{"close-on-content-click":!1,"close-on-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t("v-card",{attrs:{width:"500"}},[t("v-toolbar",{attrs:{color:"#90A4AE",dark:""}},[e._v("\n        "+e._s(e.$t("session.label_workPeriodDef"))+"\n      ")]),e._v(" "),t("AerisDatavalidationPeriodForm",{attrs:{model:e.model,session:e.session,updatePeriod:e.updatePeriod,createPeriod:e.createPeriod,updateSession:e.updateSession,selectedPeriod:e.selectedPeriod,setMonthRender:e.setMonthRender,currentDbPeriods:e.currentDbPeriods,setOpen:e.setOpen,refreshMonthRender:e.refreshMonthRender,getProductAvailablePeriods:e.getProductAvailablePeriods}})],1)],1)}),[],!1,null,"53ad2e7c",null);t.a=o.exports},300:function(e,t,a){"use strict";var s=a(279),i=a(280),n=a(283),o=a(290),l=a(288),r={name:"aeris-datavalidation-periodform",components:{AerisDatavalidationSelect:o.a,AerisDatavalidationDeleteDialog:n.a,AerisDatavalidationDateMounthPicker:l.a},props:{model:{type:Object},currentDbPeriods:{type:Array},setOpen:{type:Function},createPeriod:{type:Function},session:{type:Object,default:null},selectedPeriod:{type:Object},setMonthRender:{type:Function},refreshMonthRender:{type:Function},updateSession:{type:Function},updatePeriod:{type:Function},getProductAvailablePeriods:{type:Function,default:()=>{}}},mixins:[i.a],data(){return{dialog:!1,edit:!0,endDate:null,oldState:null,startDate:null,defaultFlags:[],qualityFlags:[],selectedFlags:null,currentEndDate:"",currentStartDate:"",closePeriodDialog:!1,currentStateColor:"#1976D2",disabledClosePeriodButton:!1,stateValue:this.$t("session.label_workPeriod"),state:[{text:this.$t("session.label_workPeriod"),color:"#1976D2"}]}},watch:{selectedPeriod:{handler:function(e){if(e){const{color:t,start:a,end:s}=e;this.endDate=s,this.startDate=a,this.currentStateColor=t,this.state=this.getStates[0],this.session&&(this.qualityFlags=this.concatFlagCodeLabel(this.session.instrument.availableFlags)),"error"===t?this.disabledClosePeriodButton=!0:"primary"===t&&(this.disabledClosePeriodButton=!1)}},immediate:!0},state:function(e,t){this.oldState=t}},computed:{disabledCloseButton:function(){let e=!0;return this.selectedPeriod&&(e=this.selectedPeriod.color!==this.stateColor.workperiodcolor),e},alertForm:function(){let e;return!!this.session&&(e=this.session.instrument.name,"P2OA-CRA-Lannemezan"===e||"PDM_NEPHE"===e)},getStates:function(){let e=[];return this.statesColors&&(e=this.statesColors.filter(e=>e.color!==this.notValidatedColor&&e.color!==this.alreadyValidatedColor)),e},isNotValidated:function(){let e;return!!this.state&&(e=this.session.instrument.name,this.state.color===this.notValidatedColor||"P2OA-CRA-Lannemezan"===e||"PDM_NEPHE"===e)},getCurrentStartDate:function(){let e="";return this.startDate&&(e={date:this.dateToFormat(this.startDate,"en")}),e},getCurrentEndDate:function(){let e="";return this.endDate&&(e={date:this.dateToFormat(this.endDate,"en")}),e},getStartDateMinDate:function(){let e=void 0;return this.session&&this.session.instrument&&(e=this.session.instrument.start_date),e||""},getStartDateMaxDate:function(){let e=void 0;return this.currentEndDate&&""!==this.currentEndDate&&(e=this.dateToFormat(this.addDayToDate(this.currentEndDate,1,!0,!0),"en")),e||""},getEndDateMinDate:function(){let e=void 0;return this.currentStartDate&&""!==this.currentStartDate&&(e=this.dateToFormat(this.addDayToDate(this.currentStartDate,1,!0),"en")),e||""},getEndDateMaxDate:function(){let e=void 0;return this.session&&this.session.instrument&&(e=this.session.instrument.end_date),e||""}},methods:{dateToUtc:s.e,addDayToDate:s.a,dateToFormat:s.d,isSameDateTime:s.o,setCurrentStartDate:function(e){this.isSameDateTime(this.currentStartDate,e)||(this.currentStartDate=e)},setCurrentEndDate:function(e){this.isSameDateTime(this.currentEndDate,e)||(this.currentEndDate=e)},cancelForm:function(){this.setOpen(!1)},setDateFormat:function(e,t,a){e&&t&&a&&(e.startDate=this.dateToUtc(t),e.endDate=this.dateToUtc(a))},periodHandler:function(){this.setMonthRender(this.currentStartDate,this.currentEndDate),this.setOpen(!1)},validate:function(){this.dialog=!1,this.closePeriodDialog=!1,this.flushPeriod()},cancel:function(){this.dialog=!1,this.closePeriodDialog=!1},closePeriod:function(){this.cancelForm(),this.dialog=!0,this.closePeriodDialog=!0},getNewPeriod:function(e,t,a){let s=this.currentDbPeriods.find(e=>this.isSamePeriod(e,a));return s?(s.state=this.states["#4CAF50"],s.instrumentId=e,s):{state:this.states["#4CAF50"],instrumentId:e,parameterName:t,endDate:this.dateToUtc(a.endDate),startDate:this.dateToUtc(a.startDate)}},getWorkPeriodParameters:function(){let e={start:null,end:null};const{firstDate:t,lastDate:a}=this.getDateFrag(this.session.workPeriod.startDate,!0);return t&&a&&(e={start:{date:t},end:{date:a}}),e},refreshCal:function(e,t){e&&t&&(this.refreshMonthRender(this.getWorkPeriodParameters(),()=>{this.$store.commit("updateCloseFlagData",{workPeriod:t,availableFlags:this.selectedFlags})}),this.setOpen(!1))},flushPeriod:function(){let e;const{workPeriod:t}=this.session,a=this.session.parametersToValidate[0],s=a.instrumentId,i=a.name;t&&s&&i&&(e=this.getNewPeriod(s,i,t),e.id?this.updatePeriod(e,e=>{this.refreshCal(e,t)}):this.createPeriod(e,e=>{this.refreshCal(e,t)}))},setFlagsSelected:function(e){const t=e[0];t&&t.code&&(this.selectedFlags=t)},concatFlagCodeLabel:function(e){return e&&e.forEach(e=>{e.concatName=e.code+", "+e.label}),e}}},d=a(18),c=Object(d.a)(r,(function(){var e=this,t=e._self._c;return t("v-container",[t("AerisDatavalidationDeleteDialog",{attrs:{dialog:e.dialog,ok:e.$t("session.label_yes"),cancel:e.$t("session.label_no"),okCallBack:e.validate,cancelCallBack:e.cancel,title:e.$t("session.label_closing"),message:e.$t("session.message_closeCurrentPeriod")}}),e._v(" "),t("v-dialog",{attrs:{width:500,heigth:600},model:{value:e.closePeriodDialog,callback:function(t){e.closePeriodDialog=t},expression:"closePeriodDialog"}},[t("v-card",[t("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("\n          "+e._s(e.$t("session.label_periodClosure"))+"\n        ")]),e._v(" "),t("v-row",{staticClass:"pa-2"},[t("v-col",{attrs:{cols:"12"}},[t("AerisDatavalidationSelect",{attrs:{name:"flags",itemText:"concatName",session:e.session,qualityFlags:e.qualityFlags,flag_message:e.$t("session.message_novalidateddataflag"),setFlagsSelected:e.setFlagsSelected,defaultQualityFlags:e.defaultFlags,disabledSelect:e.disabledCloseButton}})],1)],1),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{disabled:e.disabledCloseButton},on:{click:e.validate}},[e._v("\n            "+e._s(e.$t("session.label_validate"))+"\n          ")]),e._v(" "),t("v-btn",{on:{click:e.cancel}},[e._v("\n            "+e._s(e.$t("session.label_cancel"))+"\n          ")])],1)],1)],1),e._v(" "),t("v-form",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"6"}},[t("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:e.$t("session.label_startDate"),session:e.session,minDate:e.getStartDateMinDate,maxDate:e.getStartDateMaxDate,currentDate:e.getCurrentStartDate,getProductAvailablePeriods:e.getProductAvailablePeriods,setCurrentDate:e.setCurrentStartDate}})],1),e._v(" "),t("v-col",{attrs:{cols:"6"}},[t("AerisDatavalidationDateMounthPicker",{attrs:{dateLabel:e.$t("session.label_endDate"),session:e.session,minDate:e.getEndDateMinDate,maxDate:e.getEndDateMaxDate,currentDate:e.getCurrentEndDate,getProductAvailablePeriods:e.getProductAvailablePeriods,setCurrentDate:e.setCurrentEndDate}})],1),e._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-card-actions",[t("v-btn",{attrs:{disabled:e.isNotValidated},on:{click:e.periodHandler}},[e._v("\n                OK\n              ")]),e._v(" "),t("v-btn",{attrs:{disabled:e.disabledCloseButton},on:{click:e.closePeriod}},[e._v("\n                "+e._s(e.$t("session.label_windUp"))+"\n              ")]),e._v(" "),t("v-btn",{on:{click:e.cancelForm}},[e._v("\n                "+e._s(e.$t("session.label_cancel"))+"\n              ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"173f8500",null);t.a=c.exports},301:function(e,t,a){"use strict";var s=a(280),i={name:"aeris-datavalidation-periodscalendartoolbar",props:{session:{type:Object,default:null},title:{type:String,default:"Title"},renderBounds:{type:Object,default:()=>({})},yearPeriods:{type:Array,default:()=>[]},type:{type:String,default:""},types:{type:Array,default:()=>[]},setType:{type:Function,default:()=>{}},calendarPrev:{type:Function,default:()=>{}},calendarNext:{type:Function,default:()=>{}}},data(){return{outBoundMin:!1,outBoundMax:!1,localeType:this.type}},mixins:[s.a],watch:{type:function(){this.type&&(this.localeType=this.type)},localeType:function(){this.setType(this.localeType)},renderBounds:{handler:function(){this.renderBounds&&this.setBounds()},immediate:!0}},computed:{getInstrumentName:function(){const{instrument:e}=this.session;return e?e.name:this.title}},methods:{setBounds:function(){let e,t;const{instrument:a}=this.session;a&&(e=new Date(this.renderBounds.start+"T00:00:00"),t=new Date(this.renderBounds.end+"T23:59:59"),this.outBoundMin=this.isHigherThan(a.start_date,e,!0),this.outBoundMax=this.isHigherThan(t,a.end_date,!0))}}},n=a(18),o=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"54"}},[t("v-btn",{staticClass:"ma-2",attrs:{icon:"",disabled:e.outBoundMin},on:{click:e.calendarPrev}},[t("v-icon",[e._v("mdi-chevron-left")])],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-toolbar",{staticClass:"mt-1"},[e._v("\n      "+e._s(e.$t("session.label_instrument"))+" : "+e._s(e.getInstrumentName)+"\n      "),t("v-spacer"),e._v(" "),e._l(e.types,(function(a){return t("v-btn-toggle",{key:a.value,attrs:{color:"primary accent-3",group:""},model:{value:e.localeType,callback:function(t){e.localeType=t},expression:"localeType"}},[t("v-btn",{attrs:{value:a.value}},[e._v("\n          "+e._s(a.translate)+"\n        ")])],1)}))],2),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"ma-3",attrs:{icon:"",disabled:e.outBoundMax},on:{click:e.calendarNext}},[t("v-icon",[e._v("mdi-chevron-right")])],1)],1)}),[],!1,null,"268cb14e",null);t.a=o.exports},302:function(e,t,a){"use strict";a(322);t.a={data:()=>({workPeriod:{startDate:"2012-09-11T00:00:00Z",endDate:"2012-09-12T23:59:59.000Z"},instrument:{instrumentId:null,uuid:"OPE_NEPHE_RAW",rootUrl:"https://dataviz.icare.univ-lille.fr/daalia",path:"/getfiles",name:"OPE_NEPHE",type:"PointSeries",start_date:"2012-09-11T00:00:00.000Z",end_date:"2022-01-01T23:59:59.000Z",xaxis_name:"Time",yaxis_name:"Value",availableFlags:[]},wcThemes:[{name:"light",background:"rgb(255,255,255)",plotPaper:"rgb(255,255,255)",grid:"rgb(230,230,230)",text:"rgb(70,70,70)",iconColor:"rgba(68, 68, 68, 0.3)",activecolor:"rgba(212, 10, 10, 0.7)",chartTabColor:"light-blue",flagOpacity:.28,thresholdMinColor:"rgb(27,27,28)",thresholdMaxColor:"rgb(245,6,6)"},{name:"dark",background:"rgb(30,30,30)",plotPaper:"rgb(30,30,30)",grid:"rgb(60,60,60)",text:"rgb(230,230,230)",iconColor:"rgb(230,230,230)",activecolor:"rgba(212, 10, 10, 0.7)",chartTabColor:"light-blue",flagOpacity:.69,thresholdMinColor:"rgb(255,255,255)",thresholdMaxColor:"rgb(255,0,0)"}],colorScale:[{value:0,color:"rgba(68, 1, 84, 1)",default:!1},{value:.1111111111111111,color:"rgba(72, 40, 120, 1)",default:!1},{value:.2222222222222222,color:"rgba(62, 73, 137, 1)",default:!1},{value:.3333333333333333,color:"rgba(49, 104, 142, 1)",default:!1},{value:.4444444444444444,color:"rgba(38, 130, 142, 1)",default:!1},{value:.5555555555555556,color:"rgba(31, 158, 137, 1)",default:!1}],first1DParam:{name:"scat_coef_635",type:"PointSeries",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/OPE_NEPHE_RAW",color:{name:"rgb(255, 0, 0)",value:null,color:null,colorScale:null,description:null,default:!0}},second1DParam:{name:"cell_temp",type:"PointSeries",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/OPE_NEPHE_RAW",color:{name:"rgb(0, 255, 1)",value:null,color:null,colorScale:null,description:null,default:!0}},first2DParam:{name:"UWE",type:"Profiles",url:"https://dataviz.icare.univ-lille.fr/daalia/getdata/LZA_RADAR_VHF_L2A_DAILY",color:{name:"Viridis",value:null,color:null,description:"reset",default:!0}},sessionProps:{lock:!0,theme:"light",parametersToValidate:[],charts:[{title:"OPE_NEPHE",frName:"Graphique principal",enName:"Main chart",parameters:[]},{title:"OPE_NEPHE",frName:"Graphique secondaire",enName:"Secondary chart",parameters:[]}],currentSecondChartName:"Secondary chart",threshold:null}}),methods:{getSessionProps:function(){let e=Object.assign({},this.sessionProps);return e&&(e.workPeriod=Object.assign({},this.workPeriod),e.instrument=Object.assign({},this.instrument)),e},initChartsWC:function(){let e,t=this.getSessionProps();return t&&"[]"!==this.charts&&(e=JSON.parse(this.charts.replaceAll("'",'"')),e?t.charts=e:(t.parametersToValidate.push(this.first1DParam),t.charts[0].parameters.push(this.first1DParam),this.first2DParam.color.colorScale=this.colorScale),t.charts[1].parameters.push(this.first2DParam),this.newSession(t,this.wcThemes)),t},initCalendarWcProps:function(){let e=this.getSessionProps();e&&(e.instrument.name=""!==this.title?this.title:e.instrument.name,e.instrument.uuid=""!==this.uuid?this.uuid:e.instrument.uuid,e.instrument.start_date=""!==this.startdate?this.startdate:e.instrument.start_date,e.instrument.end_date=""!==this.enddate?this.enddate:e.instrument.end_date,e.instrument.rootUrl=""!==this.availabilityurl?this.availabilityurl:e.instrument.rootUrl,this.currentSession=e)}}}},303:function(e,t,a){"use strict";a(281);var s=a(289),i=a.n(s),n=a(279),o=a(285),l=a(0),r=a(48);l.default.use(r.a);var d=new r.a({locale:"fr",messages:function(){const e=a(304),t={};return e.keys().forEach(a=>{const s=a.match(/([A-Za-z0-9-_]+)\./i);if(s&&s.length>1){const i=s[1];t[i]=e(a)}}),t}()});t.a={data:()=>({inputsNames:{parametername:d.t("session.label_parameterName"),instrumentname:d.t("session.label_instrumentName"),creationdate:d.t("session.label_creationDate"),startdate:d.t("session.label_startDate"),enddate:d.t("session.label_endDate"),availableflags:d.t("session.label_availableFlags")}}),methods:{getFlag:o.f,dateToUtc:n.e,flagExist:o.b,isSameFlag:o.k,getDateTime:n.j,isHigherThan:n.n,isFlagInFlag:o.i,periodToFlag:o.l,flagToPeriod:o.c,isDateBetWeen:n.m,isSameDateTime:n.o,getExcludeFlags:o.d,isIncludesPeriod:o.j,getTargetFlagIndex:o.g,isDateInFlagPeriod:o.h,isFlagInclude:function(e,t){let a=!1;return e&&t&&(a=this.dateBetweenPeriod(e.x0,t)&&this.dateBetweenPeriod(e.x1,t)),a},isFlagIncludeInPeriod:function(e){let t=!1;return e&&(t=this.flags.some(t=>this.isFlagInclude(t,e))),t},getInstrumentAvailableFlags:function(e){let t={};return this.currentSession.instrument&&this.currentSession.instrument.availableFlags.forEach(a=>{t[e?a.color:a.code]=a}),t},getAvailableFlagsByCode:function(e){let t=0;const a=this.getInstrumentAvailableFlags();return a&&e&&(t=[a[e]]),t},getAvailableFlagsByColor:function(e){let t=0;const a=this.getInstrumentAvailableFlags(!0);return a&&e&&(t=[a[e]]),t},chartsFlagToFlag:function(e){let t=[];const a=this.currentSession.charts[0],{user:s}=this.$store.state.common;let i,n;return e&&a&&s&&(i=a.parameters[0],t=e.map(e=>(n=this.getAvailableFlagsByColor(e.fillcolor),{startXaxis:this.dateToUtc(e.x0),endXaxis:this.dateToUtc(e.x1),startYaxis:e.y0,endYaxis:e.y1,description:n?n[0].description:"",editable:!0,availableFlags:n,instrumentId:i.instrumentId,parameterName:i.name,piEmail:s.email}))),t},addThresholds:function(){this.isMainChart&&this.currentSession&&this.currentSession.threshold&&!this.currentSession.threshold.hide&&(this.drawThreshold(this.currentSession.threshold.thresholdMin,this.theme.thresholdMinColor),this.drawThreshold(this.currentSession.threshold.thresholdMax,this.theme.thresholdMaxColor))},drawDefaultFlags:function(){const{sessionFlags:e}=this.$store.state.common;this.data&&this.data[0]&&e&&(this.drawFlags(e,!0),this.addThresholds())},setDefaultProfiles:function(e){let t,a,s=this.data.find(e=>"flags"===e.name);s&&(t=this.chartModel.z.length,a=s.z.length,this.chartModel.z=e?this.chartModel.z.map((e,t)=>s.z[t]?s.z[t].map(e=>e):e):this.chartModel.z.map((e,i)=>i<t-a?e:s.z[i-(t-a)].map(e=>e)))},addModel:function(e,t,a){let s;e&&e.z&&this.data[0]&&this.data[0].x&&(e.z.forEach(e=>{s=this.data[0].x.findIndex(t=>this.isSameDateTime(e.date,this.dateToUtc(t))),-1!==s&&(this.chartModel.z[s]=Object.assign([],e.codes.map(e=>e)),this.chartModelHistory[0].z[s]=Object.assign([],e.codes.map(e=>e))),t&&this.setDefaultProfiles(a)}),this.chartModelToParameter(this.chartModel,"flags"),this.updateFlagsText())},drawFlags:function(e,t){const{coverageFlagsState:a}=this.$store.state.common,s=this.currentSession.charts[0];e&&!a.checkboxState&&this.isTimeSeries&&(e.forEach(e=>{this.drawFlag(e,t)}),this.saveModelHistory()),this.is2dChart&&!this.isModelInit&&(this.isModelInit=!0,this.addModel(s.chartModel))},draw2DFlag:function(e,t){let a;const s=this.currentSession.instrument.availableFlags;s&&(e.availableFlags=e.availableFlags?e.availableFlags:s,a=this.set2DModelByIndex(e,s[0].code,!1),a.eventCoords=t,a.availableFlags=s.slice(0,1),this.updateTargetTrace("flags",this.chartModel),this.drawSelectionZone(a,s[0].code),this.bind2DFlagListener(a),this.notify2DCovrageFlagsState())},notifyCovrageFlagsState:function(){let e;const t=this.chartModelHistory[0],{thresholdsStates:a}=this.$store.state.common,{coverageFlagsState:s}=this.$store.state.common,i=this.currentFlag.x0?this.getAvailableFlagsByColor(this.currentFlag.fillcolor)[0]:this.currentFlag.availableFlags[0],n=this.getChartModelMinMaxIndex(this.flagToPeriod(this.currentFlag));n&&i&&(e=t.x.slice(n.minIndex,n.maxIndex+1).some(e=>e&&e!==i.code),this.$store.commit("updateCoverageFlagsState",Object.assign({},{modelState:e||a.thresholdMinCheckBox||a.thresholdMaxCheckBox,checkboxState:!!s&&s.checkboxState})))},notify2DCovrageFlagsState:function(){let e=!1;const t=this.chartModelHistory[0],{coverageFlagsState:a}=this.$store.state.common,s=this.getChartModelMinMaxIndex(this.flagToPeriod(this.currentFlag)),i=this.currentFlag.x0?this.getAvailableFlagsByColor(this.currentFlag.fillcolor)[0]:this.currentFlag.availableFlags[0];t&&s&&i&&(e=t.z.slice(s.minIndex,s.maxIndex).some(e=>e.slice(s.minYIndex,s.maxYIndex).some(e=>e&&e!==i.code)),this.$store.commit("updateCoverageFlagsState",Object.assign({},{modelState:e,checkboxState:!!a&&a.checkboxState})))},drawFlag:function(e,t){let a,s;const i=e.availableFlags?e.availableFlags[0]:this.currentSession.instrument.availableFlags[0];i&&(a=this.setChartModelStateByIndex(e,i.code,t),a&&(s=this.chartModel.x.slice(a.minIndex,a.maxIndex+1),s.some(e=>null!==e)&&(this.flags=this.addFlagShape(a.min,a.max,i),t||(a.availableFlags=[i],this.bindFlagListener(a)))))},switchFlag:function(e){let t;t=this.currentSession.charts[0].flags.map(e=>Object.assign({},e)).sort((e,t)=>new Date(e.startXaxis)-new Date(t.startXaxis))[i()(e.currentTarget).attr("data-index")],this.currentFlag=t,t&&(this.saveModelHistory(),this.currentFlagId=t.id,this.$store.commit("updateCurrentFlag",Object.assign({},t))),this.notifyCovrageFlagsState()},setFlagDate:function(e,t,a,s){e&&s&&(e.trace.z[t].splice(a,1,s),e.flag.startXaxis=this.isHigherThan(e.flag.startXaxis,this.data[0].x[t])?this.data[0].x[t]:e.flag.startXaxis,e.flag.endXaxis=this.isHigherThan(this.data[0].x[t],e.flag.endXaxis)?this.data[0].x[t]:e.flag.endXaxis,e.flag.startYaxis=this.data[0].y[a]<e.flag.startYaxis?this.data[0].y[a]:e.flag.startYaxis,e.flag.endYaxis=e.flag.endYaxis<this.data[0].y[a]?this.data[0].y[a]:e.flag.endYaxis)},DFS:function(e,t,a,s,i,n,o){t<0||a<0||t>s-1||a>i-1||e.z[t][a]!==n||e.z[t][a]===n&&(e.z[t].splice(a,1,0),this.setFlagDate(o,t,a,n),this.DFS(e,t+1,a,s,i,n,o),this.DFS(e,t-1,a,s,i,n,o),this.DFS(e,t,a+1,s,i,n,o),this.DFS(e,t,a-1,s,i,n,o),this.DFS(e,t+1,a+1,s,i,n,o),this.DFS(e,t-1,a-1,s,i,n,o),this.DFS(e,t+1,a-1,s,i,n,o),this.DFS(e,t-1,a+1,s,i,n,o))},setConnectedComponent:function(e,t,a,s,i){let n=e.z.length,o=e.z[0].length;e.z[t][a]===s&&(e.z[t].splice(a,1,0),this.setFlagDate(i,t,a,s),this.DFS(e,t+1,a,n,o,s,i),this.DFS(e,t-1,a,n,o,s,i),this.DFS(e,t,a+1,n,o,s,i),this.DFS(e,t,a-1,n,o,s,i),this.DFS(e,t+1,a+1,n,o,s,i),this.DFS(e,t-1,a-1,n,o,s,i),this.DFS(e,t+1,a-1,n,o,s,i),this.DFS(e,t-1,a+1,n,o,s,i))},switch2DFlag:function(e){let t;const a=e.pointIndex[1],s=e.pointIndex[0],i=this.chartModel.z[a][s];let n={trace:null,flag:{isDefault:!0,startXaxis:this.data[0].x[a],endXaxis:this.data[0].x[a],startYaxis:this.data[0].y[s],endYaxis:this.data[0].y[s],availableFlags:this.getAvailableFlagsByCode(i)}};this.data.some(e=>"selection"===e.name)||(this.saveModelHistory(),n.trace=this.getSelectionZoneCopy(),t={x:this.chartModel.x.map(e=>e),y:this.chartModel.y.map(e=>e),z:this.chartModel.z.map(e=>e.map(e=>e))},this.setConnectedComponent(t,a,s,i,n),this.addSelectionZone(n.trace),this.bind2DFlagListener(n.flag))},eraseTargetFlag:function(e){let t,a;const s=this.charts["Main chart"];this.isTimeSeries&&e?(t=s.flags.find(t=>t.id===e.id),t&&(this.setChartModelStateByIndex(e,null),this.freshShapes(),a=this.setChartModelStateByIndex(t,null),this.flags=this.addFlagShape(a.min,a.max),this.submit1DModel())):this.is2dChart&&this.chartModel&&this.chartModelHistory[0]&&(this.chartModel.z=this.chartModelHistory[0].z.map(e=>e.map(e=>e)),this.set2DModelByIndex(this.originFlag,null,!0),this.updateTargetTrace("flags",this.chartModel),this.updateModel(!0,this.originFlag,this.originFlag),this.removeTraceByName(["selection"]))},restore1DFlags:function(e){e&&(this.currentFlag=null,this.setChartModelStateByIndex(e,null),this.freshShapes())},deleteFlagsHandler:function(){const{checkboxState:e}=this.$store.state.common.coverageFlagsState;this.currentFlag=null,i()("#"+this.getChartId+" .select-outline").remove()},setFlagDescription:function(e,t){let a;e&&t&&this.currentFlag&&(this.currentFlag.description=t.description,a=e.find(e=>this.isSameFlag(e,this.currentFlag)),a&&(a.description=this.currentFlag.description))},set1dAvailableFlag:function(e){let t,a;const{code:s}=e,{sessionFlags:i}=this.$store.state.common;this.currentFlag&&(a=this.flag?this.flag:this.currentFlag,this.setChartModelStateByIndex(this.currentFlag,null),t=this.setChartModelStateByIndex(a,s),this.flags=this.addFlagShape(t.min,t.max),this.currentFlag.availableFlags=[e],this.setFlagDescription(i,e),this.notifyCovrageFlagsState())},set2dAvailableFlag:function(e){let t;const a=this.currentFlag.availableFlags,{sessionFlags:s}=this.$store.state.common;e&&a&&e.code!==a[0].code&&(t=this.set2DModelByIndex(this.currentFlag,e.code,!1),this.updateTargetTrace("flags",this.chartModel),this.currentFlag.availableFlags=[e],this.removeTraceByName(["selection"]),this.drawSelectionZone(t,e.code),this.notify2DCovrageFlagsState()),this.setFlagDescription(s,e)},setCurrentFlag:function(e,t){const a=this.currentSession.charts[0].flags[e];a&&a.editable&&(this.currentFlag=this.flags[e],t||this.$store.commit("updateCurrentFlag",Object.assign({},a)))},setCurrentFlagById:function(e,t){let a;const s=this.currentSession.charts[0].flags.find(t=>t.id===e);s&&(a=this.flags.findIndex(e=>this.isSameFlag(e,s)),-1!==a&&(this.currentFlag=this.flags[a],this.currentFlagId=e,t||this.$store.commit("updateCurrentFlag",Object.assign({},s))))},set2DFlagCoords:function(e){let t;const{availableFlags:a}=e;this.isSameFlag(e,this.currentFlag)||(this.set2DModelByIndex(this.currentFlag,null,!1),t=this.set2DModelByIndex(e,a[0].code,!1),this.updateTargetTrace("flags",this.chartModel),this.removeTraceByName(["selection"]),this.drawSelectionZone(t,a[0].code),this.currentFlag=e,this.notify2DCovrageFlagsState())},set1DFlagCoords:function(){let e;const t=this.flag?this.flag.availableFlags:null,{selectedFlag:a}=this.$store.state.common,s=a||t[0];t&&a&&this.flag&&(this.setChartModelStateByIndex(this.currentFlag,null),e=this.setChartModelStateByIndex(this.flag,s.code),e&&(this.flags=this.addFlagShape(e.min,e.max,s),this.currentFlag=this.flag,this.notifyCovrageFlagsState()))},isCurrentFlagMainChartFlag:function(){let e=!1,t=this.currentSession.charts[0];return t&&this.currentFlag&&(e=this.flagExist(t.flags,this.flagToPeriod(this.currentFlag,t))),e},cancelFlag:function(e){void 0!==e&&this.isMainChart&&!this.isCurrentFlagMainChartFlag()&&this.addFlagListener()},deleteFlags:function(e){let t;const{sessionFlags:a}=this.$store.state.common;e&&(t=this.flags.filter(e=>"rect"!==e.type),this.flags=[...this.flags.filter(t=>this.isPeriodInPeriod(t,e,!0)),...t],a&&this.$store.commit("updateSessionFlags",a.filter(t=>this.isPeriodInPeriod(t,e,!0))),this.addFlagListener())},getYaxisMinMaxValues:function(){let e={};return this.data&&this.data.forEach(t=>{t&&t.y&&(void 0===e.min&&void 0===e.max&&(e.min=t.y[0],e.max=t.y[0]),t.y.forEach(t=>{t&&(t<e.min&&(e.min=t),e.max<t&&(e.max=t))}))}),e},deleteFlagsCoverage:function(e){e&&(this.isTimeSeries?this.flags=this.getFilterFlags(this.flags,e,!0):this.is2dChart&&(this.flags2d=this.getFilterFlags(this.flags2d,e,!0)))},applyFlagsCoverage:function(e){const{selectedFlag:t}=this.$store.state.common;e&&(this.deleteFlagsHandler(!1),this.flags=this.getFilterFlags(this.flags,e,!0),t&&t.color&&(e.availableFlags=[t]),this.drawFlag(e,!0,e))},overwriteProfiles:function(){let e,t;const a=this.$store.state.common.coverageFlagsState;this.currentFlag&&a&&a.modelState&&(e=this.currentFlag.availableFlags,this.removeTraceByName(["selection"]),t=this.set2DModelByIndex(this.currentFlag,e[0].code,!1),this.updateTargetTrace("flags",this.chartModel),this.drawSelectionZone(t,e[0].code))},restore2DProfiles:function(){this.chartModelHistory&&this.chartModelHistory[0]&&(this.chartModel.z=this.chartModelHistory[0].z.map(e=>e.map(e=>e)),this.updateTargetTrace("flags",this.chartModel),this.removeTraceByName(["selection"]))},coverage1DFlagsHandler:function(){let e,t;const{selectedFlag:a}=this.$store.state.common;a&&this.currentFlag&&(e=a.code,this.setChartModelStateByIndex(this.currentFlag,null),t=this.setChartModelStateByIndex(this.flag,e),this.flags=this.addFlagShape(t.min,t.max))},addFlags:function(e,t){let a;e&&0<e.length&&this.drawFlags(e,!0),t&&0<t.length&&t.forEach(e=>{a=this.setChartModelStateByIndex(e,null),this.flags=this.addFlagShape(a.min,a.max)}),(e&&0<e.length||t&&0<t.length)&&this.submit1DModel()}}}},304:function(e,t,a){var s={"./en.json":305,"./fr.json":306};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id=304},305:function(e){e.exports=JSON.parse('{"appbar":{"login":"Login","logout":"Logout","data_validation_tool":"Data validation tool"},"common":{"ok":"OK","no":"No","yes":"Yes","more":"More","save":"Save","edit":"Edit","chart":"Chart","close":"Close","state":"State","redColor":"Red","method":"Method","cancel":"Cancel","create":"Create","greyColor":"Grey","blueColor":"Blue","pinkColor":"Pink","actions":"Actions","endDate":"End date","whiteColor":"White","blackColor":"Black","greenColor":"Green","endTime":"End time","layering":"Layering","deletion":"Deletion","continue":"Continue","yellowColor":"Yellow","purpleColor":"Purple","orangeColor":"Orange","parameter":"Parameter","label_noData":"No data","startDate":"Start date","startTime":"Start time","skyBlueColor":"Sky blue","in_progress":"In progress","secondaryChart":"Secondary Chart","dataValidationTool":"Data validation tool","message_greaterThan":"The end date must be greater than the start date"},"configuration":{"label_cancel":"Cancel","label_ok":"@:common.ok","label_product":"Product","label_continue":"Continue","label_state":"@:common.state","label_chart":"@:common.chart","label_mainChart":"Main chart","label_newSession":"New session","label_create":"@:common.create","label_productSid":"Product SID","label_sessions":"Sessions list","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_editSession":"@:common.edit","label_sessionsList":"Sessions list","label_creationDate":"Creation date","label_sessionClose":"@:common.close","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_secondaryChart":"Secondary Chart","label_instrumentName":"Instrument name","label_inProgress":"@:common.in_progress","message_existSession":"This session exists","message_openSession":"Open session","label_continueSession":"Continue a session","message_greaterThan":"@:common.message_greaterThan","label_parameterToValidate":"Parameters to Validate","message_sessionHasBeenDeleted":"This session has been deleted","message_mainParameterInLinkedParameters":"Main parameter cannot be contained in linked parameters"},"session":{"label_day":"Day","label_add":"Add","label_name":"Name","label_open":"Open","label_week":"Week","label_send":"Send","label_year":"Year","label_line":"Line","label_hide":"Hide","label_month":"Month","label_color":"Color","label_colors":"Colors","label_clear":"Clear","label_overwrite":"Overwrite","label_times":"Times","label_value":"Values","label_january":"January","label_february":"February","label_march":"March","label_april":"April","label_may":"May","label_june":"June","label_july":"July","label_august":"August","label_ok":"@:common.ok","label_cancel":"@:common.cancel","label_september":"September","label_october":"October","label_november":"November","label_december":"December","label_state":"State","label_windUp":"Close","label_export":"Export","label_remove":"Remove","label_format":"Format","label_delete":"Delete","label_flags":"Flag(s)","label_submit":"Submit","label_period":"Period","label_import":"Import","label_diplay":"Display","label_allDay":"All day","label_profile":"Profile","label_editing":"Editing","label_download":"Download","label_profiles":"Profiles","label_creationDate":"Creation date","label_description":"Description","label_no":"@:common.no","label_selection":"Flag","label_selections":"Flags","label_periods":"Periods","label_general":"General","label_notSeen":"Not Seen","label_yes":"@:common.yes","label_newName":"New name","label_scatter":"Scatter","label_validate":"Validate","label_sessions":"Sessions","label_coverage":"Coverage","label_altitude":"Altitude","label_threshold":"Threshold","label_thresholds":"Thresholds","label_fileFormat":"File format","label_thresholdMin":"Threshold min","label_thresholdMax":"Threshold max","label_save":"@:common.save","label_edit":"@:common.edit","label_colorScale":"ColorScale","label_addChart":"Add chart","label_newPeriod":"New period","label_closeMode":"Close mode","label_validation":"Validation","label_emptyName":"Empty name","label_chart":"@:common.chart","label_emptyList":"Empty list","label_close":"@:common.close","label_chartName":"Chart name","label_exportOfPeriod":"Export","label_mainChart":"Main chart","label_instrument":"Instrument","label_workPeriod":"Work period","label_altitudeMax":"AltitudeMax","label_altitudeMin":"AltitudeMin","label_displayMode":"Display mode","label_renameChart":"Rename chart","label_closing":"Close the period","label_invalidation":"Invalidation","label_alreadySeen":"Already Seen","label_removeChart":"Remove chart","label_actions":"@:common.actions","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_addNewColor":"Add new color","label_vProfile":"Vertical profile","label_addParameter":"Add parameter","label_layering":"@:common.layering","label_deletion":"@:common.deletion","label_qualityFlags":"Quality flags","label_hProfile":"Horizontal profile","label_notValidated":"Not controlled","label_addParameters":"Add parameters","label_addColorScale":"Add colorScales","label_currentPeriod":"Current period","label_chartExist":"This chart exists","label_parameter":"@:common.parameter","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_sendMySession":"Send my session","label_closeSession":"Close the session","label_parameterName":"Parameter name","label_instrumentName":"Instrument name","label_availableFlags":"Available Flags","label_editColorScale":"Edit colorScales","label_deleteSelection":"Delete selection","label_closingOfPeriod":"Close the period","label_alreadyValidated":"Already checked","label_flagsCopy":"Flags copy","label_removeColorScale":"Remove colorScales","label_dataNotAvailable":"Data not available","label_complementaryFlag":"Complementary flag","label_nonDeletableChart":"Non-deletable chart","label_displayManagement":"Display management","label_secondaryChart":"@:common.secondaryChart","label_submittedSelections":"Submitted selections","label_automaticManagement":"Automatic management","label_partiallyControlled":"Partially controlled","label_auxiliaryInstrument":"Instrument","label_chartSynchronization":"Charts synchronization","label_workPeriodDef":"Definition of the working period","label_chartDeSynchronization":"Charts desynchronization","label_selectionBorderColor":"Selection border color","label_periodClosure":"Closing of the current period","label_selectionBackgroundColor":"Selection background color","message_unknownData":"Unknown data","message_existName":"This name exist","message_dataNotAvailable":"Data not available","message_existSelection":"This session exist","message_chooseQualityFlag":"Choose quality flag","message_recordedSelection":"Recorded selection","message_chooseSelection":"Please choose a selection","message_renameChart":"Do you want to rename the chart","message_overwriteFlags":"Do you want to overwrite available flags ?","message_delete":"Are you sure you want to delete this selection ?","message_deleteChart":"Are you sure you want to delete this chart ?","message_novalidateddataflag":"Flag associated with the remaining data","message_deleteSession":"Are you sure you want to delete this session ?","message_thresholdMinGreaterThanThresholdMax":"Threshold min > Threshold max","message_deleteParameter":"Are you sure you want to delete this parameter ?","message_deleteColorScale":"Are you sure you want to delete this colorScale ?","message_canNotEdit":"Selection not edited, because an identical selection exists","message_closeCurrentPeriod":"You are about to close the current period. Once closed, it will no longer be editable.","message_closeSession":"You are about to submit your session to CDS. Please note, once submitted, it will no longer be editable. Would you like to continue ?"},"worksFlow":{"validation":"Validation","view_selection":"Selection"}}')},306:function(e){e.exports=JSON.parse('{"appbar":{"login":"Se connecter","logout":"Se dconnecter","data_validation_tool":"Outil de validation des donnes"},"common":{"ok":"OK","no":"Non","yes":"Oui","more":"Plus","state":"tat","edit":"diter","method":"Mode","close":"Fermer","create":"Crer","cancel":"Annuler","blueColor":"Bleu","greyColor":"Gris","pinkColor":"Rose","redColor":"Rouge","blackColor":"Noir","greenColor":"Vert","chart":"Graphique","actions":"Actions","save":"Enregistrer","whiteColor":"Blanc","yellowColor":"Jaune","orangeColor":"Orange","purpleColor":"Violet","continue":"Continuer","sessionClose":"Ferme","parameter":"Paramtre","in_progress":"En cours","endDate":"Date de fin","deletion":"Supression","endTime":"Heure de fin","layering":"Superposition","skyBlueColor":"Bleu ciel","startDate":"Date de dbut","startTime":"Heure de dbut","secondaryChart":"Graphique secondaire","dataValidationTool":"Outil de validation des donnes","message_greaterThan":"La date de fin doit tre suprieur  la date de dbut"},"configuration":{"label_ok":"@:common.ok","label_cancel":"Annuler","label_product":"Produit","label_continue":"Continuer","label_state":"@:common.state","label_create":"@:common.create","label_productSid":"Produit SID","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_editSession":"@:common.edit","label_newSession":"Nouvelle session","label_sessions":"Liste des sessions","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_mainChart":"Graphique principal","label_creationDate":"Date de cration","label_inProgress":"@:common.in_progress","label_sessionsList":"Liste des sessions","label_sessionClose":"@:common.sessionClose","label_instrumentName":"Nom de l\'instrument","label_secondaryChart":"Graphique secondaire","message_existSession":"Cette session existe","message_openSession":"Session ouverte","label_continueSession":"Continuer une session","label_parameterToValidate":"Paramtres  valider","message_greaterThan":"@:common.message_greaterThan","message_sessionHasBeenDeleted":"Cette session a t supprimer","message_mainParameterInLinkedParameters":"Le paramtre principal ne peut pas tre contenu dans les paramtres lis"},"session":{"label_name":"Nom","label_day":"Jour","label_month":"Mois","label_state":"tat","label_line":"Ligne","label_year":"Anne","label_times":"Temps","label_open":"Ouvrir","label_add":"Ajouter","label_windUp":"Clore","label_value":"Valeurs","label_week":"Semaine","label_send":"Envoyer","label_clear":"Effacer","label_color":"Couleur","label_colors":"Couleurs","label_overwrite":"craser","label_period":"Priode","label_january":"Janvier","label_february":"Fvrier","label_march":"Mars","label_april":"Avril","label_may":"Mai","label_june":"Juin","label_july":"Juillet","label_ok":"@:common.ok","label_august":"Aot","label_september":"Septembre","label_october":"Octobre","label_november":"Novembre","label_december":"Dcembre","label_delete":"Effacer","label_hide":"Cacher","label_editing":"dition","label_no":"@:common.no","label_notSeen":"Non vu","label_scatter":"Point","label_format":"Format","label_profile":"Profil","label_import":"Importer","label_general":"Gnral","label_export":"Exporter","label_profiles":"Profils","label_threshold":"Seuil","label_thresholds":"Seuils","label_thresholdMin":"Seuil min","label_thresholdMax":"Seuil max","label_emptyList":"Liste vide","label_parameterName":"Nom du paramtre","label_periods":"Priodes","label_diplay":"Affichage","label_remove":"Supprimer","label_submit":"Soumettre","label_yes":"@:common.yes","label_flags":"Drapeau(x)","label_validate":"Valider","label_sessions":"Sessions","label_selection":"Drapeau","label_altitude":"Altitude","label_availableFlags":"Drapeaux disponibles","label_selections":"Drapeaux","label_edit":"@:common.edit","label_emptyName":"Nom vide","label_save":"@:common.save","label_newName":"Nouveau nom","label_coverage":"Couverture","label_alreadySeen":"Dj vu","label_validation":"Validation","label_download":"Tlcharger","label_close":"@:common.close","label_closeMode":"Mode clore","label_creationDate":"Date de cration","label_chart":"@:common.chart","label_noData":"Pas de donnes","label_instrument":"Instrument","label_cancel":"@:common.cancel","label_description":"Description","label_altitudeMax":"AltitudeMax","label_altitudeMin":"AltitudeMin","label_allDay":"Toute la journe","label_invalidation":"Invalidation","label_closing":"Clore la priode","label_vProfile":"Profil vertical","label_endTime":"@:common.endTime","label_endDate":"@:common.endDate","label_actions":"@:common.actions","label_newPeriod":"Nouvelle priode","label_layering":"@:common.layering","label_deletion":"@:common.deletion","label_chartName":"Nom du graphique","label_exportOfPeriod":"Exportation","label_hProfile":"Profil horizontal","label_notValidated":"Non controles","label_displayMode":"Mode daffichage","label_fileFormat":"Format de fichier","label_startTime":"@:common.startTime","label_startDate":"@:common.startDate","label_resetAxes":"Rinitialiser les axes","label_parameter":"@:common.parameter","label_workPeriod":"Priode de travail","label_addChart":"Ajouter un graphique","label_closeSession":"clore la session","label_currentPeriod":"Priode actuelle","label_chartExist":"Ce graphique existe","label_mainChart":"Graphique principal","label_colorScale":"Palette de couleurs","label_qualityFlags":"Drapeau de qualit","label_alreadyValidated":"Dj controles","label_closingOfPeriod":"Clore la priode","label_sendMySession":"Envoyer ma session","label_renameChart":"Renommer le graphique","label_addParameter":"Ajouter un paramtre","label_instrumentName":"Nom de l\'instrument","label_removeChart":"Supprimer un graphique","label_addParameters":"Ajout des paramtres","label_deleteSelection":"Supprimer la slection","label_secondaryChart":"@:common.secondaryChart","label_submittedSelections":"Slections soumises","label_automaticManagement":"Gestion automatique","label_dataNotAvailable":"Donnes non disponibles","label_displayManagement":"Gestion de laffichage","label_addNewColor":"Ajouter une nouvelle couleur","label_complementaryFlag":"Drapeau complmenataire","label_flagsCopy":"Copie de drapeaux","label_nonDeletableChart":"Graphique non supprimable","label_selectionBorderColor":"Couleur de la bordure","label_auxiliaryInstrument":"Instrument","label_editColorScale":"diter une palette de couleurs","label_partiallyControlled":"Partiellement contrles","label_addColorScale":"Ajouter une palette de couleurs","label_periodClosure":"Fermeture de la priode courante","label_workPeriodDef":"Dfinition de la priode de travail","label_removeColorScale":"Supprimer une palette de couleurs","label_chartSynchronization":"Synchronisation des graphiques","label_chartDeSynchronization":"Dsynchronisation des graphiques","label_selectionBackgroundColor":"Couleur d\'arrire-plan de la slection","message_existName":"Ce nom existe","message_unknownData":"Donnes inconnues","message_existSelection":"Cette selection existe","message_recordedSelection":"Slection enregistre","message_dataNotAvailable":"Donnes non disponibles","message_chooseSelection":"Veuillez choisir une slection","message_renameChart":"Voulez-vous renommer le graphique","message_chooseQualityFlag":"Choisissez le drapeau de qualit","message_deleteChart":"Voulez-vous vraiment supprimer le graphique","message_thresholdMinGreaterThanThresholdMax":"Seuil min > Seuil max","message_novalidateddataflag":"Drapeau associ aux donnes restantes","message_overwriteFlags":"Voulez-vous craser les drapeaux disponibles ?","message_delete":"tes-vous sr de vouloir supprimer cette slection ?","message_deleteSession":"tes-vous sr de vouloir supprimer cette session ?","message_deleteParameter":"tes-vous sr de vouloir supprimer ce paramtre ?","message_canNotEdit":"Slection non dite, car une slection identique existe","message_deleteColorScale":"tes-vous sr de vouloir supprimer cette palette ?","message_closeCurrentPeriod":"Vous tes sur le point de clore la priode courante. Une fois ferme, elle ne sera plus modifiable.","message_closeSession":"Vous tes sur le point de soumette votre session au CDS. Attention, une fois soumise, celle-ci ne sera plus modifiable. Souhaitez vous continuer ?"},"worksFlow":{"validation":"Validation","view_selection":"Slection"}}')},395:function(e,t,a){"use strict";a.r(t);var s={name:"aeris-datavalidation-periodsdialog-test",components:{AerisDatavalidationPeriodsDialog:a(293).a},data:()=>({selectedLanguage:"en",isEditionAllowed:!0,datavalidationTest:void 0,datavalidation:{messageWithDrawnDataSet:!1,messageExempleSuccess:!1},datavalidation2:!1,title:"Hello world !"}),created(){this.datavalidationTest=this.datavalidation},methods:{setDatavalidation(e,t){this.datavalidation={messageWithDrawnDataSet:e,messageExempleSuccess:t}}}},i=a(18),n=Object(i.a)(s,(function(){var e=this,t=e._self._c;return t("v-app",{attrs:{"app-data":""}},[t("v-main",[t("data-component",{attrs:{datavalidation:e.datavalidation},scopedSlots:e._u([{key:"view",fn:function(){return[t("AerisDatavalidationPeriodsDialog",{attrs:{title:"OPE_NEPHE",uuid:"OPE_NEPHE_RAW",startdate:"2012-09-11T00:00:00.000Z",enddate:"2022-01-01T23:59:59.000Z",availabilityurl:"https://dataviz.icare.univ-lille.fr/daalia"}})]},proxy:!0},{key:"code",fn:function(){return[e._t("code")]},proxy:!0},{key:"json",fn:function(t){return[e._t("json")]}}],null,!0)})],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);